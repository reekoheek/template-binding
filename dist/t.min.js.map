{"version":3,"sources":["webpack:///t.min.js","webpack:///webpack/bootstrap 17303c49f050c2180e96","webpack:///./src/index.js","webpack:///./src/expr.js","webpack:///./src/token.js","webpack:///./src/filter.js","webpack:///./src/binding.js","webpack:///./src/accessor.js","webpack:///./src/annotation.js","webpack:///./src/serializer.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","nextId","templateId","slotName","element","SLOT_SUPPORTED","name","getAttribute","slotAppend","slot","node","root","__slotHasChildren","__slotFallbackContent","innerHTML","appendChild","elementSlot","fixTemplate","template","content","window","HTMLTemplateElement","decorate","T","host","marker","this","__templateInitialize","_typeof","Symbol","iterator","obj","constructor","Expr","Filter","Binding","Accessor","Annotation","Token","Serializer","document","createElement","HTMLUnknownElement","prototype","$","__templateHost","getElementsByTagName","__templateId","__templateBindings","parentElement","__templateMarker","__template","__templateFragment","importNode","__templateChildNodes","slice","childNodes","__parseAnnotations","createComment","$$","selector","querySelector","render","_this","forEach","querySelectorAll","nodeType","Node","ELEMENT_NODE","err","console","error","stack","insertBefore","__templateUninitialize","removeChild","all","i","hasOwnProperty","set","__templateGetPathAsArray","path","Error","is","split","__templateGetPathAsString","join","get","object","some","segment","undefined","value","oldValue","property","pop","notify","binding","__templateGetBinding","walkEffect","warn","message","_this2","len","length","__parseElementAnnotations","TEXT_NODE","__parseTextAnnotations","Object","keys","key","__parseEventAnnotations","attrName","attrValue","eventName","context","expr","getFn","addEventListener","evt","invoke","__parseAttributeAnnotations","_this3","attributes","reduce","annotated","attr","indexOf","__templateAnnotate","_this4","scoped","__templateModel","childNodesLength","__parseNodeAnnotations","textContent","accessor","nodeName","_this5","type","annotation","annotatedPaths","arg","annotations","push","segments","bindings","paths","_classCallCheck","instance","Constructor","TypeError","_get","mode","CACHE","unwrapped","trim","args","rawTokenize","str","count","tokens","matches","match","substr","tokenize","map","token","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","filters","word","otherArgs","val","filter","fn","apply","_annotatedPaths","[s","global","GLOBAL","JSON","parse","_value","others","callback","registry","splice","required","upper","String","toUpperCase","lower","toLowerCase","not","begin","end","Array","model","effect","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","BaseAccessor","endsWith","AttributeAccessor","TextAccessor","HTMLAccessor","ValueAccessor","startsWith","ClassAccessor","StyleAccessor","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_BaseAccessor","_BaseAccessor2","arguments","classList","add","remove","_BaseAccessor3","style","_BaseAccessor4","_BaseAccessor5","selectable","activeElement","_BaseAccessor6","setAttribute","removeAttribute","serialize","Date","stringify","deserialize","Number","Boolean","log"],"mappings":"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","file":"t.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\t/* globals Node, HTMLUnknownElement */\n\tvar Expr = __webpack_require__(1);\n\tvar Filter = __webpack_require__(3);\n\tvar Binding = __webpack_require__(4);\n\tvar Accessor = __webpack_require__(5);\n\tvar Annotation = __webpack_require__(6);\n\tvar Token = __webpack_require__(2);\n\tvar Serializer = __webpack_require__(7);\n\t\n\tvar SLOT_SUPPORTED = 'HTMLUnknownElement' in window && !(document.createElement('slot') instanceof HTMLUnknownElement);\n\t\n\tvar templateId = 0;\n\t\n\tfunction nextId() {\n\t  return templateId++;\n\t}\n\t\n\tfunction slotName(element) {\n\t  return SLOT_SUPPORTED ? element.name : element.getAttribute('name');\n\t}\n\t\n\tfunction slotAppend(slot, node, root) {\n\t  if (!slot.__slotHasChildren) {\n\t    slot.__slotHasChildren = true;\n\t    slot.__slotFallbackContent = slot.innerHTML;\n\t    slot.innerHTML = '';\n\t  }\n\t\n\t  slot.appendChild(node);\n\t}\n\t\n\tfunction elementSlot(element) {\n\t  return SLOT_SUPPORTED ? element.slot : element.getAttribute('slot');\n\t}\n\t\n\tfunction fixTemplate(template) {\n\t  if (!template.content && window.HTMLTemplateElement && window.HTMLTemplateElement.decorate) {\n\t    window.HTMLTemplateElement.decorate(template);\n\t  }\n\t  return template;\n\t}\n\t\n\tfunction T(template, host, marker) {\n\t  this.__templateInitialize(template, host, marker);\n\t}\n\t\n\tT.prototype = {\n\t  get $() {\n\t    return this.__templateHost.getElementsByTagName('*');\n\t  },\n\t\n\t  __templateInitialize: function __templateInitialize(template, host, marker) {\n\t    this.__templateId = nextId();\n\t    this.__templateBindings = {};\n\t    this.__templateHost = host || (template ? template.parentElement : null);\n\t    this.__templateMarker = marker;\n\t\n\t    if (!template) {\n\t      return;\n\t    }\n\t\n\t    // do below only if template is exists\n\t    this.__template = fixTemplate(template);\n\t    this.__templateFragment = document.importNode(this.__template.content, true);\n\t    this.__templateChildNodes = [].slice.call(this.__templateFragment.childNodes);\n\t    this.__parseAnnotations();\n\t\n\t    if (marker) {\n\t      return;\n\t    }\n\t\n\t    if (this.__template.parentElement === this.__templateHost) {\n\t      // when template parent is template host, it means that template is specific template\n\t      // then use template as marker\n\t      this.__templateMarker = this.__template;\n\t    } else {\n\t      // when template is not child of host, put marker to host\n\t      this.__templateMarker = document.createComment('marker-' + this.__templateId);\n\t      this.__templateHost.appendChild(this.__templateMarker);\n\t    }\n\t  },\n\t  $$: function $$(selector) {\n\t    return this.querySelector(selector);\n\t  },\n\t  render: function render(content) {\n\t    var _this = this;\n\t\n\t    if (!this.__template) {\n\t      return;\n\t    }\n\t\n\t    if (content) {\n\t      try {\n\t        [].forEach.call(this.__templateFragment.querySelectorAll('slot'), function (slot) {\n\t          var name = slotName(slot);\n\t          if (name) {\n\t            content.forEach(function (node) {\n\t              if (node.nodeType === Node.ELEMENT_NODE && name === elementSlot(node)) {\n\t                slotAppend(slot, node, _this.__templateFragment);\n\t              }\n\t              // TODO query to childnodes looking for slot\n\t            });\n\t          } else {\n\t            content.forEach(function (node) {\n\t              slotAppend(slot, node, _this.__templateFragment);\n\t            });\n\t          }\n\t        });\n\t      } catch (err) {\n\t        console.error(err.stack);\n\t        throw err;\n\t      }\n\t    }\n\t\n\t    this.__templateMarker.parentElement.insertBefore(this.__templateFragment, this.__templateMarker);\n\t  },\n\t  __templateUninitialize: function __templateUninitialize() {\n\t    this.__templateChildNodes.forEach(function (node) {\n\t      node.parentElement.removeChild(node);\n\t    });\n\t  },\n\t  all: function all(obj) {\n\t    for (var i in obj) {\n\t      if (obj.hasOwnProperty(i)) {\n\t        this.set(i, obj[i]);\n\t      }\n\t    }\n\t  },\n\t  __templateGetPathAsArray: function __templateGetPathAsArray(path) {\n\t    if (!path) {\n\t      throw new Error('Unknown path ' + path + ' to set to ' + this.is);\n\t    }\n\t\n\t    if (typeof path !== 'string') {\n\t      return path;\n\t    }\n\t\n\t    return path.split('.');\n\t  },\n\t  __templateGetPathAsString: function __templateGetPathAsString(path) {\n\t    if (typeof path === 'string') {\n\t      return path;\n\t    }\n\t\n\t    return path.join('.');\n\t  },\n\t  get: function get(path) {\n\t    var object = this;\n\t\n\t    this.__templateGetPathAsArray(path).some(function (segment) {\n\t      if (object === undefined || object === null) {\n\t        object = undefined;\n\t        return true;\n\t      }\n\t\n\t      object = object[segment];\n\t      return false;\n\t    });\n\t\n\t    return object;\n\t  },\n\t  set: function set(path, value) {\n\t    path = this.__templateGetPathAsArray(path);\n\t\n\t    var oldValue = this.get(path);\n\t\n\t    if (value === oldValue) {\n\t      return;\n\t    }\n\t\n\t    var object = this;\n\t\n\t    path.slice(0, -1).forEach(function (segment) {\n\t      if (!object) {\n\t        return;\n\t      }\n\t      if (object[segment] === undefined || object[segment] === null) {\n\t        object[segment] = {};\n\t      }\n\t\n\t      object = object[segment];\n\t    });\n\t\n\t    var property = path.slice(-1).pop();\n\t\n\t    object[property] = value;\n\t\n\t    this.notify(path, value);\n\t  },\n\t  notify: function notify(path, value) {\n\t    path = this.__templateGetPathAsString(path);\n\t\n\t    // console.log(this.__getId(), '<notify>', path, '?', value, `<${typeof value}>`);\n\t\n\t    try {\n\t      var binding = this.__templateGetBinding(path);\n\t      if (binding) {\n\t        binding.walkEffect(value);\n\t      }\n\t    } catch (err) {\n\t      console.warn('#notify caught error: ' + err.message + '\\n Stack trace: ' + err.stack);\n\t    }\n\t  },\n\t  __parseAnnotations: function __parseAnnotations() {\n\t    var _this2 = this;\n\t\n\t    // this.__templateAnnotatedElements = [];\n\t\n\t    var len = this.__templateFragment.childNodes.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var node = this.__templateFragment.childNodes[i];\n\t      switch (node.nodeType) {\n\t        case Node.ELEMENT_NODE:\n\t          this.__parseElementAnnotations(node);\n\t          break;\n\t        case Node.TEXT_NODE:\n\t          this.__parseTextAnnotations(node);\n\t          break;\n\t      }\n\t    }\n\t\n\t    Object.keys(this.__templateBindings).forEach(function (key) {\n\t      _this2.notify(key, _this2.get(key));\n\t    });\n\t  },\n\t  __parseEventAnnotations: function __parseEventAnnotations(element, attrName) {\n\t    // bind event annotation\n\t    var attrValue = element.getAttribute(attrName);\n\t    var eventName = attrName.slice(1, -1);\n\t    // let eventName = attrName.substr(3);\n\t    if (eventName === 'tap') {\n\t      eventName = 'click';\n\t    }\n\t\n\t    var context = this;\n\t    var expr = Expr.getFn(attrValue, [], true);\n\t\n\t    // console.log(this, element);\n\t    // TODO might be slow or memory leak setting event listener to inside element\n\t    element.addEventListener(eventName, function (evt) {\n\t      return expr.invoke(context, { evt: evt });\n\t    }, true);\n\t  },\n\t  __parseAttributeAnnotations: function __parseAttributeAnnotations(element) {\n\t    var _this3 = this;\n\t\n\t    // clone attributes to array first then foreach because we will remove\n\t    // attribute later if already processed\n\t    // this hack to make sure when attribute removed the attributes index doesnt shift.\n\t    return [].slice.call(element.attributes).reduce(function (annotated, attr) {\n\t      var attrName = attr.name;\n\t\n\t      if (attrName.indexOf('(') === 0) {\n\t        _this3.__parseEventAnnotations(element, attrName);\n\t      } else {\n\t        // bind property annotation\n\t        annotated = _this3.__templateAnnotate(Expr.get(attr.value), Accessor.get(element, attrName)) || annotated;\n\t      }\n\t\n\t      return annotated;\n\t    }, false);\n\t  },\n\t  __parseElementAnnotations: function __parseElementAnnotations(element) {\n\t    var _this4 = this;\n\t\n\t    var annotated = false;\n\t    var scoped = element.__templateModel;\n\t\n\t    if (scoped) {\n\t      return annotated;\n\t    }\n\t\n\t    // element.classList.add(`${this.__templateHost.is || 'template'}__scope`);\n\t    element.__templateModel = this;\n\t\n\t    if (element.attributes && element.attributes.length) {\n\t      annotated = this.__parseAttributeAnnotations(element) || annotated;\n\t    }\n\t\n\t    if (element.childNodes && element.childNodes.length) {\n\t      var childNodes = [].slice.call(element.childNodes);\n\t      var childNodesLength = childNodes.length;\n\t\n\t      for (var i = 0; i < childNodesLength; i++) {\n\t        annotated = this.__parseNodeAnnotations(childNodes[i]) || annotated;\n\t      }\n\t    }\n\t\n\t    [].forEach.call(element.getElementsByTagName('slot'), function (slot) {\n\t      [].forEach.call(slot.childNodes, function (node) {\n\t        annotated = _this4.__parseNodeAnnotations(node) || annotated;\n\t      });\n\t    });\n\t\n\t    return annotated;\n\t  },\n\t  __parseNodeAnnotations: function __parseNodeAnnotations(node) {\n\t    switch (node.nodeType) {\n\t      case Node.TEXT_NODE:\n\t        return this.__parseTextAnnotations(node);\n\t      case Node.ELEMENT_NODE:\n\t        return this.__parseElementAnnotations(node);\n\t    }\n\t  },\n\t  __parseTextAnnotations: function __parseTextAnnotations(node) {\n\t    var expr = Expr.get(node.textContent);\n\t\n\t    var accessor = void 0;\n\t    if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n\t      accessor = Accessor.get(node.parentElement, 'value');\n\t    } else {\n\t      accessor = Accessor.get(node);\n\t    }\n\t\n\t    return this.__templateAnnotate(expr, accessor);\n\t  },\n\t  __templateAnnotate: function __templateAnnotate(expr, accessor) {\n\t    var _this5 = this;\n\t\n\t    if (expr.type === 's') {\n\t      return false;\n\t    }\n\t\n\t    // annotate every paths\n\t    var annotation = new Annotation(this, expr, accessor);\n\t\n\t    expr.annotatedPaths.forEach(function (arg) {\n\t      return _this5.__templateGetBinding(arg.name).annotations.push(annotation);\n\t    });\n\t\n\t    return true;\n\t  },\n\t  __templateGetBinding: function __templateGetBinding(path) {\n\t    var segments = path.split('.');\n\t    var bindings = void 0;\n\t    var binding = void 0;\n\t\n\t    for (var i = 0; i < segments.length; i++) {\n\t      var segment = segments[i];\n\t\n\t      bindings = binding ? binding.paths : this.__templateBindings;\n\t\n\t      if (!bindings[segment]) {\n\t        bindings[segment] = new Binding(this, segment);\n\t      }\n\t\n\t      binding = bindings[segment];\n\t    }\n\t\n\t    return binding;\n\t  }\n\t};\n\t\n\tif ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n\t  window.T = T;\n\t}\n\t\n\tmodule.exports = T;\n\tmodule.exports.Filter = Filter;\n\tmodule.exports.Accessor = Accessor;\n\tmodule.exports.Expr = Expr;\n\tmodule.exports.Token = Token;\n\tmodule.exports.Serializer = Serializer;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Token = __webpack_require__(2);\n\tvar Filter = __webpack_require__(3);\n\t\n\tvar Expr = function () {\n\t  function Expr(value, mode, type) {\n\t    _classCallCheck(this, Expr);\n\t\n\t    // define base properties\n\t    this.mode = mode;\n\t    this.type = type;\n\t    this.name = '';\n\t    this.args = [];\n\t    this.filters = [];\n\t    this.value = value;\n\t    // this.unwrapped = Boolean(unwrapped);\n\t\n\t    // TODO support expr with function or others\n\t    // let valType = typeof value;\n\t    // if (valType === 'function') {\n\t    //   this.type = 'm';\n\t    //   return;\n\t    // } else if (valType !== 'string') {\n\t    //   // validate args\n\t    //   return;\n\t    // }\n\t\n\t    // cleanse value\n\t    // value = value.trim();\n\t\n\t    if (type === 's') {\n\t      return;\n\t    }\n\t\n\t    var tokens = value.split('|');\n\t    var token = tokens[0].trim();\n\t\n\t    this.filters = tokens.slice(1).map(function (word) {\n\t      return Filter.get(word.trim());\n\t    });\n\t\n\t    // if (!this.unwrapped) {\n\t    //   if (value[0] !== '[' && value[0] !== '{') {\n\t    //     return;\n\t    //   }\n\t    //   token = value.slice(2, -2).trim();\n\t    //   this.mode = value[0];\n\t    // }\n\t\n\t    if (token.indexOf('(') < 0) {\n\t      this.type = 'p';\n\t      this.name = token;\n\t      this.args.push(new Token(token));\n\t    } else {\n\t      // force mode to '[' when type is !p\n\t      this.mode = '[';\n\t      this.type = 'm';\n\t\n\t      var matches = token.match(/([^(]+)\\(([^)]*)\\)/);\n\t\n\t      this.name = matches[1].trim();\n\t\n\t      this.args = tokenize(matches[2]);\n\t    }\n\t  }\n\t\n\t  _createClass(Expr, [{\n\t    key: 'invoke',\n\t    value: function invoke(context, otherArgs) {\n\t      if (this.type === 'p') {\n\t        var val = typeof context.get === 'function' ? context.get(this.name) : context[this.name];\n\t        return this.filters.reduce(function (val, filter) {\n\t          return filter.invoke(val);\n\t        }, val);\n\t      }\n\t\n\t      var fn = context.__templateHost[this.name];\n\t      if (typeof fn !== 'function') {\n\t        throw new Error('Method is not eligible, ' + (context.__templateHost.nodeName || '$anonymous') + '#' + this.name);\n\t      }\n\t\n\t      var args = this.args.map(function (arg) {\n\t        return arg.value(context, otherArgs);\n\t      });\n\t\n\t      return fn.apply(context, args);\n\t    }\n\t  }, {\n\t    key: 'annotatedPaths',\n\t    get: function get() {\n\t      var _this = this;\n\t\n\t      if (!this._annotatedPaths) {\n\t        (function () {\n\t          var annotatedPaths = [];\n\t          _this.args.forEach(function (arg) {\n\t            if (arg.type === 'v' && annotatedPaths.indexOf(arg.name) === -1) {\n\t              annotatedPaths.push(arg);\n\t            }\n\t          });\n\t          _this._annotatedPaths = annotatedPaths;\n\t        })();\n\t      }\n\t\n\t      return this._annotatedPaths;\n\t    }\n\t  }]);\n\t\n\t  return Expr;\n\t}();\n\t\n\tExpr.CACHE = {\n\t  '[s': new Expr('', '[', 's')\n\t};\n\t\n\tfunction _get(value, mode, type) {\n\t  var key = value + mode + type;\n\t  var expr = Expr.CACHE[key];\n\t\n\t  if (!expr) {\n\t    expr = new Expr(value, mode, type);\n\t    if (type !== 's') {\n\t      Expr.CACHE[key] = expr;\n\t    }\n\t  }\n\t\n\t  return expr;\n\t}\n\t\n\tfunction get(value, unwrapped) {\n\t  value = (value || '').trim();\n\t\n\t  if (unwrapped) {\n\t    return _get(value, '[', 'v');\n\t  }\n\t\n\t  var mode = value[0];\n\t  if (mode === '[' || mode === '{') {\n\t    value = value.slice(2, -2).trim();\n\t    return _get(value, mode, 'v');\n\t  }\n\t\n\t  return _get(value, '[', 's');\n\t}\n\t\n\tfunction getFn(value, args, unwrapped) {\n\t  // if (typeof value === 'function') {\n\t  //   return get(value, unwrapped);\n\t  // }\n\t  return get(value.indexOf('(') === -1 ? value + '(' + args.join(', ') + ')' : value, unwrapped);\n\t}\n\t\n\tfunction rawTokenize(str) {\n\t  var count = 0;\n\t  var tokens = [];\n\t\n\t  while (str && count++ < 10) {\n\t    var matches = str.match(/^\\s*(\"[^\"]*\"|[^,]+),?/);\n\t\n\t    str = str.substr(matches[0].length);\n\t    tokens.push(matches[1].trim());\n\t  }\n\t\n\t  return tokens;\n\t}\n\t\n\tfunction tokenize(str) {\n\t  return rawTokenize(str).map(function (token) {\n\t    return new Token(token);\n\t  });\n\t}\n\t\n\tmodule.exports = Expr;\n\tmodule.exports.getFn = getFn;\n\tmodule.exports.get = get;\n\tmodule.exports.rawTokenize = rawTokenize;\n\tmodule.exports.tokenize = tokenize;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar GLOBAL = global || window;\n\t\n\tvar Token = function () {\n\t  function Token(name) {\n\t    _classCallCheck(this, Token);\n\t\n\t    this.name = name;\n\t    try {\n\t      var value = JSON.parse(this.name);\n\t      this.type = 's';\n\t      this._value = value;\n\t    } catch (err) {\n\t      this.type = 'v';\n\t      this._value = null;\n\t    }\n\t  }\n\t\n\t  _createClass(Token, [{\n\t    key: 'value',\n\t    value: function value(context, others) {\n\t      context = context || GLOBAL;\n\t\n\t      if (this.type === 's') {\n\t        return this._value;\n\t      }\n\t\n\t      if (context) {\n\t        var val = context.get ? context.get(this.name) : context[this.name];\n\t        if (typeof val !== 'undefined') {\n\t          return val;\n\t        }\n\t      }\n\t\n\t      if (others) {\n\t        var _val = others.get ? others.get(this.name) : others[this.name];\n\t        if (typeof _val !== 'undefined') {\n\t          return _val;\n\t        }\n\t      }\n\t\n\t      return;\n\t    }\n\t  }]);\n\t\n\t  return Token;\n\t}();\n\t\n\tfunction get(name) {\n\t  // FIXME implement cache\n\t  return new Token(name);\n\t}\n\t\n\tmodule.exports = Token;\n\tmodule.exports.get = get;\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Filter = function () {\n\t  function Filter(name, callback, otherArgs) {\n\t    _classCallCheck(this, Filter);\n\t\n\t    this.name = name;\n\t    this.callback = callback;\n\t    this.otherArgs = otherArgs;\n\t  }\n\t\n\t  _createClass(Filter, [{\n\t    key: 'invoke',\n\t    value: function invoke(val) {\n\t      var args = [val];\n\t      [].push.apply(args, this.otherArgs);\n\t      return this.callback.apply(null, args);\n\t    }\n\t  }], [{\n\t    key: 'put',\n\t    value: function put(name, callback) {\n\t      registry[name] = callback;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(name) {\n\t      var segments = name.split(':');\n\t      var args = segments.splice(1);\n\t      var key = segments.pop();\n\t      return new Filter(key, registry[key], args);\n\t    }\n\t  }]);\n\t\n\t  return Filter;\n\t}();\n\t\n\tvar registry = {\n\t  required: function required(val) {\n\t    if (val === undefined || val === null || val === '') {\n\t      throw new Error('Value is required');\n\t    }\n\t    return val;\n\t  },\n\t  upper: function upper(val) {\n\t    return String.prototype.toUpperCase.call(val || '');\n\t  },\n\t  lower: function lower(val) {\n\t    return String.prototype.toLowerCase.call(val || '');\n\t  },\n\t  not: function not(val) {\n\t    return !val;\n\t  },\n\t  slice: function slice(val, begin, end) {\n\t    return Array.prototype.slice.call(val || [], begin, end);\n\t  }\n\t};\n\t\n\tmodule.exports = Filter;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Binding = function () {\n\t  function Binding(context, model) {\n\t    _classCallCheck(this, Binding);\n\t\n\t    this.context = context;\n\t    this.model = model;\n\t    this.paths = {};\n\t    this.annotations = [];\n\t  }\n\t\n\t  _createClass(Binding, [{\n\t    key: 'walkEffect',\n\t    value: function walkEffect(value) {\n\t      var _this = this;\n\t\n\t      this.annotations.forEach(function (annotation) {\n\t        try {\n\t          annotation.effect(value, _this.model);\n\t        } catch (err) {\n\t          console.error('Error caught while walk effect annotation: ' + (annotation.expr ? annotation.expr.value : '#unknown') + '\\n ' + err.stack);\n\t        }\n\t      });\n\t\n\t      Object.keys(this.paths).forEach(function (i) {\n\t        _this.paths[i].walkEffect(value ? value[i] : undefined);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Binding;\n\t}();\n\t\n\tmodule.exports = Binding;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/* globals Node */\n\t\n\tvar BaseAccessor = function () {\n\t  function BaseAccessor(node, name) {\n\t    _classCallCheck(this, BaseAccessor);\n\t\n\t    this.node = node;\n\t    this.name = name;\n\t  }\n\t\n\t  _createClass(BaseAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      if (typeof this.node.set === 'function') {\n\t        this.node.set(this.name, value);\n\t      } else {\n\t        this.node[this.name] = value;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      if (typeof this.node.get === 'function') {\n\t        return this.node.get(this.name);\n\t      } else {\n\t        return this.node[this.name];\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BaseAccessor;\n\t}();\n\t\n\tvar TextAccessor = function (_BaseAccessor) {\n\t  _inherits(TextAccessor, _BaseAccessor);\n\t\n\t  function TextAccessor(node) {\n\t    _classCallCheck(this, TextAccessor);\n\t\n\t    return _possibleConstructorReturn(this, (TextAccessor.__proto__ || Object.getPrototypeOf(TextAccessor)).call(this, node, 'textContent'));\n\t  }\n\t\n\t  _createClass(TextAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.node.textContent = typeof value === 'undefined' ? '' : value;\n\t    }\n\t  }]);\n\t\n\t  return TextAccessor;\n\t}(BaseAccessor);\n\t\n\tvar ClassAccessor = function (_BaseAccessor2) {\n\t  _inherits(ClassAccessor, _BaseAccessor2);\n\t\n\t  function ClassAccessor() {\n\t    _classCallCheck(this, ClassAccessor);\n\t\n\t    return _possibleConstructorReturn(this, (ClassAccessor.__proto__ || Object.getPrototypeOf(ClassAccessor)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(ClassAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      if (value) {\n\t        this.node.classList.add(this.name);\n\t      } else {\n\t        this.node.classList.remove(this.name);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      throw new Error('Unimplemented');\n\t    }\n\t  }]);\n\t\n\t  return ClassAccessor;\n\t}(BaseAccessor);\n\t\n\tvar StyleAccessor = function (_BaseAccessor3) {\n\t  _inherits(StyleAccessor, _BaseAccessor3);\n\t\n\t  function StyleAccessor() {\n\t    _classCallCheck(this, StyleAccessor);\n\t\n\t    return _possibleConstructorReturn(this, (StyleAccessor.__proto__ || Object.getPrototypeOf(StyleAccessor)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(StyleAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.node.style[this.name] = value || '';\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      throw new Error('Unimplemented');\n\t    }\n\t  }]);\n\t\n\t  return StyleAccessor;\n\t}(BaseAccessor);\n\t\n\tvar HTMLAccessor = function (_BaseAccessor4) {\n\t  _inherits(HTMLAccessor, _BaseAccessor4);\n\t\n\t  function HTMLAccessor() {\n\t    _classCallCheck(this, HTMLAccessor);\n\t\n\t    return _possibleConstructorReturn(this, (HTMLAccessor.__proto__ || Object.getPrototypeOf(HTMLAccessor)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(HTMLAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.node.innerHTML = typeof value === 'undefined' ? '' : value;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.node.innerHTML;\n\t    }\n\t  }]);\n\t\n\t  return HTMLAccessor;\n\t}(BaseAccessor);\n\t\n\tvar ValueAccessor = function (_BaseAccessor5) {\n\t  _inherits(ValueAccessor, _BaseAccessor5);\n\t\n\t  function ValueAccessor(node) {\n\t    _classCallCheck(this, ValueAccessor);\n\t\n\t    return _possibleConstructorReturn(this, (ValueAccessor.__proto__ || Object.getPrototypeOf(ValueAccessor)).call(this, node, 'value'));\n\t  }\n\t\n\t  _createClass(ValueAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      var selectable = document.activeElement === this.node;\n\t      if (!selectable) {\n\t        _get(ValueAccessor.prototype.__proto__ || Object.getPrototypeOf(ValueAccessor.prototype), 'set', this).call(this, typeof value === 'undefined' ? '' : value);\n\t      }\n\t      //  &&\n\t      //   this.node.nodeName === 'INPUT' && (\n\t      //       this.node.type !== 'email' &&\n\t      //       this.node.type !== 'range' &&\n\t      //       this.node.type !== 'checkbox'\n\t      //       );\n\t      //\n\t      // var selStart;\n\t      // var selEnd;\n\t      // if (selectable) {\n\t      //   selStart = this.node.selectionStart;\n\t      //   selEnd = this.node.selectionEnd;\n\t      // }\n\t      //\n\t      // this.node[this.name] = value === undefined ? '' : value;\n\t      //\n\t      // if (selectable) {\n\t      //   this.node.setSelectionRange(selStart, selEnd);\n\t      //\n\t      //   // does not work well with below\n\t      //   // this.context.selectionStart = selStart;\n\t      //   // this.context.selectionEnd = selStart;\n\t      // }\n\t      // super.set(typeof value === 'undefined' ? '' : value);\n\t    }\n\t  }]);\n\t\n\t  return ValueAccessor;\n\t}(BaseAccessor);\n\t\n\tvar AttributeAccessor = function (_BaseAccessor6) {\n\t  _inherits(AttributeAccessor, _BaseAccessor6);\n\t\n\t  function AttributeAccessor(node, name) {\n\t    _classCallCheck(this, AttributeAccessor);\n\t\n\t    return _possibleConstructorReturn(this, (AttributeAccessor.__proto__ || Object.getPrototypeOf(AttributeAccessor)).call(this, node, name.slice(0, -1)));\n\t  }\n\t\n\t  _createClass(AttributeAccessor, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      if (value) {\n\t        this.node.setAttribute(this.name, value);\n\t      } else {\n\t        this.node.removeAttribute(this.name);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.node.getAttribute(this.name);\n\t    }\n\t  }]);\n\t\n\t  return AttributeAccessor;\n\t}(BaseAccessor);\n\t\n\tfunction get(node, name) {\n\t  if (node && 'nodeType' in node) {\n\t    switch (node.nodeType) {\n\t      case Node.ELEMENT_NODE:\n\t        if (name.endsWith('$')) {\n\t          return new AttributeAccessor(node, name);\n\t        } else if (name === 'text') {\n\t          return new TextAccessor(node);\n\t        } else if (name === 'html') {\n\t          return new HTMLAccessor(node, name);\n\t        } else if (name === 'value' && node.nodeName === 'INPUT') {\n\t          return new ValueAccessor(node);\n\t        }\n\t\n\t        if (name.startsWith('class.')) {\n\t          return new ClassAccessor(node, name.split('.').splice(1).join('.'));\n\t        } else if (name.startsWith('style.')) {\n\t          return new StyleAccessor(node, name.split('.').splice(1).join('.'));\n\t        }\n\t\n\t        return new BaseAccessor(node, name);\n\t      case Node.TEXT_NODE:\n\t        if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n\t          return new ValueAccessor(node.parentElement);\n\t        }\n\t\n\t        return new TextAccessor(node);\n\t      default:\n\t        throw new Error('Unimplemented resolving accessor for nodeType: ' + node.nodeType);\n\t    }\n\t  } else {\n\t    return new BaseAccessor(node, name);\n\t  }\n\t}\n\t\n\tmodule.exports = BaseAccessor;\n\tmodule.exports.get = get;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Annotation = function () {\n\t  function Annotation(model, expr, accessor) {\n\t    _classCallCheck(this, Annotation);\n\t\n\t    this.model = model;\n\t    this.expr = expr;\n\t    this.accessor = accessor;\n\t  }\n\t\n\t  _createClass(Annotation, [{\n\t    key: \"effect\",\n\t    value: function effect(value) {\n\t      if (this.accessor) {\n\t        var _value = this.expr.invoke(this.model);\n\t        // FIXME implement composite annotation\n\t        // FIXME implement filtered annotation\n\t        // FIXME implement function type annotation\n\t        this.accessor.set(_value);\n\t      } else {\n\t        this.expr.invoke(this.model);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Annotation;\n\t}();\n\t\n\tmodule.exports = Annotation;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tfunction serialize(value) {\n\t  switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t    case 'boolean':\n\t      return value ? '' : undefined;\n\t\n\t    case 'object':\n\t      if (value instanceof Date) {\n\t        return value;\n\t      } else if (value) {\n\t        try {\n\t          return JSON.stringify(value);\n\t        } catch (err) {\n\t          return '';\n\t        }\n\t      }\n\t      break;\n\t    default:\n\t    // noop\n\t  }\n\t  return value === null ? undefined : value;\n\t}\n\t\n\tfunction deserialize(value, type) {\n\t  switch (type) {\n\t    case Number:\n\t      value = Number(value);\n\t      break;\n\t\n\t    case Boolean:\n\t      value = Boolean(value === '' || value === 'true' || value === '1' || value === 'on');\n\t      break;\n\t\n\t    case Object:\n\t      try {\n\t        value = JSON.parse(value);\n\t      } catch (err) {\n\t        // allow non-JSON literals like Strings and Numbers\n\t        // console.warn('Failed decode json: \"' + value + '\" to Object');\n\t      }\n\t      break;\n\t\n\t    case Array:\n\t      try {\n\t        value = JSON.parse(value);\n\t      } catch (err) {\n\t        // .console.warn('Failed decode json: \"' + value + '\" to Array');\n\t        value = null;\n\t      }\n\t      break;\n\t\n\t    case Date:\n\t      console.log('>>>', value);\n\t      value = new Date(value);\n\t      break;\n\t\n\t    // behave like default for now\n\t    // case String:\n\t    default:\n\t      break;\n\t  }\n\t  return value;\n\t}\n\t\n\tmodule.exports.serialize = serialize;\n\tmodule.exports.deserialize = deserialize;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** t.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 17303c49f050c2180e96\n **/","/* globals Node, HTMLUnknownElement */\nconst Expr = require('./expr');\nconst Filter = require('./filter');\nconst Binding = require('./binding');\nconst Accessor = require('./accessor');\nconst Annotation = require('./annotation');\nconst Token = require('./token');\nconst Serializer = require('./serializer');\n\nconst SLOT_SUPPORTED = 'HTMLUnknownElement' in window && !(document.createElement('slot') instanceof HTMLUnknownElement);\n\nlet templateId = 0;\n\nfunction nextId () {\n  return templateId++;\n}\n\nfunction slotName (element) {\n  return SLOT_SUPPORTED ? element.name : element.getAttribute('name');\n}\n\nfunction slotAppend (slot, node, root) {\n  if (!slot.__slotHasChildren) {\n    slot.__slotHasChildren = true;\n    slot.__slotFallbackContent = slot.innerHTML;\n    slot.innerHTML = '';\n  }\n\n  slot.appendChild(node);\n}\n\nfunction elementSlot (element) {\n  return SLOT_SUPPORTED ? element.slot : element.getAttribute('slot');\n}\n\nfunction fixTemplate (template) {\n  if (!template.content && window.HTMLTemplateElement && window.HTMLTemplateElement.decorate) {\n    window.HTMLTemplateElement.decorate(template);\n  }\n  return template;\n}\n\nfunction T (template, host, marker) {\n  this.__templateInitialize(template, host, marker);\n}\n\nT.prototype = {\n  get $ () {\n    return this.__templateHost.getElementsByTagName('*');\n  },\n\n  __templateInitialize (template, host, marker) {\n    this.__templateId = nextId();\n    this.__templateBindings = {};\n    this.__templateHost = host || (template ? template.parentElement : null);\n    this.__templateMarker = marker;\n\n    if (!template) {\n      return;\n    }\n\n    // do below only if template is exists\n    this.__template = fixTemplate(template);\n    this.__templateFragment = document.importNode(this.__template.content, true);\n    this.__templateChildNodes = [].slice.call(this.__templateFragment.childNodes);\n    this.__parseAnnotations();\n\n    if (marker) {\n      return;\n    }\n\n    if (this.__template.parentElement === this.__templateHost) {\n      // when template parent is template host, it means that template is specific template\n      // then use template as marker\n      this.__templateMarker = this.__template;\n    } else {\n      // when template is not child of host, put marker to host\n      this.__templateMarker = document.createComment(`marker-${this.__templateId}`);\n      this.__templateHost.appendChild(this.__templateMarker);\n    }\n  },\n\n  $$ (selector) {\n    return this.querySelector(selector);\n  },\n\n  render (content) {\n    if (!this.__template) {\n      return;\n    }\n\n    if (content) {\n      try {\n        [].forEach.call(this.__templateFragment.querySelectorAll('slot'), slot => {\n          let name = slotName(slot);\n          if (name) {\n            content.forEach(node => {\n              if (node.nodeType === Node.ELEMENT_NODE && name === elementSlot(node)) {\n                slotAppend(slot, node, this.__templateFragment);\n              }\n              // TODO query to childnodes looking for slot\n            });\n          } else {\n            content.forEach(node => {\n              slotAppend(slot, node, this.__templateFragment);\n            });\n          }\n        });\n      } catch (err) {\n        console.error(err.stack);\n        throw err;\n      }\n    }\n\n    this.__templateMarker.parentElement.insertBefore(this.__templateFragment, this.__templateMarker);\n  },\n\n  __templateUninitialize () {\n    this.__templateChildNodes.forEach(node => {\n      node.parentElement.removeChild(node);\n    });\n  },\n\n  all (obj) {\n    for (let i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        this.set(i, obj[i]);\n      }\n    }\n  },\n\n  __templateGetPathAsArray (path) {\n    if (!path) {\n      throw new Error(`Unknown path ${path} to set to ${this.is}`);\n    }\n\n    if (typeof path !== 'string') {\n      return path;\n    }\n\n    return path.split('.');\n  },\n\n  __templateGetPathAsString (path) {\n    if (typeof path === 'string') {\n      return path;\n    }\n\n    return path.join('.');\n  },\n\n  get (path) {\n    let object = this;\n\n    this.__templateGetPathAsArray(path).some(segment => {\n      if (object === undefined || object === null) {\n        object = undefined;\n        return true;\n      }\n\n      object = object[segment];\n      return false;\n    });\n\n    return object;\n  },\n\n  set (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    let oldValue = this.get(path);\n\n    if (value === oldValue) {\n      return;\n    }\n\n    let object = this;\n\n    path.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = path.slice(-1).pop();\n\n    object[property] = value;\n\n    this.notify(path, value);\n  },\n\n  notify (path, value) {\n    path = this.__templateGetPathAsString(path);\n\n    // console.log(this.__getId(), '<notify>', path, '?', value, `<${typeof value}>`);\n\n    try {\n      let binding = this.__templateGetBinding(path);\n      if (binding) {\n        binding.walkEffect(value);\n      }\n    } catch (err) {\n      console.warn(`#notify caught error: ${err.message}\\n Stack trace: ${err.stack}`);\n    }\n  },\n\n  __parseAnnotations () {\n    // this.__templateAnnotatedElements = [];\n\n    let len = this.__templateFragment.childNodes.length;\n    for (let i = 0; i < len; i++) {\n      let node = this.__templateFragment.childNodes[i];\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          this.__parseElementAnnotations(node);\n          break;\n        case Node.TEXT_NODE:\n          this.__parseTextAnnotations(node);\n          break;\n      }\n    }\n\n    Object.keys(this.__templateBindings).forEach(key => {\n      this.notify(key, this.get(key));\n    });\n  },\n\n  __parseEventAnnotations (element, attrName) {\n    // bind event annotation\n    let attrValue = element.getAttribute(attrName);\n    let eventName = attrName.slice(1, -1);\n    // let eventName = attrName.substr(3);\n    if (eventName === 'tap') {\n      eventName = 'click';\n    }\n\n    let context = this;\n    let expr = Expr.getFn(attrValue, [], true);\n\n    // console.log(this, element);\n    // TODO might be slow or memory leak setting event listener to inside element\n    element.addEventListener(eventName, function (evt) {\n      return expr.invoke(context, { evt });\n    }, true);\n  },\n\n  __parseAttributeAnnotations (element) {\n    // clone attributes to array first then foreach because we will remove\n    // attribute later if already processed\n    // this hack to make sure when attribute removed the attributes index doesnt shift.\n    return [].slice.call(element.attributes).reduce((annotated, attr) => {\n      let attrName = attr.name;\n\n      if (attrName.indexOf('(') === 0) {\n        this.__parseEventAnnotations(element, attrName);\n      } else {\n        // bind property annotation\n        annotated = this.__templateAnnotate(Expr.get(attr.value), Accessor.get(element, attrName)) || annotated;\n      }\n\n      return annotated;\n    }, false);\n  },\n\n  __parseElementAnnotations (element) {\n    let annotated = false;\n    let scoped = element.__templateModel;\n\n    if (scoped) {\n      return annotated;\n    }\n\n    // element.classList.add(`${this.__templateHost.is || 'template'}__scope`);\n    element.__templateModel = this;\n\n    if (element.attributes && element.attributes.length) {\n      annotated = this.__parseAttributeAnnotations(element) || annotated;\n    }\n\n    if (element.childNodes && element.childNodes.length) {\n      let childNodes = [].slice.call(element.childNodes);\n      let childNodesLength = childNodes.length;\n\n      for (let i = 0; i < childNodesLength; i++) {\n        annotated = this.__parseNodeAnnotations(childNodes[i]) || annotated;\n      }\n    }\n\n    [].forEach.call(element.getElementsByTagName('slot'), slot => {\n      [].forEach.call(slot.childNodes, node => {\n        annotated = this.__parseNodeAnnotations(node) || annotated;\n      });\n    });\n\n    return annotated;\n  },\n\n  __parseNodeAnnotations (node) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        return this.__parseTextAnnotations(node);\n      case Node.ELEMENT_NODE:\n        return this.__parseElementAnnotations(node);\n    }\n  },\n\n  __parseTextAnnotations (node) {\n    let expr = Expr.get(node.textContent);\n\n    let accessor;\n    if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n      accessor = Accessor.get(node.parentElement, 'value');\n    } else {\n      accessor = Accessor.get(node);\n    }\n\n    return this.__templateAnnotate(expr, accessor);\n  },\n\n  __templateAnnotate (expr, accessor) {\n    if (expr.type === 's') {\n      return false;\n    }\n\n    // annotate every paths\n    let annotation = new Annotation(this, expr, accessor);\n\n    expr.annotatedPaths.forEach(arg => this.__templateGetBinding(arg.name).annotations.push(annotation));\n\n    return true;\n  },\n\n  __templateGetBinding (path) {\n    let segments = path.split('.');\n    let bindings;\n    let binding;\n\n    for (let i = 0; i < segments.length; i++) {\n      let segment = segments[i];\n\n      bindings = binding ? binding.paths : this.__templateBindings;\n\n      if (!bindings[segment]) {\n        bindings[segment] = new Binding(this, segment);\n      }\n\n      binding = bindings[segment];\n    }\n\n    return binding;\n  },\n};\n\nif (typeof window === 'object') {\n  window.T = T;\n}\n\nmodule.exports = T;\nmodule.exports.Filter = Filter;\nmodule.exports.Accessor = Accessor;\nmodule.exports.Expr = Expr;\nmodule.exports.Token = Token;\nmodule.exports.Serializer = Serializer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","const Token = require('./token');\nconst Filter = require('./filter');\n\nclass Expr {\n  constructor (value, mode, type) {\n    // define base properties\n    this.mode = mode;\n    this.type = type;\n    this.name = '';\n    this.args = [];\n    this.filters = [];\n    this.value = value;\n    // this.unwrapped = Boolean(unwrapped);\n\n    // TODO support expr with function or others\n    // let valType = typeof value;\n    // if (valType === 'function') {\n    //   this.type = 'm';\n    //   return;\n    // } else if (valType !== 'string') {\n    //   // validate args\n    //   return;\n    // }\n\n    // cleanse value\n    // value = value.trim();\n\n    if (type === 's') {\n      return;\n    }\n\n    let tokens = value.split('|');\n    let token = tokens[0].trim();\n\n    this.filters = tokens.slice(1).map(word => {\n      return Filter.get(word.trim());\n    });\n\n    // if (!this.unwrapped) {\n    //   if (value[0] !== '[' && value[0] !== '{') {\n    //     return;\n    //   }\n    //   token = value.slice(2, -2).trim();\n    //   this.mode = value[0];\n    // }\n\n    if (token.indexOf('(') < 0) {\n      this.type = 'p';\n      this.name = token;\n      this.args.push(new Token(token));\n    } else {\n      // force mode to '[' when type is !p\n      this.mode = '[';\n      this.type = 'm';\n\n      let matches = token.match(/([^(]+)\\(([^)]*)\\)/);\n\n      this.name = matches[1].trim();\n\n      this.args = tokenize(matches[2]);\n    }\n  }\n\n  get annotatedPaths () {\n    if (!this._annotatedPaths) {\n      let annotatedPaths = [];\n      this.args.forEach(arg => {\n        if (arg.type === 'v' && annotatedPaths.indexOf(arg.name) === -1) {\n          annotatedPaths.push(arg);\n        }\n      });\n      this._annotatedPaths = annotatedPaths;\n    }\n\n    return this._annotatedPaths;\n  }\n\n  invoke (context, otherArgs) {\n    if (this.type === 'p') {\n      let val = typeof context.get === 'function' ? context.get(this.name) : context[this.name];\n      return this.filters.reduce((val, filter) => filter.invoke(val), val);\n    }\n\n    let fn = context.__templateHost[this.name];\n    if (typeof fn !== 'function') {\n      throw new Error(`Method is not eligible, ${context.__templateHost.nodeName || '$anonymous'}#${this.name}`);\n    }\n\n    let args = this.args.map(arg => {\n      return arg.value(context, otherArgs);\n    });\n\n    return fn.apply(context, args);\n  }\n}\n\nExpr.CACHE = {\n  '[s': new Expr('', '[', 's'),\n};\n\nfunction _get (value, mode, type) {\n  let key = value + mode + type;\n  let expr = Expr.CACHE[key];\n\n  if (!expr) {\n    expr = new Expr(value, mode, type);\n    if (type !== 's') {\n      Expr.CACHE[key] = expr;\n    }\n  }\n\n  return expr;\n}\n\nfunction get (value, unwrapped) {\n  value = (value || '').trim();\n\n  if (unwrapped) {\n    return _get(value, '[', 'v');\n  }\n\n  let mode = value[0];\n  if (mode === '[' || mode === '{') {\n    value = value.slice(2, -2).trim();\n    return _get(value, mode, 'v');\n  }\n\n  return _get(value, '[', 's');\n}\n\nfunction getFn (value, args, unwrapped) {\n  // if (typeof value === 'function') {\n  //   return get(value, unwrapped);\n  // }\n  return get(value.indexOf('(') === -1 ? (value + '(' + args.join(', ') + ')') : value, unwrapped);\n}\n\nfunction rawTokenize (str) {\n  let count = 0;\n  let tokens = [];\n\n  while (str && count++ < 10) {\n    let matches = str.match(/^\\s*(\"[^\"]*\"|[^,]+),?/);\n\n    str = str.substr(matches[0].length);\n    tokens.push(matches[1].trim());\n  }\n\n  return tokens;\n}\n\nfunction tokenize (str) {\n  return rawTokenize(str).map(token => new Token(token));\n}\n\nmodule.exports = Expr;\nmodule.exports.getFn = getFn;\nmodule.exports.get = get;\nmodule.exports.rawTokenize = rawTokenize;\nmodule.exports.tokenize = tokenize;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expr.js\n **/","const GLOBAL = global || window;\n\nclass Token {\n  constructor (name) {\n    this.name = name;\n    try {\n      let value = JSON.parse(this.name);\n      this.type = 's';\n      this._value = value;\n    } catch (err) {\n      this.type = 'v';\n      this._value = null;\n    }\n  }\n\n  value (context, others) {\n    context = context || GLOBAL;\n\n    if (this.type === 's') {\n      return this._value;\n    }\n\n    if (context) {\n      let val = context.get ? context.get(this.name) : context[this.name];\n      if (typeof val !== 'undefined') {\n        return val;\n      }\n    }\n\n    if (others) {\n      let val = others.get ? others.get(this.name) : others[this.name];\n      if (typeof val !== 'undefined') {\n        return val;\n      }\n    }\n\n    return;\n  }\n}\n\nfunction get (name) {\n  // FIXME implement cache\n  return new Token(name);\n}\n\nmodule.exports = Token;\nmodule.exports.get = get;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/token.js\n **/","class Filter {\n  constructor (name, callback, otherArgs) {\n    this.name = name;\n    this.callback = callback;\n    this.otherArgs = otherArgs;\n  }\n\n  invoke (val) {\n    let args = [val];\n    [].push.apply(args, this.otherArgs);\n    return this.callback.apply(null, args);\n  }\n\n  static put (name, callback) {\n    registry[name] = callback;\n  }\n\n  static get (name) {\n    let segments = name.split(':');\n    let args = segments.splice(1);\n    let key = segments.pop();\n    return new Filter(key, registry[key], args);\n  }\n}\n\nconst registry = {\n  required: (val) => {\n    if (val === undefined || val === null || val === '') {\n      throw new Error('Value is required');\n    }\n    return val;\n  },\n  upper: (val) => String.prototype.toUpperCase.call(val || ''),\n  lower: (val) => String.prototype.toLowerCase.call(val || ''),\n  not: (val) => !val,\n  slice: (val, begin, end) => Array.prototype.slice.call(val || [], begin, end),\n};\n\nmodule.exports = Filter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/filter.js\n **/","class Binding {\n  constructor (context, model) {\n    this.context = context;\n    this.model = model;\n    this.paths = {};\n    this.annotations = [];\n  }\n\n  walkEffect (value) {\n    this.annotations.forEach(annotation => {\n      try {\n        annotation.effect(value, this.model);\n      } catch (err) {\n        console.error(`Error caught while walk effect annotation: ${annotation.expr ? annotation.expr.value : '#unknown'}\\n ${err.stack}`);\n      }\n    });\n\n    Object.keys(this.paths).forEach(i => {\n      this.paths[i].walkEffect(value ? value[i] : undefined);\n    });\n  }\n}\n\nmodule.exports = Binding;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/binding.js\n **/","/* globals Node */\n\nclass BaseAccessor {\n  constructor (node, name) {\n    this.node = node;\n    this.name = name;\n  }\n\n  set (value) {\n    if (typeof this.node.set === 'function') {\n      this.node.set(this.name, value);\n    } else {\n      this.node[this.name] = value;\n    }\n  }\n\n  get () {\n    if (typeof this.node.get === 'function') {\n      return this.node.get(this.name);\n    } else {\n      return this.node[this.name];\n    }\n  }\n}\n\nclass TextAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'textContent');\n  }\n\n  set (value) {\n    this.node.textContent = typeof value === 'undefined' ? '' : value;\n  }\n}\n\nclass ClassAccessor extends BaseAccessor {\n  set (value) {\n    if (value) {\n      this.node.classList.add(this.name);\n    } else {\n      this.node.classList.remove(this.name);\n    }\n  }\n\n  get () {\n    throw new Error('Unimplemented');\n  }\n}\n\nclass StyleAccessor extends BaseAccessor {\n  set (value) {\n    this.node.style[this.name] = value || '';\n  }\n\n  get () {\n    throw new Error('Unimplemented');\n  }\n}\n\nclass HTMLAccessor extends BaseAccessor {\n  set (value) {\n    this.node.innerHTML = typeof value === 'undefined' ? '' : value;\n  }\n\n  get () {\n    return this.node.innerHTML;\n  }\n}\n\nclass ValueAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'value');\n  }\n\n  set (value) {\n    var selectable = document.activeElement === this.node;\n    if (!selectable) {\n      super.set(typeof value === 'undefined' ? '' : value);\n    }\n    //  &&\n    //   this.node.nodeName === 'INPUT' && (\n    //       this.node.type !== 'email' &&\n    //       this.node.type !== 'range' &&\n    //       this.node.type !== 'checkbox'\n    //       );\n    //\n    // var selStart;\n    // var selEnd;\n    // if (selectable) {\n    //   selStart = this.node.selectionStart;\n    //   selEnd = this.node.selectionEnd;\n    // }\n    //\n    // this.node[this.name] = value === undefined ? '' : value;\n    //\n    // if (selectable) {\n    //   this.node.setSelectionRange(selStart, selEnd);\n    //\n    //   // does not work well with below\n    //   // this.context.selectionStart = selStart;\n    //   // this.context.selectionEnd = selStart;\n    // }\n    // super.set(typeof value === 'undefined' ? '' : value);\n  }\n}\n\nclass AttributeAccessor extends BaseAccessor {\n  constructor (node, name) {\n    super(node, name.slice(0, -1));\n  }\n\n  set (value) {\n    if (value) {\n      this.node.setAttribute(this.name, value);\n    } else {\n      this.node.removeAttribute(this.name);\n    }\n  }\n\n  get () {\n    return this.node.getAttribute(this.name);\n  }\n}\n\nfunction get (node, name) {\n  if (node && 'nodeType' in node) {\n    switch (node.nodeType) {\n      case Node.ELEMENT_NODE:\n        if (name.endsWith('$')) {\n          return new AttributeAccessor(node, name);\n        } else if (name === 'text') {\n          return new TextAccessor(node);\n        } else if (name === 'html') {\n          return new HTMLAccessor(node, name);\n        } else if (name === 'value' && node.nodeName === 'INPUT') {\n          return new ValueAccessor(node);\n        }\n\n        if (name.startsWith('class.')) {\n          return new ClassAccessor(node, name.split('.').splice(1).join('.'));\n        } else if (name.startsWith('style.')) {\n          return new StyleAccessor(node, name.split('.').splice(1).join('.'));\n        }\n\n        return new BaseAccessor(node, name);\n      case Node.TEXT_NODE:\n        if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n          return new ValueAccessor(node.parentElement);\n        }\n\n        return new TextAccessor(node);\n      default:\n        throw new Error(`Unimplemented resolving accessor for nodeType: ${node.nodeType}`);\n    }\n  } else {\n    return new BaseAccessor(node, name);\n  }\n}\n\nmodule.exports = BaseAccessor;\nmodule.exports.get = get;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/accessor.js\n **/","class Annotation {\n  constructor (model, expr, accessor) {\n    this.model = model;\n    this.expr = expr;\n    this.accessor = accessor;\n  }\n\n  effect (value) {\n    if (this.accessor) {\n      let value = this.expr.invoke(this.model);\n      // FIXME implement composite annotation\n      // FIXME implement filtered annotation\n      // FIXME implement function type annotation\n      this.accessor.set(value);\n    } else {\n      this.expr.invoke(this.model);\n    }\n  }\n}\n\nmodule.exports = Annotation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/annotation.js\n **/","function serialize (value) {\n  switch (typeof value) {\n    case 'boolean':\n      return value ? '' : undefined;\n\n    case 'object':\n      if (value instanceof Date) {\n        return value;\n      } else if (value) {\n        try {\n          return JSON.stringify(value);\n        } catch (err) {\n          return '';\n        }\n      }\n      break;\n    default:\n      // noop\n  }\n  return value === null ? undefined : value;\n}\n\nfunction deserialize (value, type) {\n  switch (type) {\n    case Number:\n      value = Number(value);\n      break;\n\n    case Boolean:\n      value = Boolean(value === '' || value === 'true' || value === '1' || value === 'on');\n      break;\n\n    case Object:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // allow non-JSON literals like Strings and Numbers\n        // console.warn('Failed decode json: \"' + value + '\" to Object');\n      }\n      break;\n\n    case Array:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // .console.warn('Failed decode json: \"' + value + '\" to Array');\n        value = null;\n      }\n      break;\n\n    case Date:\n      console.log('>>>', value);\n      value = new Date(value);\n      break;\n\n    // behave like default for now\n    // case String:\n    default:\n      break;\n  }\n  return value;\n}\n\nmodule.exports.serialize = serialize;\nmodule.exports.deserialize = deserialize;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/serializer.js\n **/"],"sourceRoot":""}