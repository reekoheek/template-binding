{"version":3,"sources":["webpack:///webpack/bootstrap a39e808619d9c80d2bf7","webpack:///./src/filter.js","webpack:///./src/token.js","webpack:///./src/accessor.js","webpack:///./src/annotation.js","webpack:///./src/binding.js","webpack:///./src/css.js","webpack:///./src/event.js","webpack:///./src/expr.js","webpack:///./src/serializer.js","webpack:///./src/index.js"],"names":["Filter","name","callback","otherArgs","val","args","push","apply","registry","segments","split","splice","key","pop","required","undefined","Error","upper","String","prototype","toUpperCase","call","lower","toLowerCase","not","slice","begin","end","Array","CACHE","Map","Token","has","get","token","set","_value","type","match","JSON","parse","err","context","others","window","valueOf","BaseAccessor","node","nodeType","Node","ELEMENT_NODE","endsWith","AttributeAccessor","TextAccessor","HTMLAccessor","nodeName","ValueAccessor","startsWith","ClassAccessor","join","StyleAccessor","TEXT_NODE","parentElement","value","textContent","classList","add","remove","style","innerHTML","document","activeElement","setAttribute","removeAttribute","getAttribute","Annotation","model","expr","accessor","invoke","Binding","paths","annotations","forEach","annotation","effect","Object","keys","i","walkEffect","camelize","str","replace","charAt","setters","setter","fn","element","Css","k","_matcher","_level","_id","_handlers","_delegatorInstances","_addEvent","delegator","useCapture","addEventListener","_cancel","e","preventDefault","stopPropagation","_getMatcher","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","EventDelegator","matchesSelector","_matchesSelector","selector","boundElement","parentNode","_addHandler","event","id","_removeHandler","hasOwnProperty","length","_handleEvent","target","srcElement","j","matchesEvent","cancelBubble","cancel","nextId","aliases","aliasesDefaultTranslator","aliasesTranslators","transitionend","el","createElement","transitions","t","_aliases","theAliases","translator","_bind","events","HTMLElement","hasAttribute","_getGlobalCallback","alias","addEvent","on","off","once","proxyCallback","fire","detail","options","evt","bubbles","cancelable","Boolean","Event","CustomEvent","dispatchEvent","_get","mode","cache","Expr","unwrapped","trim","indexOf","count","tokens","substr","rawTokenize","map","filters","word","tokenize","reduce","filter","__templateHost","arg","vpaths","_vpaths","serialize","Date","RegExp","toString","stringify","deserialize","Number","Function","templateId","SLOT_SUPPORTED","HTMLUnknownElement","slotName","fixTemplate","template","content","HTMLTemplateElement","decorate","T","host","marker","__templateInitialize","__templateRender","$","getElementsByTagName","$$","querySelector","arguments","all","obj","path","object","__templateGetPathAsArray","some","segment","oldValue","property","notify","values","result","__templateGetPathAsString","__templateReady","__templateNotifyOnReady","binding","__templateGetBinding","__templateId","__templateBindings","__templateMarker","__template","__templateChildNodes","__templateFragment","importNode","__parseAnnotations","createComment","appendChild","contentFragment","fragment","DocumentFragment","querySelectorAll","slot","parent","insertBefore","removeChild","__templateUninitialize","childNodes","len","__parseElementAnnotations","__parseTextAnnotations","__parseEventAnnotations","attrName","attrValue","eventName","getFn","__parseAttributeAnnotations","annotated","attributes","attr","__templateAnnotate","scoped","__templateModel","childNodesLength","__parseNodeAnnotations","constant","bindings","Accessor"],"mappings":"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","file":"t.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a39e808619d9c80d2bf7","class Filter {\n  constructor (name, callback, otherArgs) {\n    this.name = name;\n    this.callback = callback;\n    this.otherArgs = otherArgs;\n  }\n\n  invoke (val) {\n    let args = [val];\n    [].push.apply(args, this.otherArgs);\n    return this.callback.apply(null, args);\n  }\n\n  static put (name, callback) {\n    registry[name] = callback;\n  }\n\n  static get (name) {\n    let segments = name.split(':');\n    let args = segments.splice(1);\n    let key = segments.pop();\n    return new Filter(key, registry[key], args);\n  }\n}\n\nconst registry = {\n  required: (val) => {\n    if (val === undefined || val === null || val === '') {\n      throw new Error('Value is required');\n    }\n    return val;\n  },\n  upper: (val) => String.prototype.toUpperCase.call(val || ''),\n  lower: (val) => String.prototype.toLowerCase.call(val || ''),\n  not: (val) => !val,\n  slice: (val, begin, end) => Array.prototype.slice.call(val || [], begin, end),\n};\n\nexport default Filter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/filter.js","const CACHE = new Map();\n\nclass Token {\n  static get CACHE () {\n    return CACHE;\n  }\n\n  static get (name) {\n    if (CACHE.has(name)) {\n      return CACHE.get(name);\n    }\n\n    let token = new Token(name);\n    CACHE.set(name, token);\n    return token;\n  }\n\n  constructor (name) {\n    this.name = name;\n    this._value = null;\n    this.type = 'v';\n\n    if (!this.name.match(/^[a-zA-Z_]/)) {\n      try {\n        this._value = JSON.parse(this.name);\n        this.type = 's';\n      } catch (err) {\n      }\n    }\n  }\n\n  value (context, others) {\n    context = context || window;\n\n    if (this.type === 's') {\n      return this._value;\n    }\n\n    let val = valueOf(context, this.name);\n    if (typeof val !== 'undefined') {\n      return val;\n    }\n\n    val = valueOf(others, this.name);\n    if (typeof val !== 'undefined') {\n      return val;\n    }\n\n    return;\n  }\n}\n\nfunction valueOf (context, key) {\n  if (context) {\n    return typeof context.get === 'function' ? context.get(key) : context[key];\n  }\n}\n\nexport default Token;\n\n\n\n// WEBPACK FOOTER //\n// ./src/token.js","class BaseAccessor {\n  static get (node, name) {\n    if (node && 'nodeType' in node) {\n      switch (node.nodeType) {\n        case window.Node.ELEMENT_NODE:\n          if (name.endsWith('$')) {\n            return new AttributeAccessor(node, name);\n          } else if (name === 'text') {\n            return new TextAccessor(node);\n          } else if (name === 'html') {\n            return new HTMLAccessor(node, name);\n          } else if (name === 'value' && node.nodeName === 'INPUT') {\n            return new ValueAccessor(node);\n          }\n\n          if (name.startsWith('class.')) {\n            return new ClassAccessor(node, name.split('.').splice(1).join('.'));\n          } else if (name.startsWith('style.')) {\n            return new StyleAccessor(node, name.split('.').splice(1).join('.'));\n          }\n\n          return new BaseAccessor(node, name);\n        case window.Node.TEXT_NODE:\n          if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n            return new ValueAccessor(node.parentElement);\n          }\n\n          return new TextAccessor(node);\n        default:\n          throw new Error(`Unimplemented resolving accessor for nodeType: ${node.nodeType}`);\n      }\n    } else {\n      return new BaseAccessor(node, name);\n    }\n  }\n\n  constructor (node, name) {\n    this.node = node;\n    this.name = name;\n  }\n\n  set (value) {\n    if (typeof this.node.set === 'function') {\n      this.node.set(this.name, value);\n    } else {\n      this.node[this.name] = value;\n    }\n  }\n\n  get () {\n    if (typeof this.node.get === 'function') {\n      return this.node.get(this.name);\n    } else {\n      return this.node[this.name];\n    }\n  }\n}\n\nclass TextAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'textContent');\n  }\n\n  set (value) {\n    this.node.textContent = typeof value === 'undefined' ? '' : value;\n  }\n}\n\nclass ClassAccessor extends BaseAccessor {\n  set (value) {\n    if (value) {\n      this.node.classList.add(this.name);\n    } else {\n      this.node.classList.remove(this.name);\n    }\n  }\n\n  get () {\n    throw new Error('Unimplemented');\n  }\n}\n\nclass StyleAccessor extends BaseAccessor {\n  set (value) {\n    this.node.style[this.name] = value || '';\n  }\n\n  get () {\n    throw new Error('Unimplemented');\n  }\n}\n\nclass HTMLAccessor extends BaseAccessor {\n  set (value) {\n    this.node.innerHTML = typeof value === 'undefined' ? '' : value;\n  }\n\n  get () {\n    return this.node.innerHTML;\n  }\n}\n\nclass ValueAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'value');\n  }\n\n  set (value) {\n    if (document.activeElement !== this.node) {\n      super.set(typeof value === 'undefined' ? '' : value);\n    }\n  }\n}\n\nclass AttributeAccessor extends BaseAccessor {\n  constructor (node, name) {\n    super(node, name.slice(0, -1));\n  }\n\n  set (value) {\n    if (value) {\n      this.node.setAttribute(this.name, value);\n    } else {\n      this.node.removeAttribute(this.name);\n    }\n  }\n\n  get () {\n    return this.node.getAttribute(this.name);\n  }\n}\n\nexport default BaseAccessor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/accessor.js","class Annotation {\n  constructor (model, expr, accessor) {\n    this.model = model;\n    this.expr = expr;\n    this.accessor = accessor;\n  }\n\n  effect (value) {\n    if (this.accessor) {\n      // FIXME implement composite annotation\n      this.accessor.set(this.expr.invoke(this.model));\n    } else {\n      this.expr.invoke(this.model);\n    }\n  }\n}\n\nexport default Annotation;\n\n\n\n// WEBPACK FOOTER //\n// ./src/annotation.js","class Binding {\n  constructor (context, model) {\n    this.context = context;\n    this.model = model;\n    this.paths = {};\n    this.annotations = [];\n  }\n\n  walkEffect (value) {\n    this.annotations.forEach(annotation => {\n      // try {\n      annotation.effect(value/* , this.model */);\n      // } catch (err) {\n      //   console.error(`Error caught while walk effect annotation: ${annotation.expr ? annotation.expr.value : '#unknown'}\\n ${err.stack}`);\n      // }\n    });\n\n    Object.keys(this.paths).forEach(i => {\n      this.paths[i].walkEffect(value ? value[i] : undefined);\n    });\n  }\n}\n\nexport default Binding;\n\n\n\n// WEBPACK FOOTER //\n// ./src/binding.js","function camelize (str) {\n  return str.replace(/-\\D/g, match => match.charAt(1).toUpperCase());\n}\n\n// function hyphenate (str) {\n//   return str.replace(/[A-Z]/g, match => '-' + match.toLowerCase());\n// }\n\nconst setters = {\n\n};\n\nfunction setter (key) {\n  if ('key' in setters) {\n    return setters[key];\n  }\n\n  let fn = setters[key] = (element, value) => {\n    element.style[camelize(key)] = value;\n  };\n  return fn;\n}\n\nfunction set (element, key, value) {\n  setter(key)(element, value);\n}\n\nfunction Css (element) {\n  if (this instanceof Css === false) {\n    return new Css(element);\n  }\n\n  this.element = element;\n}\n\nCss.prototype.set = function (key, value) {\n  if (typeof key === 'string') {\n    set(this.element, key, value);\n  } else {\n    for (let k in key) {\n      set(this.element, k, key[k]);\n    }\n  }\n\n  return this;\n};\n\nexport default Css;\n\n// -webkit-backface-visibility: hidden;\n// backface-visibility: hidden;\n// will-change: transform, -webkit-transform;\n// -webkit-transition: -webkit-transform 3s;\n// transition: transform 3s;\n// this.element.style.webkitTransform = 'translateX(100%)';\n// this.element.style.transform = 'translateX(100%)';\n\n\n\n// WEBPACK FOOTER //\n// ./src/css.js","let _matcher;\nlet _level = 0;\nlet _id = 0;\nlet _handlers = {};\nlet _delegatorInstances = {};\n\nfunction _addEvent (delegator, type, callback) {\n    // blur and focus do not bubble up but if you use event capturing\n    // then you will get them\n  let useCapture = type === 'blur' || type === 'focus';\n  delegator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel (e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n/**\n * returns function to use for determining if an element\n * matches a query selector\n *\n * @returns {Function}\n */\nfunction _getMatcher (element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n    // if it doesn't match a native browser method\n    // fall back to the delegator function\n  _matcher = EventDelegator.matchesSelector;\n  return _matcher;\n}\n\n/**\n * determines if the specified element matches a given selector\n *\n * @param {Node} element - the element to compare against the selector\n * @param {string} selector\n * @param {Node} boundElement - the element the listener was attached to\n * @returns {void|Node}\n */\nfunction _matchesSelector (element, selector, boundElement) {\n    // no selector means this event was bound directly to this element\n  if (selector === '_root') {\n    return boundElement;\n  }\n\n    // if we have moved up to the element you bound the event to\n    // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n    // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n    // if this element did not match but has a parent we should try\n    // going up the tree to see if any of the parent elements match\n    // for example if you are looking for a click on an <a> tag but there\n    // is a <span> inside of the a tag that it is the target,\n    // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler (delegator, event, selector, callback) {\n  if (!_handlers[delegator.id]) {\n    _handlers[delegator.id] = {};\n  }\n\n  if (!_handlers[delegator.id][event]) {\n    _handlers[delegator.id][event] = {};\n  }\n\n  if (!_handlers[delegator.id][event][selector]) {\n    _handlers[delegator.id][event][selector] = [];\n  }\n\n  _handlers[delegator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler (delegator, event, selector, callback) {\n    // if there are no events tied to this element at all\n    // then don't do anything\n  if (!_handlers[delegator.id]) {\n    return;\n  }\n\n    // if there is no event type specified then remove all events\n    // example: EventDelegator(element).off()\n  if (!event) {\n    for (let type in _handlers[delegator.id]) {\n      if (_handlers[delegator.id].hasOwnProperty(type)) {\n        _handlers[delegator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n    // if no callback or selector is specified remove all events of this type\n    // example: EventDelegator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[delegator.id][event] = {};\n    return;\n  }\n\n    // if a selector is specified but no callback remove all events\n    // for this selector\n    // example: EventDelegator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[delegator.id][event][selector];\n    return;\n  }\n\n    // if we have specified an event type, selector, and callback then we\n    // need to make sure there are callbacks tied to this selector to\n    // begin with.  if there aren't then we can stop here\n  if (!_handlers[delegator.id][event][selector]) {\n    return;\n  }\n\n    // if there are then loop through all the callbacks and if we find\n    // one that matches remove it from the array\n  for (let i = 0; i < _handlers[delegator.id][event][selector].length; i++) {\n    if (_handlers[delegator.id][event][selector][i] === callback) {\n      _handlers[delegator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent (id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  let target = e.target || e.srcElement;\n  let selector;\n  let match;\n  let matches = {};\n  let i = 0;\n  let j = 0;\n\n    // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _delegatorInstances[id].element);\n\n      if (match && EventDelegator.matchesEvent(type, _delegatorInstances[id].element, match, selector === '_root', e)) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n    // stopPropagation() fails to set cancelBubble to true in Webkit\n    // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function () {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          EventDelegator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\nlet id = 0;\nfunction nextId () {\n  return id++;\n}\n\nconst aliases = new Map();\nconst aliasesDefaultTranslator = name => ([ name ]);\nconst aliasesTranslators = {\n  transitionend (name) {\n    let el = document.createElement('fakeelement');\n    let transitions = {\n      'OTransition': 'oTransitionEnd',\n      'MozTransition': 'transitionend',\n      'WebkitTransition': 'webkitTransitionEnd',\n      'transition': 'transitionend',\n    };\n\n    for (let t in transitions) {\n      if (el.style[t] !== undefined) {\n        return [transitions[t]];\n      }\n    }\n  },\n};\n\nfunction _aliases (name) {\n  let theAliases;\n  if (aliases.has(name)) {\n    theAliases = aliases.get(name);\n  } else {\n    let translator = aliasesTranslators[name] || aliasesDefaultTranslator;\n    theAliases = translator(name);\n    aliases.set(name, theAliases);\n  }\n\n  return theAliases;\n}\n\n/**\n * binds the specified events to the element\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @param {boolean=} remove\n * @returns {Object}\n */\nfunction _bind (events, selector, callback, remove) {\n    // fail silently if you pass null or undefined as an alement\n    // in the EventDelegator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof (selector) === 'function') {\n    callback = selector;\n    selector = '_root';\n  }\n\n  if (selector instanceof window.HTMLElement) {\n    let id;\n    if (selector.hasAttribute('bind-event-id')) {\n      id = selector.getAttribute('bind-event-id');\n    } else {\n      id = nextId();\n      selector.setAttribute('bind-event-id', id);\n    }\n    selector = `[bind-event-id=\"${id}\"]`;\n  }\n\n  let id = this.id;\n  let i;\n\n  function _getGlobalCallback (type) {\n    return function (e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    _aliases(events[i]).forEach(alias => {\n      // console.info('> ' + events[i] + ':' + alias);\n      if (remove) {\n        _removeHandler(this, alias, selector, callback);\n        return;\n      }\n\n      if (!_handlers[id] || !_handlers[id][alias]) {\n        EventDelegator.addEvent(this, alias, _getGlobalCallback(alias));\n      }\n\n      _addHandler(this, alias, selector, callback);\n    });\n  }\n\n  return this;\n}\n\n/**\n * EventDelegator object constructor\n *\n * @param {Node} element\n */\nfunction EventDelegator (element, id) {\n    // called as function\n  if (!(this instanceof EventDelegator)) {\n        // only keep one EventDelegator instance per node to make sure that\n        // we don't create a ton of new objects if you want to delegate\n        // multiple events from the same node\n        //\n        // for example: EventDelegator(document).on(...\n    for (let key in _delegatorInstances) {\n      if (_delegatorInstances[key].element === element) {\n        return _delegatorInstances[key];\n      }\n    }\n\n    _id++;\n    _delegatorInstances[_id] = new EventDelegator(element, _id);\n\n    return _delegatorInstances[_id];\n  }\n\n  this.element = element;\n  this.id = id;\n}\n\n/**\n * adds an event\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @returns {Object}\n */\nEventDelegator.prototype.on = function (events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n * removes an event\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @returns {Object}\n */\nEventDelegator.prototype.off = function (events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nEventDelegator.prototype.once = function (events, selector, callback) {\n  if (!callback && typeof (selector) === 'function') {\n    callback = selector;\n    selector = '_root';\n  }\n\n  const proxyCallback = (...args) => {\n    this.off(events, selector, proxyCallback);\n    return callback(...args);\n  };\n\n  return this.on(events, selector, proxyCallback);\n};\n\nEventDelegator.prototype.fire = function (type, detail, options) {\n  options = options || {};\n  detail = detail || {};\n\n  let evt;\n  let bubbles = options.bubbles === undefined ? true : options.bubbles;\n  let cancelable = Boolean(options.cancelable);\n\n  switch (type) {\n    case 'click':\n      evt = new window.Event(type, {\n        bubbles: bubbles,\n        cancelable: cancelable,\n      });\n\n      // TODO check if without this works on every browsers\n      // evt = document.createEvent('HTMLEvents');\n      // evt.initEvent(type, true, false);\n      break;\n    default:\n      evt = new window.CustomEvent(type, {\n        bubbles: Boolean(bubbles),\n        cancelable: cancelable,\n        detail: detail,\n      });\n      break;\n  }\n\n  this.element.dispatchEvent(evt);\n\n  return evt;\n};\n\nEventDelegator.matchesSelector = function () {};\nEventDelegator.cancel = _cancel;\nEventDelegator.addEvent = _addEvent;\nEventDelegator.aliases = _aliases;\nEventDelegator.matchesEvent = function () {\n  return true;\n};\n\nexport default EventDelegator;\n\n\n\n// WEBPACK FOOTER //\n// ./src/event.js","import Token from './token';\nimport Filter from './filter';\n\nconst CACHE = {\n  's': {\n    '[': new Map(),\n    '{': new Map(),\n  },\n  'v': {\n    '[': new Map(),\n    '{': new Map(),\n  },\n};\n\nfunction _get (value, mode, type) {\n  let cache = CACHE[type][mode];\n  if (cache.has(value)) {\n    return cache.get(value);\n  }\n\n  let expr = new Expr(value, mode, type);\n  if (type !== 's') {\n    cache.set(value, expr);\n  }\n\n  return expr;\n}\n\nclass Expr {\n  static get CACHE () {\n    return CACHE;\n  }\n\n  static get (value, unwrapped) {\n    value = (value || '').trim();\n\n    if (unwrapped) {\n      return _get(value, '[', 'v');\n    }\n\n    let mode = value[0];\n    if ((mode === '[' || mode === '{') && value[1] === mode) {\n      value = value.slice(2, -2).trim();\n      return _get(value, mode, 'v');\n    }\n\n    return _get(value, '[', 's');\n  }\n\n  static getFn (value, args, unwrapped) {\n    return Expr.get(value.indexOf('(') === -1 ? `${value}(${args.join(', ')})` : value, unwrapped);\n  }\n\n  static rawTokenize (str) {\n    let count = 0;\n    let tokens = [];\n\n    while (str && count++ < 10) {\n      let matches = str.match(/^\\s*(\"[^\"]*\"|[^,]+),?/);\n\n      str = str.substr(matches[0].length);\n      tokens.push(matches[1].trim());\n    }\n\n    return tokens;\n  }\n\n  static tokenize (str) {\n    return Expr.rawTokenize(str).map(token => Token.get(token));\n  }\n\n  constructor (value, mode, type) {\n    // define base properties\n    this.mode = mode;\n    this.type = type;\n    this.name = '';\n    this.args = [];\n    this.filters = [];\n    this.value = value;\n\n    if (type === 's') {\n      return;\n    }\n\n    let tokens = value.split('|');\n    let token = tokens[0].trim();\n\n    this.filters = tokens.slice(1).map(word => {\n      return Filter.get(word.trim());\n    });\n\n    if (token.indexOf('(') < 0) {\n      this.type = 'p';\n      this.name = token;\n      this.args.push(Token.get(token));\n    } else {\n      // force mode to '[' when type is !p\n      this.mode = '[';\n      this.type = 'm';\n\n      let matches = token.match(/([^(]+)\\(([^)]*)\\)/);\n\n      this.name = matches[1].trim();\n      this.fn = Token.get(this.name);\n\n      this.args = Expr.tokenize(matches[2]);\n    }\n  }\n\n  get constant () {\n    return this.type !== 'm' && this.vpaths.length !== this.args.length;\n  }\n\n  get vpaths () {\n    if (!this._vpaths) {\n      let paths = [];\n      this.args.forEach(arg => {\n        if (arg.type === 'v' && paths.indexOf(arg.name) === -1) {\n          paths.push(arg);\n        }\n      });\n      this._vpaths = paths;\n    }\n\n    return this._vpaths;\n  }\n\n  invoke (context, otherArgs) {\n    if (this.type === 'p') {\n      let val = this.args[0].value(context, otherArgs);\n      return this.filters.reduce((val, filter) => filter.invoke(val), val);\n    }\n\n    let fn = this.fn.value(context, context.__templateHost);\n    if (typeof fn !== 'function') {\n      throw new Error(`Method is not eligible, ${context.__templateHost.nodeName || '$anonymous'}#${this.name}`);\n    }\n\n    let args = this.args.map(arg => {\n      return arg.value(context, otherArgs);\n    });\n\n    return fn.apply(context, args);\n  }\n}\n\nexport default Expr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/expr.js","function serialize (value) {\n  switch (typeof value) {\n    case 'boolean':\n      return value ? '' : undefined;\n\n    case 'object':\n      if (value instanceof Date) {\n        return value;\n      } else if (value instanceof RegExp) {\n        return value.toString().slice(1, -1);\n      } else if (value) {\n        try {\n          return JSON.stringify(value);\n        } catch (err) {\n          return '';\n        }\n      }\n      break;\n    default:\n      // noop\n  }\n  return value === null ? undefined : value;\n}\n\nfunction deserialize (value, type) {\n  switch (type) {\n    case Number:\n      value = Number(value);\n      break;\n\n    case Boolean:\n      value = Boolean(value === '' || value === 'true' || value === '1' || value === 'on');\n      break;\n\n    case Object:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // allow non-JSON literals like Strings and Numbers\n        // console.warn('Failed decode json: \"' + value + '\" to Object');\n      }\n      break;\n\n    case Array:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // .console.warn('Failed decode json: \"' + value + '\" to Array');\n        value = null;\n      }\n      break;\n\n    case Date:\n      value = new Date(value);\n      break;\n\n    case RegExp:\n      value = new RegExp(value);\n      break;\n\n    case Function:\n      value = new Function(value); // eslint-disable-line\n      break;\n\n    // behave like default for now\n    // case String:\n    default:\n      break;\n  }\n  return value;\n}\n\nexport { serialize, deserialize };\n\n\n\n// WEBPACK FOOTER //\n// ./src/serializer.js","import Expr from './expr';\nimport Binding from './binding';\nimport Accessor from './accessor';\nimport Annotation from './annotation';\nimport Filter from './filter';\nimport Token from './token';\nimport Event from './event';\nimport Css from './css';\nimport { deserialize } from './serializer';\n\nlet templateId = 0;\nfunction nextId () {\n  return templateId++;\n}\n\nconst SLOT_SUPPORTED = (typeof window === 'undefined')\n  ? false\n  : 'HTMLUnknownElement' in window && !(document.createElement('slot') instanceof window.HTMLUnknownElement);\n\nfunction slotName (element) {\n  return SLOT_SUPPORTED ? element.name : element.getAttribute('name');\n}\n\nfunction fixTemplate (template) {\n  if (!template.content && window.HTMLTemplateElement && window.HTMLTemplateElement.decorate) {\n    window.HTMLTemplateElement.decorate(template);\n  }\n  return template;\n}\n\nfunction T (template, host, marker) {\n  this.__templateInitialize(template, host, marker);\n  this.__templateRender();\n}\n\nT.prototype = {\n  get $ () {\n    return this.__templateHost.getElementsByTagName('*');\n  },\n\n  $$ (selector) {\n    return this.querySelector(selector);\n  },\n\n  on () {\n    Event(this.__templateHost).on(...arguments);\n  },\n\n  off () {\n    Event(this.__templateHost).off(...arguments);\n  },\n\n  once () {\n    Event(this.__templateHost).once(...arguments);\n  },\n\n  all (obj) {\n    for (let i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        this.set(i, obj[i]);\n      }\n    }\n  },\n\n  get (path) {\n    let object = this;\n\n    this.__templateGetPathAsArray(path).some(segment => {\n      if (object === undefined || object === null) {\n        object = undefined;\n        return true;\n      }\n\n      object = object[segment];\n      return false;\n    });\n\n    return object;\n  },\n\n  set (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    let oldValue = this.get(path);\n\n    if (value === oldValue) {\n      return;\n    }\n\n    let object = this;\n\n    path.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = path.slice(-1).pop();\n\n    object[property] = value;\n\n    this.notify(path, value);\n  },\n\n  push (path, ...values) {\n    path = this.__templateGetPathAsArray(path);\n\n    let object = this;\n\n    path.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = path.slice(-1).pop();\n\n    let result = object[property].push(...values);\n\n    this.notify(path, object[property]);\n\n    return result;\n  },\n\n  pop (path) {\n    path = this.__templateGetPathAsArray(path);\n\n    let object = this;\n\n    path.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = path.slice(-1).pop();\n\n    let result = object[property].pop();\n\n    this.notify(path, object[property]);\n\n    return result;\n  },\n\n  splice (path, ...args) {\n    path = this.__templateGetPathAsArray(path);\n\n    let object = this;\n\n    path.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = path.slice(-1).pop();\n\n    let result = object[property].splice(...args);\n\n    this.notify(path, object[property]);\n\n    return result;\n  },\n\n  notify (path, value) {\n    path = this.__templateGetPathAsString(path);\n\n    if (!this.__templateReady) {\n      if (this.__templateNotifyOnReady.indexOf(path) === -1) {\n        this.__templateNotifyOnReady.push(path);\n      }\n      return;\n    }\n\n    // try {\n    let binding = this.__templateGetBinding(path);\n    if (binding) {\n      if (typeof value === 'undefined') {\n        value = this.get(path);\n      }\n\n      binding.walkEffect(value);\n    }\n    // } catch (err) {\n    //   console.warn(`#notify caught error: ${err.message}\\n Stack trace: ${err.stack}`);\n    // }\n  },\n\n  __templateInitialize (template, host, marker) {\n    this.__templateId = nextId();\n    this.__templateBindings = {};\n    this.__templateHost = host || (template ? template.parentElement : null);\n    this.__templateMarker = marker;\n\n    this.__templateReady = false;\n    this.__templateNotifyOnReady = [];\n\n    if (!template) {\n      return;\n    }\n\n    // do below only if template is exists\n    this.__template = fixTemplate(template);\n    this.__templateChildNodes = [];\n\n    this.__templateFragment = document.importNode(this.__template.content, true);\n    this.__parseAnnotations();\n\n    if (marker) {\n      return;\n    }\n\n    if (this.__template.parentElement === this.__templateHost) {\n      // when template parent is template host, it means that template is specific template\n      // then use template as marker\n      this.__templateMarker = this.__template;\n    } else {\n      // when template is not child of host, put marker to host\n      this.__templateMarker = document.createComment(`marker-${this.__templateId}`);\n      this.__templateHost.appendChild(this.__templateMarker);\n    }\n  },\n\n  __templateRender (contentFragment) {\n    this.__templateReady = true;\n\n    this.__templateNotifyOnReady.forEach(key => {\n      this.notify(key, this.get(key));\n    });\n    this.__templateNotifyOnReady = [];\n\n    if (!this.__template) {\n      return;\n    }\n\n    let fragment = this.__templateFragment;\n    this.__templateFragment = null;\n\n    if (contentFragment && contentFragment instanceof window.DocumentFragment) {\n      // try {\n      [].forEach.call(fragment.querySelectorAll('slot'), slot => {\n        let name = slotName(slot);\n        let parent = slot.parentElement || fragment;\n        let marker = document.createComment(`slot ${name}`);\n\n        parent.insertBefore(marker, slot);\n        parent.removeChild(slot);\n\n        if (name) {\n          let node = contentFragment.querySelectorAll(`[slot=\"${name}\"]`);\n          [].forEach.call(node, (node) => {\n            parent.insertBefore(node, marker);\n          });\n        } else {\n          parent.insertBefore(contentFragment, marker);\n        }\n      });\n    }\n\n    this.__templateMarker.parentElement.insertBefore(fragment, this.__templateMarker);\n  },\n\n  __templateUninitialize () {\n    this.__templateChildNodes.forEach(node => {\n      node.parentElement.removeChild(node);\n    });\n  },\n\n  __templateGetPathAsArray (path) {\n    // if (!path) {\n    //   throw new Error(`Unknown path ${path} to set to ${this.is}`);\n    // }\n\n    if (typeof path !== 'string') {\n      return path;\n    }\n\n    return path.split('.');\n  },\n\n  __templateGetPathAsString (path) {\n    if (typeof path === 'string') {\n      return path;\n    }\n\n    return path.join('.');\n  },\n\n  __parseAnnotations () {\n    this.__templateChildNodes = [ ...this.__templateFragment.childNodes ];\n\n    let len = this.__templateChildNodes.length;\n\n    for (let i = 0; i < len; i++) {\n      let node = this.__templateChildNodes[i];\n\n      switch (node.nodeType) {\n        case window.Node.ELEMENT_NODE:\n          this.__parseElementAnnotations(node);\n          break;\n        case window.Node.TEXT_NODE:\n          this.__parseTextAnnotations(node);\n          break;\n      }\n    }\n  },\n\n  __parseEventAnnotations (element, attrName) {\n    // bind event annotation\n    let attrValue = element.getAttribute(attrName);\n    let eventName = attrName.slice(1, -1);\n    // let eventName = attrName.substr(3);\n    if (eventName === 'tap') {\n      eventName = 'click';\n    }\n\n    let context = this;\n    let expr = Expr.getFn(attrValue, [], true);\n\n    this.on(eventName, element, evt => {\n      expr.invoke(context, { evt });\n    });\n  },\n\n  __parseAttributeAnnotations (element) {\n    // clone attributes to array first then foreach because we will remove\n    // attribute later if already processed\n    // this hack to make sure when attribute removed the attributes index doesnt shift.\n    let annotated = false;\n\n    let len = element.attributes.length;\n\n    for (let i = 0; i < len; i++) {\n      let attr = element.attributes[i];\n\n      let attrName = attr.name;\n\n      if (attrName.indexOf('(') === 0) {\n        this.__parseEventAnnotations(element, attrName);\n      } else {\n        // bind property annotation\n        annotated = this.__templateAnnotate(Expr.get(attr.value), Accessor.get(element, attrName)) || annotated;\n      }\n    }\n\n    return annotated;\n  },\n\n  __parseElementAnnotations (element) {\n    let annotated = false;\n\n    let scoped = element.__templateModel;\n\n    if (scoped) {\n      return annotated;\n    }\n\n    element.__templateModel = this;\n\n    if (element.attributes && element.attributes.length) {\n      annotated = this.__parseAttributeAnnotations(element) || annotated;\n    }\n\n    if (element.childNodes && element.childNodes.length) {\n      let childNodes = [].slice.call(element.childNodes);\n      let childNodesLength = childNodes.length;\n\n      for (let i = 0; i < childNodesLength; i++) {\n        annotated = this.__parseNodeAnnotations(childNodes[i]) || annotated;\n      }\n    }\n\n    [].forEach.call(element.getElementsByTagName('slot'), slot => {\n      [].forEach.call(slot.childNodes, node => {\n        annotated = this.__parseNodeAnnotations(node) || annotated;\n      });\n    });\n\n    return annotated;\n  },\n\n  __parseNodeAnnotations (node) {\n    switch (node.nodeType) {\n      case window.Node.TEXT_NODE:\n        return this.__parseTextAnnotations(node);\n      case window.Node.ELEMENT_NODE:\n        return this.__parseElementAnnotations(node);\n    }\n  },\n\n  __parseTextAnnotations (node) {\n    let expr = Expr.get(node.textContent);\n    let accessor = Accessor.get(node);\n    return this.__templateAnnotate(expr, accessor);\n  },\n\n  __templateAnnotate (expr, accessor) {\n    if (expr.type === 's') {\n      return false;\n    }\n\n    if (expr.constant) {\n      let val = expr.invoke(this);\n      accessor.set(val);\n      return false;\n    }\n\n    // annotate every paths\n    let annotation = new Annotation(this, expr, accessor);\n\n    if (expr.type === 'm') {\n      this.__templateGetBinding(expr.fn.name).annotations.push(annotation);\n    }\n\n    expr.vpaths.forEach(arg => this.__templateGetBinding(arg.name).annotations.push(annotation));\n\n    return true;\n  },\n\n  __templateGetBinding (path) {\n    let segments = path.split('.');\n    let bindings;\n    let binding;\n\n    for (let i = 0; i < segments.length; i++) {\n      let segment = segments[i];\n\n      bindings = binding ? binding.paths : this.__templateBindings;\n\n      if (!bindings[segment]) {\n        bindings[segment] = new Binding(this, segment);\n      }\n\n      binding = bindings[segment];\n    }\n\n    return binding;\n  },\n};\n\nT.Filter = Filter;\nT.Accessor = Accessor;\nT.Token = Token;\nT.Expr = Expr;\nT.Event = Event;\nT.Css = Css;\nT.deserialize = deserialize;\n\nwindow.T = T;\n\nexport default T;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}