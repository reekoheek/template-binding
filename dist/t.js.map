{"version":3,"sources":["webpack:///webpack/bootstrap 0e2a1ef34118a0acef8e","webpack:///./src/index.js","webpack:///./src/expr.js","webpack:///./src/token.js","webpack:///./src/binding.js","webpack:///./src/accessor.js","webpack:///./src/annotation.js","webpack:///./src/serializer.js"],"names":["Expr","require","Binding","Accessor","Annotation","Token","Serializer","SLOT_SUPPORTED","window","document","createElement","HTMLUnknownElement","templateId","nextId","slotName","element","name","getAttribute","slotAppend","slot","node","root","__appended","__fallbackContent","innerHTML","appendChild","elementSlot","fixTemplate","template","content","HTMLTemplateElement","decorate","T","host","marker","__templateInitialize","prototype","__templateId","__templateBindings","__templateHost","parentElement","__templateMarker","$","__template","__templateFragment","importNode","__parseAnnotations","createComment","$$","selector","querySelector","render","forEach","call","querySelectorAll","nodeType","Node","ELEMENT_NODE","err","console","error","stack","insertBefore","get","path","object","segments","split","some","undefined","segment","set","value","oldValue","slice","property","pop","notify","binding","__templateGetBinding","walkEffect","warn","message","len","childNodes","length","i","__parseElementAnnotations","TEXT_NODE","__parseTextAnnotations","Object","keys","key","__parseEventAnnotations","attrName","attrValue","eventName","context","expr","getFn","addEventListener","evt","invoke","__parseAttributeAnnotations","Array","attributes","reduce","annotated","attr","indexOf","__templateAnnotate","scoped","__templateModel","classList","add","is","id","childNodesLength","childNode","textContent","accessor","nodeName","type","annotation","annotatedPaths","arg","annotations","push","bindings","paths","module","exports","unwrapped","mode","args","Boolean","valType","trim","token","matches","match","tokenize","otherArgs","fn","Error","map","apply","_annotatedPaths","join","rawTokenize","str","count","tokens","substr","GLOBAL","global","JSON","parse","_value","others","val","model","effect","BaseAccessor","TextAccessor","textContext","ValueAccessor","AttributeAccessor","setAttribute","removeAttribute","endsWith","serialize","Date","stringify","deserialize","Number"],"mappings":"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","file":"t.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0e2a1ef34118a0acef8e\n **/","/* globals Node, HTMLUnknownElement */\nconst Expr = require('./expr');\nconst Binding = require('./binding');\nconst Accessor = require('./accessor');\nconst Annotation = require('./annotation');\nconst Token = require('./token');\nconst Serializer = require('./serializer');\n\nconst SLOT_SUPPORTED = 'HTMLUnknownElement' in window && !(document.createElement('slot') instanceof HTMLUnknownElement);\n\nlet templateId = 0;\n\nfunction nextId () {\n  return templateId++;\n}\n\nfunction slotName (element) {\n  return SLOT_SUPPORTED ? element.name : element.getAttribute('name');\n}\n\nfunction slotAppend (slot, node, root) {\n  if (!slot.__appended) {\n    slot.__appended = true;\n    slot.__fallbackContent = slot.innerHTML;\n    slot.innerHTML = '';\n  }\n\n  slot.appendChild(node);\n}\n\nfunction elementSlot (element) {\n  return SLOT_SUPPORTED ? element.slot : element.getAttribute('slot');\n}\n\nfunction fixTemplate (template) {\n  if (!template.content && window.HTMLTemplateElement && window.HTMLTemplateElement.decorate) {\n    window.HTMLTemplateElement.decorate(template);\n  }\n  return template;\n}\n\nfunction T (template, host, marker) {\n  this.__templateInitialize(template, host, marker);\n}\n\nT.prototype = {\n  __templateInitialize (template, host, marker) {\n    this.__templateId = nextId();\n    // this.__templateAnnotatedElements = [];\n    this.__templateBindings = {};\n    this.__templateHost = host || (template ? template.parentElement : null);\n    this.__templateMarker = marker;\n    this.$ = {};\n\n    if (!template) {\n      return;\n    }\n\n    // do below only if template is exists\n    this.__template = fixTemplate(template);\n    this.__templateFragment = document.importNode(this.__template.content, true);\n\n    this.__parseAnnotations();\n\n    if (marker) {\n      return;\n    }\n\n    if (this.__template.parentElement === this.__templateHost) {\n      // when template parent is template host, it means that template is specific template\n      // then use template as marker\n      this.__templateMarker = this.__template;\n    } else {\n      // when template is not child of host, put marker to host\n      this.__templateMarker = document.createComment(`marker-${this.__templateId}`);\n      this.__templateHost.appendChild(this.__templateMarker);\n    }\n  },\n\n  $$ (selector) {\n    return this.querySelector(selector);\n  },\n\n  render (content) {\n    if (!this.__templateFragment) {\n      return;\n    }\n\n    if (content) {\n      try {\n        [].forEach.call(this.__templateFragment.querySelectorAll('slot'), slot => {\n          let name = slotName(slot);\n          if (name) {\n            content.forEach(node => {\n              if (node.nodeType === Node.ELEMENT_NODE && name === elementSlot(node)) {\n                slotAppend(slot, node, this.__templateFragment);\n              }\n              // TODO query to childnodes looking for slot\n            });\n          } else {\n            content.forEach(node => {\n              slotAppend(slot, node, this.__templateFragment);\n            });\n          }\n        });\n      } catch (err) {\n        console.error(err.stack);\n        throw err;\n      }\n    }\n\n    this.__templateMarker.parentElement.insertBefore(this.__templateFragment, this.__templateMarker);\n  },\n\n  get (path) {\n    let object = this;\n\n    let segments = path.split('.');\n\n    segments.some(segment => {\n      if (object === undefined || object === null) {\n        object = undefined;\n        return true;\n      }\n\n      object = object[segment];\n      return false;\n    });\n\n    return object;\n  },\n\n  set (path, value) {\n    let oldValue = this.get(path);\n\n    if (value === oldValue) {\n      return;\n    }\n\n    let object = this;\n\n    let segments = path.split('.');\n\n    segments.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = segments.slice(-1).pop();\n\n    object[property] = value;\n\n    this.notify(path, value, oldValue);\n  },\n\n  notify (path, value, oldValue) {\n    try {\n      let binding = this.__templateGetBinding(path);\n      if (binding) {\n        binding.walkEffect(value);\n      }\n    } catch (err) {\n      console.warn(`#notify caught error: ${err.message}\\n Stack trace: ${err.stack}`);\n    }\n  },\n\n  __parseAnnotations () {\n    // this.__templateAnnotatedElements = [];\n\n    // [].forEach.call(this.__templateFragment.querySelectorAll('*'), (el) => {\n    //   console.warn(this.is, !!el.__templateModel, el);\n    // });\n\n    let len = this.__templateFragment.childNodes.length;\n    for (let i = 0; i < len; i++) {\n      let node = this.__templateFragment.childNodes[i];\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          this.__parseElementAnnotations(node);\n          break;\n        case Node.TEXT_NODE:\n          this.__parseTextAnnotations(node);\n          break;\n      }\n    }\n\n    Object.keys(this.__templateBindings).forEach(key => {\n      this.notify(key, this.get(key));\n    });\n  },\n\n  __parseEventAnnotations (element, attrName) {\n    // bind event annotation\n    let attrValue = element.getAttribute(attrName);\n    let eventName = attrName.slice(1, -1);\n    // let eventName = attrName.substr(3);\n    if (eventName === 'tap') {\n      eventName = 'click';\n    }\n\n    let context = this;\n    let expr = Expr.getFn(attrValue, [], true);\n\n    // TODO might be slow or memory leak setting event listener to inside element\n    element.addEventListener(eventName, function (evt) {\n      return expr.invoke(context, { evt });\n    }, true);\n  },\n\n  __parseAttributeAnnotations (element) {\n    // clone attributes to array first then foreach because we will remove\n    // attribute later if already processed\n    // this hack to make sure when attribute removed the attributes index doesnt shift.\n    return Array.prototype.slice.call(element.attributes).reduce((annotated, attr) => {\n      let attrName = attr.name;\n\n      if (attrName.indexOf('(') === 0) {\n        this.__parseEventAnnotations(element, attrName);\n      } else {\n        // bind property annotation\n        annotated = this.__templateAnnotate(Expr.get(attr.value), Accessor.get(element, attrName)) || annotated;\n      }\n\n      return annotated;\n    }, false);\n  },\n\n  __parseElementAnnotations (element) {\n    let annotated = false;\n    let scoped = element.__templateModel;\n\n    if (!scoped) {\n      element.classList.add(`${this.__templateHost.is}__scope`);\n      element.__templateModel = this;\n\n      // populate $\n      if (element.id && !this.$[element.id]) {\n        this.$[element.id] = element;\n      }\n\n      if (element.attributes && element.attributes.length) {\n        annotated = this.__parseAttributeAnnotations(element) || annotated;\n      }\n    }\n\n    if (element.childNodes && element.childNodes.length) {\n      let childNodes = [].slice.call(element.childNodes);\n      let childNodesLength = childNodes.length;\n\n      for (let i = 0; i < childNodesLength; i++) {\n        let childNode = childNodes[i];\n\n        switch (childNode.nodeType) {\n          case Node.TEXT_NODE:\n            if (!scoped) {\n              annotated = this.__parseTextAnnotations(childNode) || annotated;\n            }\n            break;\n          case Node.ELEMENT_NODE:\n            annotated = this.__parseElementAnnotations(childNode) || annotated;\n            break;\n          default:\n            // noop\n        }\n      }\n    }\n\n    // if (annotated) {\n    //   this.__templateAnnotatedElements.push(element);\n    // }\n\n    return annotated;\n  },\n\n  __parseTextAnnotations (node) {\n    let expr = Expr.get(node.textContent);\n\n    let accessor;\n    if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n      accessor = Accessor.get(node.parentElement, 'value');\n    } else {\n      accessor = Accessor.get(node);\n    }\n\n    return this.__templateAnnotate(expr, accessor);\n  },\n\n  __templateAnnotate (expr, accessor) {\n    if (expr.type === 's') {\n      return false;\n    }\n\n    // annotate every paths\n    let annotation = new Annotation(this, expr, accessor);\n\n    expr.annotatedPaths.forEach(arg => this.__templateGetBinding(arg.name).annotations.push(annotation));\n\n    return true;\n  },\n\n  __templateGetBinding (path) {\n    let segments = path.split('.');\n    let bindings;\n    let binding;\n\n    for (let i = 0; i < segments.length; i++) {\n      let segment = segments[i];\n\n      bindings = binding ? binding.paths : this.__templateBindings;\n\n      if (!bindings[segment]) {\n        bindings[segment] = new Binding(this, segment);\n      }\n\n      binding = bindings[segment];\n    }\n\n    return binding;\n  },\n};\n\nif (typeof window === 'object') {\n  window.T = T;\n}\n\nmodule.exports = T;\nmodule.exports.Accessor = Accessor;\nmodule.exports.Expr = Expr;\nmodule.exports.Token = Token;\nmodule.exports.Serializer = Serializer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","const Token = require('./token');\n\nclass Expr {\n  constructor (value, unwrapped) {\n    // define base properties\n    this.mode = '[';\n    this.type = 's';\n    this.name = '';\n    this.args = [];\n    this.value = value;\n    this.unwrapped = Boolean(unwrapped);\n\n    let valType = typeof value;\n    if (valType === 'function') {\n      this.type = 'm';\n      return;\n    } else if (valType !== 'string') {\n      // validate args\n      return;\n    }\n\n    // cleanse value\n    value = value.trim();\n\n    let token = value;\n    if (!this.unwrapped) {\n      if (value[0] !== '[' && value[0] !== '{') {\n        return;\n      }\n      token = value.slice(2, -2).trim();\n      this.mode = value[0];\n    }\n\n    if (token.indexOf('(') < 0) {\n      this.type = 'p';\n      this.name = token;\n      this.args.push(new Token(token));\n    } else {\n      // force mode to '[' when type is !p\n      this.mode = '[';\n      this.type = 'm';\n\n      let matches = token.match(/([^(]+)\\(([^)]*)\\)/);\n\n      this.name = matches[1].trim();\n\n      this.args = tokenize(matches[2]);\n    }\n  }\n\n  get annotatedPaths () {\n    if (!this._annotatedPaths) {\n      let annotatedPaths = [];\n      this.args.forEach(arg => {\n        if (arg.type === 'v' && annotatedPaths.indexOf(arg.name) === -1) {\n          annotatedPaths.push(arg);\n        }\n      });\n      this._annotatedPaths = annotatedPaths;\n    }\n\n    return this._annotatedPaths;\n  }\n\n  invoke (context, otherArgs) {\n    if (this.type === 'p') {\n      return typeof context.get === 'function' ? context.get(this.name) : context[this.name];\n    }\n\n    let fn = context.__templateHost[this.name];\n    if (typeof fn !== 'function') {\n      throw new Error(`Method is not eligible, ${context.__templateHost.nodeName || '$anonymous'}#${this.name}`);\n    }\n\n\n    let args = this.args.map(arg => {\n      return arg.value(context, otherArgs);\n    });\n\n\n    return fn.apply(context, args);\n  }\n}\n\nfunction get (value, unwrapped) {\n  // FIXME implement cache\n  return new Expr(value, unwrapped);\n}\n\nfunction getFn (value, args, unwrapped) {\n  if (typeof value === 'function') {\n    return get(value, unwrapped);\n  }\n  return get(value.indexOf('(') === -1 ? (value + '(' + args.join(', ') + ')') : value, unwrapped);\n}\n\nfunction rawTokenize (str) {\n  let count = 0;\n  let tokens = [];\n\n  while (str && count++ < 10) {\n    let matches = str.match(/^\\s*(\"[^\"]*\"|[^,]+),?/);\n\n    str = str.substr(matches[0].length);\n    tokens.push(matches[1].trim());\n  }\n\n  return tokens;\n}\n\nfunction tokenize (str) {\n  return rawTokenize(str).map(token => new Token(token));\n}\n\nmodule.exports = Expr;\nmodule.exports.getFn = getFn;\nmodule.exports.get = get;\nmodule.exports.rawTokenize = rawTokenize;\nmodule.exports.tokenize = tokenize;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expr.js\n **/","const GLOBAL = global || window;\n\nclass Token {\n  constructor (name) {\n    this.name = name;\n    try {\n      let value = JSON.parse(this.name);\n      this.type = 's';\n      this._value = value;\n    } catch (err) {\n      this.type = 'v';\n      this._value = null;\n    }\n  }\n\n  value (context, others) {\n    context = context || GLOBAL;\n\n    if (this.type === 's') {\n      return this._value;\n    }\n\n    if (context) {\n      let val = context.get ? context.get(this.name) : context[this.name];\n      if (typeof val !== 'undefined') {\n        return val;\n      }\n    }\n\n    if (others) {\n      let val = others.get ? others.get(this.name) : others[this.name];\n      if (typeof val !== 'undefined') {\n        return val;\n      }\n    }\n\n    return;\n  }\n}\n\nfunction get (name) {\n  // FIXME implement cache\n  return new Token(name);\n}\n\nmodule.exports = Token;\nmodule.exports.get = get;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/token.js\n **/","class Binding {\n  constructor (context, model) {\n    this.context = context;\n    this.model = model;\n    this.paths = {};\n    this.annotations = [];\n  }\n\n  walkEffect (value) {\n    this.annotations.forEach(annotation => {\n      try {\n        annotation.effect(value, this.model);\n      } catch (err) {\n        console.error(`Error caught while walk effect annotation: ${annotation.expr ? annotation.expr.value : '#unknown'}\\n ${err.stack}`);\n      }\n    });\n\n    Object.keys(this.paths).forEach(i => {\n      this.paths[i].walkEffect(value ? value[i] : undefined);\n    });\n  }\n}\n\nmodule.exports = Binding;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/binding.js\n **/","/* globals Node */\n\nclass BaseAccessor {\n  constructor (node, name) {\n    this.node = node;\n    this.name = name;\n  }\n\n  set (value) {\n    if (typeof this.node.set === 'function') {\n      this.node.set(this.name, value);\n    } else {\n      this.node[this.name] = value;\n    }\n  }\n\n  get () {\n    if (typeof this.node.get === 'function') {\n      return this.node.get(this.name);\n    } else {\n      return this.node[this.name];\n    }\n  }\n}\n\nclass TextAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'textContent');\n  }\n\n  set (value) {\n    this.node.textContent = value || '';\n  }\n\n  get () {\n    return this.node.textContext;\n  }\n}\n\nclass ValueAccessor extends BaseAccessor {\n  set (value) {\n    super.set(value || '');\n  }\n}\n\nclass AttributeAccessor extends BaseAccessor {\n  constructor (node, name) {\n    super(node, name.slice(0, -1));\n  }\n\n  set (value) {\n    if (value) {\n      this.node.setAttribute(this.name, value);\n    } else {\n      this.node.removeAttribute(this.name);\n    }\n  }\n\n  get () {\n    return this.node.getAttribute(this.name);\n  }\n}\n\nfunction get (node, name) {\n  if (node && 'nodeType' in node) {\n    switch (node.nodeType) {\n      case Node.ELEMENT_NODE:\n        if (name.endsWith('$')) {\n          return new AttributeAccessor(node, name);\n        } else if (name === 'value') {\n          return new ValueAccessor(node, name);\n        }\n\n        return new BaseAccessor(node, name);\n      case Node.TEXT_NODE:\n        if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n          return new ValueAccessor(node.parentElement, 'value');\n        }\n\n        return new TextAccessor(node);\n      default:\n        throw new Error(`Unimplemented resolving accessor for nodeType: ${node.nodeType}`);\n    }\n  } else {\n    return new BaseAccessor(node, name);\n  }\n}\n\nmodule.exports = BaseAccessor;\nmodule.exports.get = get;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/accessor.js\n **/","class Annotation {\n  constructor (model, expr, accessor) {\n    this.model = model;\n    this.expr = expr;\n    this.accessor = accessor;\n  }\n\n  effect (value) {\n    if (this.accessor) {\n      let value = this.expr.invoke(this.model);\n      // FIXME implement composite annotation\n      // FIXME implement filtered annotation\n      // FIXME implement function type annotation\n      this.accessor.set(value);\n    } else {\n      this.expr.invoke(this.model);\n    }\n  }\n}\n\nmodule.exports = Annotation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/annotation.js\n **/","function serialize (value) {\n  switch (typeof value) {\n    case 'boolean':\n      return value ? '' : undefined;\n\n    case 'object':\n      if (value instanceof Date) {\n        return value;\n      } else if (value) {\n        try {\n          return JSON.stringify(value);\n        } catch (err) {\n          return '';\n        }\n      }\n      break;\n    default:\n      // noop\n  }\n  return value === null ? undefined : value;\n}\n\nfunction deserialize (value, type) {\n  switch (type) {\n    case Number:\n      value = Number(value);\n      break;\n\n    case Boolean:\n      value = Boolean(value === '' || value === 'true' || value === '1' || value === 'on');\n      break;\n\n    case Object:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // allow non-JSON literals like Strings and Numbers\n        // console.warn('Failed decode json: \"' + value + '\" to Object');\n      }\n      break;\n\n    case Array:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // .console.warn('Failed decode json: \"' + value + '\" to Array');\n        value = null;\n      }\n      break;\n\n    case Date:\n      value = new Date(value);\n      break;\n\n    // behave like default for now\n    // case String:\n    default:\n      break;\n  }\n  return value;\n}\n\nmodule.exports.serialize = serialize;\nmodule.exports.deserialize = deserialize;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/serializer.js\n **/"],"sourceRoot":""}