{"version":3,"sources":["webpack:///webpack/bootstrap ef9e011f9c33dc6353f1","webpack:///./src/index.js","webpack:///./src/expr.js","webpack:///./src/token.js","webpack:///./src/filter.js","webpack:///./src/binding.js","webpack:///./src/accessor.js","webpack:///./src/annotation.js","webpack:///./src/event.js","webpack:///./src/serializer.js"],"names":["templateId","nextId","SLOT_SUPPORTED","window","document","createElement","HTMLUnknownElement","slotName","element","name","getAttribute","fixTemplate","template","content","HTMLTemplateElement","decorate","T","host","marker","__templateInitialize","__templateRender","prototype","$","__templateHost","getElementsByTagName","$$","selector","querySelector","on","arguments","off","all","obj","i","hasOwnProperty","set","get","path","object","__templateGetPathAsArray","some","undefined","segment","value","oldValue","slice","forEach","property","pop","notify","__templateGetPathAsString","__templateReady","__templateNotifyOnReady","indexOf","push","binding","__templateGetBinding","walkEffect","__templateId","__templateBindings","parentElement","__templateMarker","__template","__templateChildNodes","__templateFragment","importNode","__parseAnnotations","createComment","appendChild","contentFragment","key","fragment","DocumentFragment","call","querySelectorAll","slot","parent","insertBefore","removeChild","node","__templateUninitialize","split","join","childNodes","len","length","nodeType","Node","ELEMENT_NODE","__parseElementAnnotations","TEXT_NODE","__parseTextAnnotations","__parseEventAnnotations","attrName","attrValue","eventName","context","expr","getFn","invoke","evt","__parseAttributeAnnotations","annotated","attributes","attr","__templateAnnotate","scoped","__templateModel","childNodesLength","__parseNodeAnnotations","textContent","accessor","type","constant","val","annotation","fn","annotations","vpaths","arg","segments","bindings","paths","Filter","Accessor","Token","Expr","Event","deserialize","CACHE","Map","_get","mode","cache","has","unwrapped","trim","args","str","count","tokens","matches","match","substr","rawTokenize","map","token","filters","word","tokenize","otherArgs","reduce","filter","Error","nodeName","apply","_vpaths","_value","JSON","parse","err","others","valueOf","callback","registry","splice","required","upper","String","toUpperCase","lower","toLowerCase","not","begin","end","Array","Binding","model","effect","Object","keys","BaseAccessor","endsWith","AttributeAccessor","TextAccessor","HTMLAccessor","ValueAccessor","startsWith","ClassAccessor","StyleAccessor","classList","add","remove","style","innerHTML","activeElement","setAttribute","removeAttribute","Annotation","_matcher","_level","_id","_handlers","_delegatorInstances","_addEvent","delegator","useCapture","addEventListener","_cancel","e","preventDefault","stopPropagation","_getMatcher","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","EventDelegator","matchesSelector","_matchesSelector","boundElement","parentNode","_addHandler","event","id","_removeHandler","_handleEvent","target","srcElement","j","matchesEvent","cancelBubble","cancel","aliases","aliasesDefaultTranslator","aliasesTranslators","transitionend","el","transitions","t","_aliases","theAliases","translator","_bind","events","HTMLElement","hasAttribute","_getGlobalCallback","alias","addEvent","fire","detail","options","bubbles","cancelable","Boolean","CustomEvent","dispatchEvent","module","exports","serialize","Date","RegExp","toString","stringify","Number","Function"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACtCA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAIA,aAAa,CAAjB;AACA,UAASC,MAAT,GAAmB;AACjB,UAAOD,YAAP;AACD;;AAED,KAAME,iBAAkB,OAAOC,MAAP,KAAkB,WAAnB,GACnB,KADmB,GAEnB,wBAAwBA,MAAxB,IAAkC,EAAEC,SAASC,aAAT,CAAuB,MAAvB,aAA0CF,OAAOG,kBAAnD,CAFtC;;AAIA,UAASC,QAAT,CAAmBC,OAAnB,EAA4B;AAC1B,UAAON,iBAAiBM,QAAQC,IAAzB,GAAgCD,QAAQE,YAAR,CAAqB,MAArB,CAAvC;AACD;;AAED,UAASC,WAAT,CAAsBC,QAAtB,EAAgC;AAC9B,OAAI,CAACA,SAASC,OAAV,IAAqBV,OAAOW,mBAA5B,IAAmDX,OAAOW,mBAAP,CAA2BC,QAAlF,EAA4F;AAC1FZ,YAAOW,mBAAP,CAA2BC,QAA3B,CAAoCH,QAApC;AACD;AACD,UAAOA,QAAP;AACD;;AAED,UAASI,CAAT,CAAYJ,QAAZ,EAAsBK,IAAtB,EAA4BC,MAA5B,EAAoC;AAClC,QAAKC,oBAAL,CAA0BP,QAA1B,EAAoCK,IAApC,EAA0CC,MAA1C;AACA,QAAKE,gBAAL;AACD;;AAEDJ,GAAEK,SAAF,GAAc;AACZ,OAAIC,CAAJ,GAAS;AACP,YAAO,KAAKC,cAAL,CAAoBC,oBAApB,CAAyC,GAAzC,CAAP;AACD,IAHW;;AAKZC,KALY,cAKRC,QALQ,EAKE;AACZ,YAAO,KAAKC,aAAL,CAAmBD,QAAnB,CAAP;AACD,IAPW;AASZE,KATY,gBASN;AAAA;;AACJ,oCAAM,KAAKL,cAAX,GAA2BK,EAA3B,eAAiCC,SAAjC;AACD,IAXW;AAaZC,MAbY,iBAaL;AAAA;;AACL,qCAAM,KAAKP,cAAX,GAA2BO,GAA3B,gBAAkCD,SAAlC;AACD,IAfW;AAiBZE,MAjBY,eAiBPC,GAjBO,EAiBF;AACR,UAAK,IAAIC,CAAT,IAAcD,GAAd,EAAmB;AACjB,WAAIA,IAAIE,cAAJ,CAAmBD,CAAnB,CAAJ,EAA2B;AACzB,cAAKE,GAAL,CAASF,CAAT,EAAYD,IAAIC,CAAJ,CAAZ;AACD;AACF;AACF,IAvBW;AAyBZG,MAzBY,eAyBPC,IAzBO,EAyBD;AACT,SAAIC,SAAS,IAAb;;AAEA,UAAKC,wBAAL,CAA8BF,IAA9B,EAAoCG,IAApC,CAAyC,mBAAW;AAClD,WAAIF,WAAWG,SAAX,IAAwBH,WAAW,IAAvC,EAA6C;AAC3CA,kBAASG,SAAT;AACA,gBAAO,IAAP;AACD;;AAEDH,gBAASA,OAAOI,OAAP,CAAT;AACA,cAAO,KAAP;AACD,MARD;;AAUA,YAAOJ,MAAP;AACD,IAvCW;AAyCZH,MAzCY,eAyCPE,IAzCO,EAyCDM,KAzCC,EAyCM;AAChBN,YAAO,KAAKE,wBAAL,CAA8BF,IAA9B,CAAP;;AAEA,SAAIO,WAAW,KAAKR,GAAL,CAASC,IAAT,CAAf;;AAEA,SAAIM,UAAUC,QAAd,EAAwB;AACtB;AACD;;AAED,SAAIN,SAAS,IAAb;;AAEAD,UAAKQ,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,EAAkBC,OAAlB,CAA0B,mBAAW;AACnC,WAAI,CAACR,MAAL,EAAa;AACX;AACD;AACD,WAAIA,OAAOI,OAAP,MAAoBD,SAApB,IAAiCH,OAAOI,OAAP,MAAoB,IAAzD,EAA+D;AAC7DJ,gBAAOI,OAAP,IAAkB,EAAlB;AACD;;AAEDJ,gBAASA,OAAOI,OAAP,CAAT;AACD,MATD;;AAWA,SAAIK,WAAWV,KAAKQ,KAAL,CAAW,CAAC,CAAZ,EAAeG,GAAf,EAAf;;AAEAV,YAAOS,QAAP,IAAmBJ,KAAnB;;AAEA,UAAKM,MAAL,CAAYZ,IAAZ,EAAkBM,KAAlB;AACD,IApEW;AAsEZM,SAtEY,kBAsEJZ,IAtEI,EAsEEM,KAtEF,EAsES;AACnBN,YAAO,KAAKa,yBAAL,CAA+Bb,IAA/B,CAAP;;AAEA,SAAI,CAAC,KAAKc,eAAV,EAA2B;AACzB,WAAI,KAAKC,uBAAL,CAA6BC,OAA7B,CAAqChB,IAArC,MAA+C,CAAC,CAApD,EAAuD;AACrD,cAAKe,uBAAL,CAA6BE,IAA7B,CAAkCjB,IAAlC;AACD;AACD;AACD;;AAED;AACA,SAAIkB,UAAU,KAAKC,oBAAL,CAA0BnB,IAA1B,CAAd;AACA,SAAIkB,OAAJ,EAAa;AACX,WAAI,OAAOZ,KAAP,KAAiB,WAArB,EAAkC;AAChCA,iBAAQ,KAAKP,GAAL,CAASC,IAAT,CAAR;AACD;;AAEDkB,eAAQE,UAAR,CAAmBd,KAAnB;AACD;AACD;AACA;AACA;AACD,IA5FW;AA8FZxB,uBA9FY,gCA8FUP,QA9FV,EA8FoBK,IA9FpB,EA8F0BC,MA9F1B,EA8FkC;AAC5C,UAAKwC,YAAL,GAAoBzD,QAApB;AACA,UAAK0D,kBAAL,GAA0B,EAA1B;AACA,UAAKpC,cAAL,GAAsBN,SAASL,WAAWA,SAASgD,aAApB,GAAoC,IAA7C,CAAtB;AACA,UAAKC,gBAAL,GAAwB3C,MAAxB;;AAEA,UAAKiC,eAAL,GAAuB,KAAvB;AACA,UAAKC,uBAAL,GAA+B,EAA/B;;AAEA,SAAI,CAACxC,QAAL,EAAe;AACb;AACD;;AAED;AACA,UAAKkD,UAAL,GAAkBnD,YAAYC,QAAZ,CAAlB;AACA,UAAKmD,oBAAL,GAA4B,EAA5B;;AAEA,UAAKC,kBAAL,GAA0B5D,SAAS6D,UAAT,CAAoB,KAAKH,UAAL,CAAgBjD,OAApC,EAA6C,IAA7C,CAA1B;AACA,UAAKqD,kBAAL;;AAEA,SAAIhD,MAAJ,EAAY;AACV;AACD;;AAED,SAAI,KAAK4C,UAAL,CAAgBF,aAAhB,KAAkC,KAAKrC,cAA3C,EAA2D;AACzD;AACA;AACA,YAAKsC,gBAAL,GAAwB,KAAKC,UAA7B;AACD,MAJD,MAIO;AACL;AACA,YAAKD,gBAAL,GAAwBzD,SAAS+D,aAAT,aAAiC,KAAKT,YAAtC,CAAxB;AACA,YAAKnC,cAAL,CAAoB6C,WAApB,CAAgC,KAAKP,gBAArC;AACD;AACF,IA/HW;AAiIZzC,mBAjIY,4BAiIMiD,eAjIN,EAiIuB;AAAA;;AACjC,UAAKlB,eAAL,GAAuB,IAAvB;;AAEA,SAAI,CAAC,KAAKW,UAAV,EAAsB;AACpB;AACD;;AAED,UAAKV,uBAAL,CAA6BN,OAA7B,CAAqC;AAAA,cAAO,MAAKG,MAAL,CAAYqB,GAAZ,EAAiB,MAAKlC,GAAL,CAASkC,GAAT,CAAjB,CAAP;AAAA,MAArC;AACA,UAAKlB,uBAAL,GAA+B,EAA/B;;AAEA,SAAImB,WAAW,KAAKP,kBAApB;AACA,UAAKA,kBAAL,GAA0B,IAA1B;;AAEA,SAAIK,mBAAmBA,2BAA2BlE,OAAOqE,gBAAzD,EAA2E;AACzE;AACA,UAAG1B,OAAH,CAAW2B,IAAX,CAAgBF,SAASG,gBAAT,CAA0B,MAA1B,CAAhB,EAAmD,gBAAQ;AACzD,aAAIjE,OAAOF,SAASoE,IAAT,CAAX;AACA,aAAIC,SAASD,KAAKf,aAAL,IAAsBW,QAAnC;AACA,aAAIrD,SAASd,SAAS+D,aAAT,WAA+B1D,IAA/B,CAAb;;AAEAmE,gBAAOC,YAAP,CAAoB3D,MAApB,EAA4ByD,IAA5B;AACAC,gBAAOE,WAAP,CAAmBH,IAAnB;;AAEA,aAAIlE,IAAJ,EAAU;AACR,eAAIsE,OAAOV,gBAAgBK,gBAAhB,aAA2CjE,IAA3C,QAAX;AACA,cAAGqC,OAAH,CAAW2B,IAAX,CAAgBM,IAAhB,EAAsB,UAACA,IAAD,EAAU;AAC9BH,oBAAOC,YAAP,CAAoBE,IAApB,EAA0B7D,MAA1B;AACD,YAFD;AAGD,UALD,MAKO;AACL0D,kBAAOC,YAAP,CAAoBR,eAApB,EAAqCnD,MAArC;AACD;AACF,QAhBD;AAiBD;;AAED,UAAK2C,gBAAL,CAAsBD,aAAtB,CAAoCiB,YAApC,CAAiDN,QAAjD,EAA2D,KAAKV,gBAAhE;AACD,IApKW;AAsKZmB,yBAtKY,oCAsKc;AACxB,UAAKjB,oBAAL,CAA0BjB,OAA1B,CAAkC,gBAAQ;AACxCiC,YAAKnB,aAAL,CAAmBkB,WAAnB,CAA+BC,IAA/B;AACD,MAFD;AAGD,IA1KW;AA4KZxC,2BA5KY,oCA4KcF,IA5Kd,EA4KoB;AAC9B;AACA;AACA;;AAEA,SAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,cAAOA,IAAP;AACD;;AAED,YAAOA,KAAK4C,KAAL,CAAW,GAAX,CAAP;AACD,IAtLW;AAwLZ/B,4BAxLY,qCAwLeb,IAxLf,EAwLqB;AAC/B,SAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,cAAOA,IAAP;AACD;;AAED,YAAOA,KAAK6C,IAAL,CAAU,GAAV,CAAP;AACD,IA9LW;AAgMZhB,qBAhMY,gCAgMU;AACpB,UAAKH,oBAAL,gCAAiC,KAAKC,kBAAL,CAAwBmB,UAAzD;;AAEA,SAAIC,MAAM,KAAKrB,oBAAL,CAA0BsB,MAApC;;AAEA,UAAK,IAAIpD,IAAI,CAAb,EAAgBA,IAAImD,GAApB,EAAyBnD,GAAzB,EAA8B;AAC5B,WAAI8C,OAAO,KAAKhB,oBAAL,CAA0B9B,CAA1B,CAAX;;AAEA,eAAQ8C,KAAKO,QAAb;AACE,cAAKnF,OAAOoF,IAAP,CAAYC,YAAjB;AACE,gBAAKC,yBAAL,CAA+BV,IAA/B;AACA;AACF,cAAK5E,OAAOoF,IAAP,CAAYG,SAAjB;AACE,gBAAKC,sBAAL,CAA4BZ,IAA5B;AACA;AANJ;AAQD;AACF,IAjNW;AAmNZa,0BAnNY,mCAmNapF,OAnNb,EAmNsBqF,QAnNtB,EAmNgC;AAC1C;AACA,SAAIC,YAAYtF,QAAQE,YAAR,CAAqBmF,QAArB,CAAhB;AACA,SAAIE,YAAYF,SAAShD,KAAT,CAAe,CAAf,EAAkB,CAAC,CAAnB,CAAhB;AACA;AACA,SAAIkD,cAAc,KAAlB,EAAyB;AACvBA,mBAAY,OAAZ;AACD;;AAED,SAAIC,UAAU,IAAd;AACA,SAAIC,OAAO,eAAKC,KAAL,CAAWJ,SAAX,EAAsB,EAAtB,EAA0B,IAA1B,CAAX;;AAEA,UAAKlE,EAAL,CAAQmE,SAAR,EAAmBvF,OAAnB,EAA4B,eAAO;AACjCyF,YAAKE,MAAL,CAAYH,OAAZ,EAAqB,EAAEI,QAAF,EAArB;AACD,MAFD;AAGD,IAlOW;AAoOZC,8BApOY,uCAoOiB7F,OApOjB,EAoO0B;AACpC;AACA;AACA;AACA,SAAI8F,YAAY,KAAhB;;AAEA,SAAIlB,MAAM5E,QAAQ+F,UAAR,CAAmBlB,MAA7B;;AAEA,UAAK,IAAIpD,IAAI,CAAb,EAAgBA,IAAImD,GAApB,EAAyBnD,GAAzB,EAA8B;AAC5B,WAAIuE,OAAOhG,QAAQ+F,UAAR,CAAmBtE,CAAnB,CAAX;;AAEA,WAAI4D,WAAWW,KAAK/F,IAApB;;AAEA,WAAIoF,SAASxC,OAAT,CAAiB,GAAjB,MAA0B,CAA9B,EAAiC;AAC/B,cAAKuC,uBAAL,CAA6BpF,OAA7B,EAAsCqF,QAAtC;AACD,QAFD,MAEO;AACL;AACAS,qBAAY,KAAKG,kBAAL,CAAwB,eAAKrE,GAAL,CAASoE,KAAK7D,KAAd,CAAxB,EAA8C,mBAASP,GAAT,CAAa5B,OAAb,EAAsBqF,QAAtB,CAA9C,KAAkFS,SAA9F;AACD;AACF;;AAED,YAAOA,SAAP;AACD,IA1PW;AA4PZb,4BA5PY,qCA4PejF,OA5Pf,EA4PwB;AAAA;;AAClC,SAAI8F,YAAY,KAAhB;;AAEA,SAAII,SAASlG,QAAQmG,eAArB;;AAEA,SAAID,MAAJ,EAAY;AACV,cAAOJ,SAAP;AACD;;AAED9F,aAAQmG,eAAR,GAA0B,IAA1B;;AAEA,SAAInG,QAAQ+F,UAAR,IAAsB/F,QAAQ+F,UAAR,CAAmBlB,MAA7C,EAAqD;AACnDiB,mBAAY,KAAKD,2BAAL,CAAiC7F,OAAjC,KAA6C8F,SAAzD;AACD;;AAED,SAAI9F,QAAQ2E,UAAR,IAAsB3E,QAAQ2E,UAAR,CAAmBE,MAA7C,EAAqD;AACnD,WAAIF,aAAa,GAAGtC,KAAH,CAAS4B,IAAT,CAAcjE,QAAQ2E,UAAtB,CAAjB;AACA,WAAIyB,mBAAmBzB,WAAWE,MAAlC;;AAEA,YAAK,IAAIpD,IAAI,CAAb,EAAgBA,IAAI2E,gBAApB,EAAsC3E,GAAtC,EAA2C;AACzCqE,qBAAY,KAAKO,sBAAL,CAA4B1B,WAAWlD,CAAX,CAA5B,KAA8CqE,SAA1D;AACD;AACF;;AAED,QAAGxD,OAAH,CAAW2B,IAAX,CAAgBjE,QAAQgB,oBAAR,CAA6B,MAA7B,CAAhB,EAAsD,gBAAQ;AAC5D,UAAGsB,OAAH,CAAW2B,IAAX,CAAgBE,KAAKQ,UAArB,EAAiC,gBAAQ;AACvCmB,qBAAY,OAAKO,sBAAL,CAA4B9B,IAA5B,KAAqCuB,SAAjD;AACD,QAFD;AAGD,MAJD;;AAMA,YAAOA,SAAP;AACD,IA3RW;AA6RZO,yBA7RY,kCA6RY9B,IA7RZ,EA6RkB;AAC5B,aAAQA,KAAKO,QAAb;AACE,YAAKnF,OAAOoF,IAAP,CAAYG,SAAjB;AACE,gBAAO,KAAKC,sBAAL,CAA4BZ,IAA5B,CAAP;AACF,YAAK5E,OAAOoF,IAAP,CAAYC,YAAjB;AACE,gBAAO,KAAKC,yBAAL,CAA+BV,IAA/B,CAAP;AAJJ;AAMD,IApSW;AAsSZY,yBAtSY,kCAsSYZ,IAtSZ,EAsSkB;AAC5B,SAAIkB,OAAO,eAAK7D,GAAL,CAAS2C,KAAK+B,WAAd,CAAX;AACA,SAAIC,WAAW,mBAAS3E,GAAT,CAAa2C,IAAb,CAAf;AACA,YAAO,KAAK0B,kBAAL,CAAwBR,IAAxB,EAA8Bc,QAA9B,CAAP;AACD,IA1SW;AA4SZN,qBA5SY,8BA4SQR,IA5SR,EA4Scc,QA5Sd,EA4SwB;AAAA;;AAClC,SAAId,KAAKe,IAAL,KAAc,GAAlB,EAAuB;AACrB,cAAO,KAAP;AACD;;AAED,SAAIf,KAAKgB,QAAT,EAAmB;AACjB,WAAIC,MAAMjB,KAAKE,MAAL,CAAY,IAAZ,CAAV;AACAY,gBAAS5E,GAAT,CAAa+E,GAAb;AACA,cAAO,KAAP;AACD;;AAED;AACA,SAAIC,aAAa,yBAAe,IAAf,EAAqBlB,IAArB,EAA2Bc,QAA3B,CAAjB;;AAEA,SAAId,KAAKe,IAAL,KAAc,GAAlB,EAAuB;AACrB,YAAKxD,oBAAL,CAA0ByC,KAAKmB,EAAL,CAAQ3G,IAAlC,EAAwC4G,WAAxC,CAAoD/D,IAApD,CAAyD6D,UAAzD;AACD;;AAEDlB,UAAKqB,MAAL,CAAYxE,OAAZ,CAAoB;AAAA,cAAO,OAAKU,oBAAL,CAA0B+D,IAAI9G,IAA9B,EAAoC4G,WAApC,CAAgD/D,IAAhD,CAAqD6D,UAArD,CAAP;AAAA,MAApB;;AAEA,YAAO,IAAP;AACD,IAjUW;AAmUZ3D,uBAnUY,gCAmUUnB,IAnUV,EAmUgB;AAC1B,SAAImF,WAAWnF,KAAK4C,KAAL,CAAW,GAAX,CAAf;AACA,SAAIwC,iBAAJ;AACA,SAAIlE,gBAAJ;;AAEA,UAAK,IAAItB,IAAI,CAAb,EAAgBA,IAAIuF,SAASnC,MAA7B,EAAqCpD,GAArC,EAA0C;AACxC,WAAIS,UAAU8E,SAASvF,CAAT,CAAd;;AAEAwF,kBAAWlE,UAAUA,QAAQmE,KAAlB,GAA0B,KAAK/D,kBAA1C;;AAEA,WAAI,CAAC8D,SAAS/E,OAAT,CAAL,EAAwB;AACtB+E,kBAAS/E,OAAT,IAAoB,sBAAY,IAAZ,EAAkBA,OAAlB,CAApB;AACD;;AAEDa,iBAAUkE,SAAS/E,OAAT,CAAV;AACD;;AAED,YAAOa,OAAP;AACD;AArVW,EAAd;;AAwVAvC,GAAE2G,MAAF;AACA3G,GAAE4G,QAAF;AACA5G,GAAE6G,KAAF;AACA7G,GAAE8G,IAAF;AACA9G,GAAE+G,KAAF;AACA/G,GAAEgH,WAAF;;AAEA7H,QAAOa,CAAP,GAAWA,CAAX;;mBAEeA,C;;;;;;;;;;;;;;ACnYf;;;;AACA;;;;;;;;AAEA,KAAMiH,QAAQ;AACZ,QAAK;AACH,UAAK,IAAIC,GAAJ,EADF;AAEH,UAAK,IAAIA,GAAJ;AAFF,IADO;AAKZ,QAAK;AACH,UAAK,IAAIA,GAAJ,EADF;AAEH,UAAK,IAAIA,GAAJ;AAFF;AALO,EAAd;;AAWA,UAASC,IAAT,CAAexF,KAAf,EAAsByF,IAAtB,EAA4BpB,IAA5B,EAAkC;AAChC,OAAIqB,QAAQJ,MAAMjB,IAAN,EAAYoB,IAAZ,CAAZ;AACA,OAAIC,MAAMC,GAAN,CAAU3F,KAAV,CAAJ,EAAsB;AACpB,YAAO0F,MAAMjG,GAAN,CAAUO,KAAV,CAAP;AACD;;AAED,OAAIsD,OAAO,IAAI6B,IAAJ,CAASnF,KAAT,EAAgByF,IAAhB,EAAsBpB,IAAtB,CAAX;AACA,OAAIA,SAAS,GAAb,EAAkB;AAChBqB,WAAMlG,GAAN,CAAUQ,KAAV,EAAiBsD,IAAjB;AACD;;AAED,UAAOA,IAAP;AACD;;KAEK6B,I;;;yBAKQnF,K,EAAO4F,S,EAAW;AAC5B5F,eAAQ,CAACA,SAAS,EAAV,EAAc6F,IAAd,EAAR;;AAEA,WAAID,SAAJ,EAAe;AACb,gBAAOJ,KAAKxF,KAAL,EAAY,GAAZ,EAAiB,GAAjB,CAAP;AACD;;AAED,WAAIyF,OAAOzF,MAAM,CAAN,CAAX;AACA,WAAI,CAACyF,SAAS,GAAT,IAAgBA,SAAS,GAA1B,KAAkCzF,MAAM,CAAN,MAAayF,IAAnD,EAAyD;AACvDzF,iBAAQA,MAAME,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB2F,IAAnB,EAAR;AACA,gBAAOL,KAAKxF,KAAL,EAAYyF,IAAZ,EAAkB,GAAlB,CAAP;AACD;;AAED,cAAOD,KAAKxF,KAAL,EAAY,GAAZ,EAAiB,GAAjB,CAAP;AACD;;;2BAEaA,K,EAAO8F,I,EAAMF,S,EAAW;AACpC,cAAOT,KAAK1F,GAAL,CAASO,MAAMU,OAAN,CAAc,GAAd,MAAuB,CAAC,CAAxB,GAA+BV,KAA/B,SAAwC8F,KAAKvD,IAAL,CAAU,IAAV,CAAxC,SAA6DvC,KAAtE,EAA6E4F,SAA7E,CAAP;AACD;;;iCAEmBG,G,EAAK;AACvB,WAAIC,QAAQ,CAAZ;AACA,WAAIC,SAAS,EAAb;;AAEA,cAAOF,OAAOC,UAAU,EAAxB,EAA4B;AAC1B,aAAIE,UAAUH,IAAII,KAAJ,CAAU,uBAAV,CAAd;;AAEAJ,eAAMA,IAAIK,MAAJ,CAAWF,QAAQ,CAAR,EAAWxD,MAAtB,CAAN;AACAuD,gBAAOtF,IAAP,CAAYuF,QAAQ,CAAR,EAAWL,IAAX,EAAZ;AACD;;AAED,cAAOI,MAAP;AACD;;;8BAEgBF,G,EAAK;AACpB,cAAOZ,KAAKkB,WAAL,CAAiBN,GAAjB,EAAsBO,GAAtB,CAA0B;AAAA,gBAAS,gBAAM7G,GAAN,CAAU8G,KAAV,CAAT;AAAA,QAA1B,CAAP;AACD;;;yBAxCmB;AAClB,cAAOjB,KAAP;AACD;;;AAwCD,iBAAatF,KAAb,EAAoByF,IAApB,EAA0BpB,IAA1B,EAAgC;AAAA;;AAC9B;AACA,UAAKoB,IAAL,GAAYA,IAAZ;AACA,UAAKpB,IAAL,GAAYA,IAAZ;AACA,UAAKvG,IAAL,GAAY,EAAZ;AACA,UAAKgI,IAAL,GAAY,EAAZ;AACA,UAAKU,OAAL,GAAe,EAAf;AACA,UAAKxG,KAAL,GAAaA,KAAb;;AAEA,SAAIqE,SAAS,GAAb,EAAkB;AAChB;AACD;;AAED,SAAI4B,SAASjG,MAAMsC,KAAN,CAAY,GAAZ,CAAb;AACA,SAAIiE,QAAQN,OAAO,CAAP,EAAUJ,IAAV,EAAZ;;AAEA,UAAKW,OAAL,GAAeP,OAAO/F,KAAP,CAAa,CAAb,EAAgBoG,GAAhB,CAAoB,gBAAQ;AACzC,cAAO,iBAAO7G,GAAP,CAAWgH,KAAKZ,IAAL,EAAX,CAAP;AACD,MAFc,CAAf;;AAIA,SAAIU,MAAM7F,OAAN,CAAc,GAAd,IAAqB,CAAzB,EAA4B;AAC1B,YAAK2D,IAAL,GAAY,GAAZ;AACA,YAAKvG,IAAL,GAAYyI,KAAZ;AACA,YAAKT,IAAL,CAAUnF,IAAV,CAAe,gBAAMlB,GAAN,CAAU8G,KAAV,CAAf;AACD,MAJD,MAIO;AACL;AACA,YAAKd,IAAL,GAAY,GAAZ;AACA,YAAKpB,IAAL,GAAY,GAAZ;;AAEA,WAAI6B,UAAUK,MAAMJ,KAAN,CAAY,oBAAZ,CAAd;;AAEA,YAAKrI,IAAL,GAAYoI,QAAQ,CAAR,EAAWL,IAAX,EAAZ;AACA,YAAKpB,EAAL,GAAU,gBAAMhF,GAAN,CAAU,KAAK3B,IAAf,CAAV;;AAEA,YAAKgI,IAAL,GAAYX,KAAKuB,QAAL,CAAcR,QAAQ,CAAR,CAAd,CAAZ;AACD;AACF;;;;4BAoBO7C,O,EAASsD,S,EAAW;AAC1B,WAAI,KAAKtC,IAAL,KAAc,GAAlB,EAAuB;AACrB,aAAIE,MAAM,KAAKuB,IAAL,CAAU,CAAV,EAAa9F,KAAb,CAAmBqD,OAAnB,EAA4BsD,SAA5B,CAAV;AACA,gBAAO,KAAKH,OAAL,CAAaI,MAAb,CAAoB,UAACrC,GAAD,EAAMsC,MAAN;AAAA,kBAAiBA,OAAOrD,MAAP,CAAce,GAAd,CAAjB;AAAA,UAApB,EAAyDA,GAAzD,CAAP;AACD;;AAED,WAAIE,KAAK,KAAKA,EAAL,CAAQzE,KAAR,CAAcqD,OAAd,EAAuBA,QAAQzE,cAA/B,CAAT;AACA,WAAI,OAAO6F,EAAP,KAAc,UAAlB,EAA8B;AAC5B,eAAM,IAAIqC,KAAJ,+BAAqCzD,QAAQzE,cAAR,CAAuBmI,QAAvB,IAAmC,YAAxE,UAAwF,KAAKjJ,IAA7F,CAAN;AACD;;AAED,WAAIgI,OAAO,KAAKA,IAAL,CAAUQ,GAAV,CAAc,eAAO;AAC9B,gBAAO1B,IAAI5E,KAAJ,CAAUqD,OAAV,EAAmBsD,SAAnB,CAAP;AACD,QAFU,CAAX;;AAIA,cAAOlC,GAAGuC,KAAH,CAAS3D,OAAT,EAAkByC,IAAlB,CAAP;AACD;;;yBAlCe;AACd,cAAO,KAAKzB,IAAL,KAAc,GAAd,IAAqB,KAAKM,MAAL,CAAYjC,MAAZ,KAAuB,KAAKoD,IAAL,CAAUpD,MAA7D;AACD;;;yBAEa;AAAA;;AACZ,WAAI,CAAC,KAAKuE,OAAV,EAAmB;AAAA;AACjB,eAAIlC,QAAQ,EAAZ;AACA,iBAAKe,IAAL,CAAU3F,OAAV,CAAkB,eAAO;AACvB,iBAAIyE,IAAIP,IAAJ,KAAa,GAAb,IAAoBU,MAAMrE,OAAN,CAAckE,IAAI9G,IAAlB,MAA4B,CAAC,CAArD,EAAwD;AACtDiH,qBAAMpE,IAAN,CAAWiE,GAAX;AACD;AACF,YAJD;AAKA,iBAAKqC,OAAL,GAAelC,KAAf;AAPiB;AAQlB;;AAED,cAAO,KAAKkC,OAAZ;AACD;;;;;;mBAqBY9B,I;;;;;;;;;;;;;;;;AClJf,KAAMG,QAAQ,IAAIC,GAAJ,EAAd;;KAEML,K;;;yBAKQpH,I,EAAM;AAChB,WAAIwH,MAAMK,GAAN,CAAU7H,IAAV,CAAJ,EAAqB;AACnB,gBAAOwH,MAAM7F,GAAN,CAAU3B,IAAV,CAAP;AACD;;AAED,WAAIyI,QAAQ,IAAIrB,KAAJ,CAAUpH,IAAV,CAAZ;AACAwH,aAAM9F,GAAN,CAAU1B,IAAV,EAAgByI,KAAhB;AACA,cAAOA,KAAP;AACD;;;yBAZmB;AAClB,cAAOjB,KAAP;AACD;;;AAYD,kBAAaxH,IAAb,EAAmB;AAAA;;AACjB,UAAKA,IAAL,GAAYA,IAAZ;AACA,UAAKoJ,MAAL,GAAc,IAAd;AACA,UAAK7C,IAAL,GAAY,GAAZ;;AAEA,SAAI,CAAC,KAAKvG,IAAL,CAAUqI,KAAV,CAAgB,YAAhB,CAAL,EAAoC;AAClC,WAAI;AACF,cAAKe,MAAL,GAAcC,KAAKC,KAAL,CAAW,KAAKtJ,IAAhB,CAAd;AACA,cAAKuG,IAAL,GAAY,GAAZ;AACD,QAHD,CAGE,OAAOgD,GAAP,EAAY,CACb;AACF;AACF;;;;2BAEMhE,O,EAASiE,M,EAAQ;AACtBjE,iBAAUA,WAAW7F,MAArB;;AAEA,WAAI,KAAK6G,IAAL,KAAc,GAAlB,EAAuB;AACrB,gBAAO,KAAK6C,MAAZ;AACD;;AAED,WAAI3C,MAAMgD,QAAQlE,OAAR,EAAiB,KAAKvF,IAAtB,CAAV;AACA,WAAI,OAAOyG,GAAP,KAAe,WAAnB,EAAgC;AAC9B,gBAAOA,GAAP;AACD;;AAEDA,aAAMgD,QAAQD,MAAR,EAAgB,KAAKxJ,IAArB,CAAN;AACA,WAAI,OAAOyG,GAAP,KAAe,WAAnB,EAAgC;AAC9B,gBAAOA,GAAP;AACD;;AAED;AACD;;;;;;AAGH,UAASgD,OAAT,CAAkBlE,OAAlB,EAA2B1B,GAA3B,EAAgC;AAC9B,OAAI0B,OAAJ,EAAa;AACX,YAAO,OAAOA,QAAQ5D,GAAf,KAAuB,UAAvB,GAAoC4D,QAAQ5D,GAAR,CAAYkC,GAAZ,CAApC,GAAuD0B,QAAQ1B,GAAR,CAA9D;AACD;AACF;;mBAEcuD,K;;;;;;;;;;;;;;;;KC1DTF,M;AACJ,mBAAalH,IAAb,EAAmB0J,QAAnB,EAA6Bb,SAA7B,EAAwC;AAAA;;AACtC,UAAK7I,IAAL,GAAYA,IAAZ;AACA,UAAK0J,QAAL,GAAgBA,QAAhB;AACA,UAAKb,SAAL,GAAiBA,SAAjB;AACD;;;;4BAEOpC,G,EAAK;AACX,WAAIuB,OAAO,CAACvB,GAAD,CAAX;AACA,UAAG5D,IAAH,CAAQqG,KAAR,CAAclB,IAAd,EAAoB,KAAKa,SAAzB;AACA,cAAO,KAAKa,QAAL,CAAcR,KAAd,CAAoB,IAApB,EAA0BlB,IAA1B,CAAP;AACD;;;yBAEWhI,I,EAAM0J,Q,EAAU;AAC1BC,gBAAS3J,IAAT,IAAiB0J,QAAjB;AACD;;;yBAEW1J,I,EAAM;AAChB,WAAI+G,WAAW/G,KAAKwE,KAAL,CAAW,GAAX,CAAf;AACA,WAAIwD,OAAOjB,SAAS6C,MAAT,CAAgB,CAAhB,CAAX;AACA,WAAI/F,MAAMkD,SAASxE,GAAT,EAAV;AACA,cAAO,IAAI2E,MAAJ,CAAWrD,GAAX,EAAgB8F,SAAS9F,GAAT,CAAhB,EAA+BmE,IAA/B,CAAP;AACD;;;;;;AAGH,KAAM2B,WAAW;AACfE,aAAU,kBAACpD,GAAD,EAAS;AACjB,SAAIA,QAAQzE,SAAR,IAAqByE,QAAQ,IAA7B,IAAqCA,QAAQ,EAAjD,EAAqD;AACnD,aAAM,IAAIuC,KAAJ,CAAU,mBAAV,CAAN;AACD;AACD,YAAOvC,GAAP;AACD,IANc;AAOfqD,UAAO,eAACrD,GAAD;AAAA,YAASsD,OAAOnJ,SAAP,CAAiBoJ,WAAjB,CAA6BhG,IAA7B,CAAkCyC,OAAO,EAAzC,CAAT;AAAA,IAPQ;AAQfwD,UAAO,eAACxD,GAAD;AAAA,YAASsD,OAAOnJ,SAAP,CAAiBsJ,WAAjB,CAA6BlG,IAA7B,CAAkCyC,OAAO,EAAzC,CAAT;AAAA,IARQ;AASf0D,QAAK,aAAC1D,GAAD;AAAA,YAAS,CAACA,GAAV;AAAA,IATU;AAUfrE,UAAO,eAACqE,GAAD,EAAM2D,KAAN,EAAaC,GAAb;AAAA,YAAqBC,MAAM1J,SAAN,CAAgBwB,KAAhB,CAAsB4B,IAAtB,CAA2ByC,OAAO,EAAlC,EAAsC2D,KAAtC,EAA6CC,GAA7C,CAArB;AAAA;AAVQ,EAAjB;;mBAaenD,M;;;;;;;;;;;;;;;;KCtCTqD,O;AACJ,oBAAahF,OAAb,EAAsBiF,KAAtB,EAA6B;AAAA;;AAC3B,UAAKjF,OAAL,GAAeA,OAAf;AACA,UAAKiF,KAAL,GAAaA,KAAb;AACA,UAAKvD,KAAL,GAAa,EAAb;AACA,UAAKL,WAAL,GAAmB,EAAnB;AACD;;;;gCAEW1E,K,EAAO;AAAA;;AACjB,YAAK0E,WAAL,CAAiBvE,OAAjB,CAAyB,sBAAc;AACrC;AACAqE,oBAAW+D,MAAX,CAAkBvI,KAAlB,EAAyB,MAAKsI,KAA9B;AACA;AACA;AACA;AACD,QAND;;AAQAE,cAAOC,IAAP,CAAY,KAAK1D,KAAjB,EAAwB5E,OAAxB,CAAgC,aAAK;AACnC,eAAK4E,KAAL,CAAWzF,CAAX,EAAcwB,UAAd,CAAyBd,QAAQA,MAAMV,CAAN,CAAR,GAAmBQ,SAA5C;AACD,QAFD;AAGD;;;;;;mBAGYuI,O;;;;;;;;;;;;;;;;;;;;;;KCvBTK,Y;;;yBACQtG,I,EAAMtE,I,EAAM;AACtB,WAAIsE,QAAQ,cAAcA,IAA1B,EAAgC;AAC9B,iBAAQA,KAAKO,QAAb;AACE,gBAAKnF,OAAOoF,IAAP,CAAYC,YAAjB;AACE,iBAAI/E,KAAK6K,QAAL,CAAc,GAAd,CAAJ,EAAwB;AACtB,sBAAO,IAAIC,iBAAJ,CAAsBxG,IAAtB,EAA4BtE,IAA5B,CAAP;AACD,cAFD,MAEO,IAAIA,SAAS,MAAb,EAAqB;AAC1B,sBAAO,IAAI+K,YAAJ,CAAiBzG,IAAjB,CAAP;AACD,cAFM,MAEA,IAAItE,SAAS,MAAb,EAAqB;AAC1B,sBAAO,IAAIgL,YAAJ,CAAiB1G,IAAjB,EAAuBtE,IAAvB,CAAP;AACD,cAFM,MAEA,IAAIA,SAAS,OAAT,IAAoBsE,KAAK2E,QAAL,KAAkB,OAA1C,EAAmD;AACxD,sBAAO,IAAIgC,aAAJ,CAAkB3G,IAAlB,CAAP;AACD;;AAED,iBAAItE,KAAKkL,UAAL,CAAgB,QAAhB,CAAJ,EAA+B;AAC7B,sBAAO,IAAIC,aAAJ,CAAkB7G,IAAlB,EAAwBtE,KAAKwE,KAAL,CAAW,GAAX,EAAgBoF,MAAhB,CAAuB,CAAvB,EAA0BnF,IAA1B,CAA+B,GAA/B,CAAxB,CAAP;AACD,cAFD,MAEO,IAAIzE,KAAKkL,UAAL,CAAgB,QAAhB,CAAJ,EAA+B;AACpC,sBAAO,IAAIE,aAAJ,CAAkB9G,IAAlB,EAAwBtE,KAAKwE,KAAL,CAAW,GAAX,EAAgBoF,MAAhB,CAAuB,CAAvB,EAA0BnF,IAA1B,CAA+B,GAA/B,CAAxB,CAAP;AACD;;AAED,oBAAO,IAAImG,YAAJ,CAAiBtG,IAAjB,EAAuBtE,IAAvB,CAAP;AACF,gBAAKN,OAAOoF,IAAP,CAAYG,SAAjB;AACE,iBAAIX,KAAKnB,aAAL,IAAsBmB,KAAKnB,aAAL,CAAmB8F,QAAnB,KAAgC,UAA1D,EAAsE;AACpE,sBAAO,IAAIgC,aAAJ,CAAkB3G,KAAKnB,aAAvB,CAAP;AACD;;AAED,oBAAO,IAAI4H,YAAJ,CAAiBzG,IAAjB,CAAP;AACF;AACE,mBAAM,IAAI0E,KAAJ,qDAA4D1E,KAAKO,QAAjE,CAAN;AA1BJ;AA4BD,QA7BD,MA6BO;AACL,gBAAO,IAAI+F,YAAJ,CAAiBtG,IAAjB,EAAuBtE,IAAvB,CAAP;AACD;AACF;;;AAED,yBAAasE,IAAb,EAAmBtE,IAAnB,EAAyB;AAAA;;AACvB,UAAKsE,IAAL,GAAYA,IAAZ;AACA,UAAKtE,IAAL,GAAYA,IAAZ;AACD;;;;yBAEIkC,K,EAAO;AACV,WAAI,OAAO,KAAKoC,IAAL,CAAU5C,GAAjB,KAAyB,UAA7B,EAAyC;AACvC,cAAK4C,IAAL,CAAU5C,GAAV,CAAc,KAAK1B,IAAnB,EAAyBkC,KAAzB;AACD,QAFD,MAEO;AACL,cAAKoC,IAAL,CAAU,KAAKtE,IAAf,IAAuBkC,KAAvB;AACD;AACF;;;2BAEM;AACL,WAAI,OAAO,KAAKoC,IAAL,CAAU3C,GAAjB,KAAyB,UAA7B,EAAyC;AACvC,gBAAO,KAAK2C,IAAL,CAAU3C,GAAV,CAAc,KAAK3B,IAAnB,CAAP;AACD,QAFD,MAEO;AACL,gBAAO,KAAKsE,IAAL,CAAU,KAAKtE,IAAf,CAAP;AACD;AACF;;;;;;KAGG+K,Y;;;AACJ,yBAAazG,IAAb,EAAmB;AAAA;;AAAA,wHACXA,IADW,EACL,aADK;AAElB;;;;yBAEIpC,K,EAAO;AACV,YAAKoC,IAAL,CAAU+B,WAAV,GAAwB,OAAOnE,KAAP,KAAiB,WAAjB,GAA+B,EAA/B,GAAoCA,KAA5D;AACD;;;;GAPwB0I,Y;;KAUrBO,a;;;;;;;;;;;yBACCjJ,K,EAAO;AACV,WAAIA,KAAJ,EAAW;AACT,cAAKoC,IAAL,CAAU+G,SAAV,CAAoBC,GAApB,CAAwB,KAAKtL,IAA7B;AACD,QAFD,MAEO;AACL,cAAKsE,IAAL,CAAU+G,SAAV,CAAoBE,MAApB,CAA2B,KAAKvL,IAAhC;AACD;AACF;;;2BAEM;AACL,aAAM,IAAIgJ,KAAJ,CAAU,eAAV,CAAN;AACD;;;;GAXyB4B,Y;;KActBQ,a;;;;;;;;;;;yBACClJ,K,EAAO;AACV,YAAKoC,IAAL,CAAUkH,KAAV,CAAgB,KAAKxL,IAArB,IAA6BkC,SAAS,EAAtC;AACD;;;2BAEM;AACL,aAAM,IAAI8G,KAAJ,CAAU,eAAV,CAAN;AACD;;;;GAPyB4B,Y;;KAUtBI,Y;;;;;;;;;;;yBACC9I,K,EAAO;AACV,YAAKoC,IAAL,CAAUmH,SAAV,GAAsB,OAAOvJ,KAAP,KAAiB,WAAjB,GAA+B,EAA/B,GAAoCA,KAA1D;AACD;;;2BAEM;AACL,cAAO,KAAKoC,IAAL,CAAUmH,SAAjB;AACD;;;;GAPwBb,Y;;KAUrBK,a;;;AACJ,0BAAa3G,IAAb,EAAmB;AAAA;;AAAA,0HACXA,IADW,EACL,OADK;AAElB;;;;yBAEIpC,K,EAAO;AACV,WAAIvC,SAAS+L,aAAT,KAA2B,KAAKpH,IAApC,EAA0C;AACxC,2HAAU,OAAOpC,KAAP,KAAiB,WAAjB,GAA+B,EAA/B,GAAoCA,KAA9C;AACD;AACF;;;;GATyB0I,Y;;KAYtBE,iB;;;AACJ,8BAAaxG,IAAb,EAAmBtE,IAAnB,EAAyB;AAAA;;AAAA,kIACjBsE,IADiB,EACXtE,KAAKoC,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CADW;AAExB;;;;yBAEIF,K,EAAO;AACV,WAAIA,KAAJ,EAAW;AACT,cAAKoC,IAAL,CAAUqH,YAAV,CAAuB,KAAK3L,IAA5B,EAAkCkC,KAAlC;AACD,QAFD,MAEO;AACL,cAAKoC,IAAL,CAAUsH,eAAV,CAA0B,KAAK5L,IAA/B;AACD;AACF;;;2BAEM;AACL,cAAO,KAAKsE,IAAL,CAAUrE,YAAV,CAAuB,KAAKD,IAA5B,CAAP;AACD;;;;GAf6B4K,Y;;mBAkBjBA,Y;;;;;;;;;;;;;;;;KCpITiB,U;AACJ,uBAAarB,KAAb,EAAoBhF,IAApB,EAA0Bc,QAA1B,EAAoC;AAAA;;AAClC,UAAKkE,KAAL,GAAaA,KAAb;AACA,UAAKhF,IAAL,GAAYA,IAAZ;AACA,UAAKc,QAAL,GAAgBA,QAAhB;AACD;;;;4BAEOpE,K,EAAO;AACb,WAAI,KAAKoE,QAAT,EAAmB;AACjB,aAAIpE,SAAQ,KAAKsD,IAAL,CAAUE,MAAV,CAAiB,KAAK8E,KAAtB,CAAZ;AACA;AACA,cAAKlE,QAAL,CAAc5E,GAAd,CAAkBQ,MAAlB;AACD,QAJD,MAIO;AACL,cAAKsD,IAAL,CAAUE,MAAV,CAAiB,KAAK8E,KAAtB;AACD;AACF;;;;;;mBAGYqB,U;;;;;;;;;;;AClBf,KAAIC,iBAAJ;AACA,KAAIC,SAAS,CAAb;AACA,KAAIC,MAAM,CAAV;AACA,KAAIC,YAAY,EAAhB;AACA,KAAIC,sBAAsB,EAA1B;;AAEA,UAASC,SAAT,CAAoBC,SAApB,EAA+B7F,IAA/B,EAAqCmD,QAArC,EAA+C;AAC3C;AACA;AACF,OAAI2C,aAAa9F,SAAS,MAAT,IAAmBA,SAAS,OAA7C;AACA6F,aAAUrM,OAAV,CAAkBuM,gBAAlB,CAAmC/F,IAAnC,EAAyCmD,QAAzC,EAAmD2C,UAAnD;AACD;;AAED,UAASE,OAAT,CAAkBC,CAAlB,EAAqB;AACnBA,KAAEC,cAAF;AACAD,KAAEE,eAAF;AACD;;AAED;;;;;;AAMA,UAASC,WAAT,CAAsB5M,OAAtB,EAA+B;AAC7B,OAAI+L,QAAJ,EAAc;AACZ,YAAOA,QAAP;AACD;;AAED,OAAI/L,QAAQqI,OAAZ,EAAqB;AACnB0D,gBAAW/L,QAAQqI,OAAnB;AACA,YAAO0D,QAAP;AACD;;AAED,OAAI/L,QAAQ6M,qBAAZ,EAAmC;AACjCd,gBAAW/L,QAAQ6M,qBAAnB;AACA,YAAOd,QAAP;AACD;;AAED,OAAI/L,QAAQ8M,kBAAZ,EAAgC;AAC9Bf,gBAAW/L,QAAQ8M,kBAAnB;AACA,YAAOf,QAAP;AACD;;AAED,OAAI/L,QAAQ+M,iBAAZ,EAA+B;AAC7BhB,gBAAW/L,QAAQ+M,iBAAnB;AACA,YAAOhB,QAAP;AACD;;AAED,OAAI/L,QAAQgN,gBAAZ,EAA8B;AAC5BjB,gBAAW/L,QAAQgN,gBAAnB;AACA,YAAOjB,QAAP;AACD;;AAEC;AACA;AACFA,cAAWkB,eAAeC,eAA1B;AACA,UAAOnB,QAAP;AACD;;AAED;;;;;;;;AAQA,UAASoB,gBAAT,CAA2BnN,OAA3B,EAAoCkB,QAApC,EAA8CkM,YAA9C,EAA4D;AACxD;AACF,OAAIlM,aAAa,OAAjB,EAA0B;AACxB,YAAOkM,YAAP;AACD;;AAEC;AACA;AACF,OAAIpN,YAAYoN,YAAhB,EAA8B;AAC5B;AACD;;AAEC;AACF,OAAIR,YAAY5M,OAAZ,EAAqBiE,IAArB,CAA0BjE,OAA1B,EAAmCkB,QAAnC,CAAJ,EAAkD;AAChD,YAAOlB,OAAP;AACD;;AAEC;AACA;AACA;AACA;AACA;AACF,OAAIA,QAAQqN,UAAZ,EAAwB;AACtBrB;AACA,YAAOmB,iBAAiBnN,QAAQqN,UAAzB,EAAqCnM,QAArC,EAA+CkM,YAA/C,CAAP;AACD;AACF;;AAED,UAASE,WAAT,CAAsBjB,SAAtB,EAAiCkB,KAAjC,EAAwCrM,QAAxC,EAAkDyI,QAAlD,EAA4D;AAC1D,OAAI,CAACuC,UAAUG,UAAUmB,EAApB,CAAL,EAA8B;AAC5BtB,eAAUG,UAAUmB,EAApB,IAA0B,EAA1B;AACD;;AAED,OAAI,CAACtB,UAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,CAAL,EAAqC;AACnCrB,eAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,IAAiC,EAAjC;AACD;;AAED,OAAI,CAACrB,UAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,CAAL,EAA+C;AAC7CgL,eAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,IAA2C,EAA3C;AACD;;AAEDgL,aAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,EAAyC4B,IAAzC,CAA8C6G,QAA9C;AACD;;AAED,UAAS8D,cAAT,CAAyBpB,SAAzB,EAAoCkB,KAApC,EAA2CrM,QAA3C,EAAqDyI,QAArD,EAA+D;AAC3D;AACA;AACF,OAAI,CAACuC,UAAUG,UAAUmB,EAApB,CAAL,EAA8B;AAC5B;AACD;;AAEC;AACA;AACF,OAAI,CAACD,KAAL,EAAY;AACV,UAAK,IAAI/G,IAAT,IAAiB0F,UAAUG,UAAUmB,EAApB,CAAjB,EAA0C;AACxC,WAAItB,UAAUG,UAAUmB,EAApB,EAAwB9L,cAAxB,CAAuC8E,IAAvC,CAAJ,EAAkD;AAChD0F,mBAAUG,UAAUmB,EAApB,EAAwBhH,IAAxB,IAAgC,EAAhC;AACD;AACF;AACD;AACD;;AAEC;AACA;AACF,OAAI,CAACmD,QAAD,IAAa,CAACzI,QAAlB,EAA4B;AAC1BgL,eAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,IAAiC,EAAjC;AACA;AACD;;AAEC;AACA;AACA;AACF,OAAI,CAAC5D,QAAL,EAAe;AACb,YAAOuC,UAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,CAAP;AACA;AACD;;AAEC;AACA;AACA;AACF,OAAI,CAACgL,UAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,CAAL,EAA+C;AAC7C;AACD;;AAEC;AACA;AACF,QAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIyK,UAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,EAAyC2D,MAA7D,EAAqEpD,GAArE,EAA0E;AACxE,SAAIyK,UAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,EAAyCO,CAAzC,MAAgDkI,QAApD,EAA8D;AAC5DuC,iBAAUG,UAAUmB,EAApB,EAAwBD,KAAxB,EAA+BrM,QAA/B,EAAyC2I,MAAzC,CAAgDpI,CAAhD,EAAmD,CAAnD;AACA;AACD;AACF;AACF;;AAED,UAASiM,YAAT,CAAuBF,EAAvB,EAA2Bf,CAA3B,EAA8BjG,IAA9B,EAAoC;AAClC,OAAI,CAAC0F,UAAUsB,EAAV,EAAchH,IAAd,CAAL,EAA0B;AACxB;AACD;;AAED,OAAImH,SAASlB,EAAEkB,MAAF,IAAYlB,EAAEmB,UAA3B;AACA,OAAI1M,iBAAJ;AACA,OAAIoH,cAAJ;AACA,OAAID,UAAU,EAAd;AACA,OAAI5G,IAAI,CAAR;AACA,OAAIoM,IAAI,CAAR;;AAEE;AACF7B,YAAS,CAAT;AACA,QAAK9K,QAAL,IAAiBgL,UAAUsB,EAAV,EAAchH,IAAd,CAAjB,EAAsC;AACpC,SAAI0F,UAAUsB,EAAV,EAAchH,IAAd,EAAoB9E,cAApB,CAAmCR,QAAnC,CAAJ,EAAkD;AAChDoH,eAAQ6E,iBAAiBQ,MAAjB,EAAyBzM,QAAzB,EAAmCiL,oBAAoBqB,EAApB,EAAwBxN,OAA3D,CAAR;;AAEA,WAAIsI,SAAS2E,eAAea,YAAf,CAA4BtH,IAA5B,EAAkC2F,oBAAoBqB,EAApB,EAAwBxN,OAA1D,EAAmEsI,KAAnE,EAA0EpH,aAAa,OAAvF,EAAgGuL,CAAhG,CAAb,EAAiH;AAC/GT;AACAE,mBAAUsB,EAAV,EAAchH,IAAd,EAAoBtF,QAApB,EAA8BoH,KAA9B,GAAsCA,KAAtC;AACAD,iBAAQ2D,MAAR,IAAkBE,UAAUsB,EAAV,EAAchH,IAAd,EAAoBtF,QAApB,CAAlB;AACD;AACF;AACF;;AAEC;AACA;AACFuL,KAAEE,eAAF,GAAoB,YAAY;AAC9BF,OAAEsB,YAAF,GAAiB,IAAjB;AACD,IAFD;;AAIA,QAAKtM,IAAI,CAAT,EAAYA,KAAKuK,MAAjB,EAAyBvK,GAAzB,EAA8B;AAC5B,SAAI4G,QAAQ5G,CAAR,CAAJ,EAAgB;AACd,YAAKoM,IAAI,CAAT,EAAYA,IAAIxF,QAAQ5G,CAAR,EAAWoD,MAA3B,EAAmCgJ,GAAnC,EAAwC;AACtC,aAAIxF,QAAQ5G,CAAR,EAAWoM,CAAX,EAAc5J,IAAd,CAAmBoE,QAAQ5G,CAAR,EAAW6G,KAA9B,EAAqCmE,CAArC,MAA4C,KAAhD,EAAuD;AACrDQ,0BAAee,MAAf,CAAsBvB,CAAtB;AACA;AACD;;AAED,aAAIA,EAAEsB,YAAN,EAAoB;AAClB;AACD;AACF;AACF;AACF;AACF;;AAED,KAAIP,KAAK,CAAT;AACA,UAAS/N,MAAT,GAAmB;AACjB,UAAO+N,IAAP;AACD;;AAED,KAAMS,UAAU,IAAIvG,GAAJ,EAAhB;AACA,KAAMwG,2BAA2B,SAA3BA,wBAA2B;AAAA,UAAS,CAAEjO,IAAF,CAAT;AAAA,EAAjC;AACA,KAAMkO,qBAAqB;AACzBC,gBADyB,yBACVnO,IADU,EACJ;AACnB,SAAIoO,KAAKzO,SAASC,aAAT,CAAuB,aAAvB,CAAT;AACA,SAAIyO,cAAc;AAChB,sBAAe,gBADC;AAEhB,wBAAiB,eAFD;AAGhB,2BAAoB,qBAHJ;AAIhB,qBAAc;AAJE,MAAlB;;AAOA,UAAK,IAAIC,CAAT,IAAcD,WAAd,EAA2B;AACzB,WAAID,GAAG5C,KAAH,CAAS8C,CAAT,MAAgBtM,SAApB,EAA+B;AAC7B,gBAAO,CAACqM,YAAYC,CAAZ,CAAD,CAAP;AACD;AACF;AACF;AAfwB,EAA3B;;AAkBA,UAASC,QAAT,CAAmBvO,IAAnB,EAAyB;AACvB,OAAIwO,mBAAJ;AACA,OAAIR,QAAQnG,GAAR,CAAY7H,IAAZ,CAAJ,EAAuB;AACrBwO,kBAAaR,QAAQrM,GAAR,CAAY3B,IAAZ,CAAb;AACD,IAFD,MAEO;AACL,SAAIyO,aAAaP,mBAAmBlO,IAAnB,KAA4BiO,wBAA7C;AACAO,kBAAaC,WAAWzO,IAAX,CAAb;AACAgO,aAAQtM,GAAR,CAAY1B,IAAZ,EAAkBwO,UAAlB;AACD;;AAED,UAAOA,UAAP;AACD;;AAED;;;;;;;;;AASA,UAASE,KAAT,CAAgBC,MAAhB,EAAwB1N,QAAxB,EAAkCyI,QAAlC,EAA4C6B,MAA5C,EAAoD;AAAA;;AAChD;AACA;AACF,OAAI,CAAC,KAAKxL,OAAV,EAAmB;AACjB;AACD;;AAED,OAAI,EAAE4O,kBAAkBrE,KAApB,CAAJ,EAAgC;AAC9BqE,cAAS,CAACA,MAAD,CAAT;AACD;;AAED,OAAI,CAACjF,QAAD,IAAa,OAAQzI,QAAR,KAAsB,UAAvC,EAAmD;AACjDyI,gBAAWzI,QAAX;AACAA,gBAAW,OAAX;AACD;;AAED,OAAIA,oBAAoBvB,OAAOkP,WAA/B,EAA4C;AAC1C,SAAIrB,aAAJ;AACA,SAAItM,SAAS4N,YAAT,CAAsB,cAAtB,CAAJ,EAA2C;AACzCtB,cAAKtM,SAAShB,YAAT,CAAsB,cAAtB,CAAL;AACD,MAFD,MAEO;AACLsN,cAAK/N,QAAL;AACAyB,gBAAS0K,YAAT,CAAsB,cAAtB,EAAsC4B,IAAtC;AACD;AACDtM,oCAA6BsM,IAA7B;AACD;;AAED,OAAIA,KAAK,KAAKA,EAAd;AACA,OAAI/L,UAAJ;;AAEA,YAASsN,kBAAT,CAA6BvI,IAA7B,EAAmC;AACjC,YAAO,UAAUiG,CAAV,EAAa;AAClBiB,oBAAaF,EAAb,EAAiBf,CAAjB,EAAoBjG,IAApB;AACD,MAFD;AAGD;;AAED,QAAK/E,IAAI,CAAT,EAAYA,IAAImN,OAAO/J,MAAvB,EAA+BpD,GAA/B,EAAoC;AAClC+M,cAASI,OAAOnN,CAAP,CAAT,EAAoBa,OAApB,CAA4B,iBAAS;AACnC;AACA,WAAIkJ,MAAJ,EAAY;AACViC,+BAAqBuB,KAArB,EAA4B9N,QAA5B,EAAsCyI,QAAtC;AACA;AACD;;AAED,WAAI,CAACuC,UAAUsB,EAAV,CAAD,IAAkB,CAACtB,UAAUsB,EAAV,EAAcwB,KAAd,CAAvB,EAA6C;AAC3C/B,wBAAegC,QAAf,QAA8BD,KAA9B,EAAqCD,mBAAmBC,KAAnB,CAArC;AACD;;AAED1B,0BAAkB0B,KAAlB,EAAyB9N,QAAzB,EAAmCyI,QAAnC;AACD,MAZD;AAaD;;AAED,UAAO,IAAP;AACD;;AAED;;;;;AAKA,UAASsD,cAAT,CAAyBjN,OAAzB,EAAkCwN,EAAlC,EAAsC;AAClC;AACF,OAAI,EAAE,gBAAgBP,cAAlB,CAAJ,EAAuC;AACjC;AACA;AACA;AACA;AACA;AACJ,UAAK,IAAInJ,GAAT,IAAgBqI,mBAAhB,EAAqC;AACnC,WAAIA,oBAAoBrI,GAApB,EAAyB9D,OAAzB,KAAqCA,OAAzC,EAAkD;AAChD,gBAAOmM,oBAAoBrI,GAApB,CAAP;AACD;AACF;;AAEDmI;AACAE,yBAAoBF,GAApB,IAA2B,IAAIgB,cAAJ,CAAmBjN,OAAnB,EAA4BiM,GAA5B,CAA3B;;AAEA,YAAOE,oBAAoBF,GAApB,CAAP;AACD;;AAED,QAAKjM,OAAL,GAAeA,OAAf;AACA,QAAKwN,EAAL,GAAUA,EAAV;AACD;;AAED;;;;;;;;AAQAP,gBAAepM,SAAf,CAAyBO,EAAzB,GAA8B,UAAUwN,MAAV,EAAkB1N,QAAlB,EAA4ByI,QAA5B,EAAsC;AAClE,UAAOgF,MAAM1K,IAAN,CAAW,IAAX,EAAiB2K,MAAjB,EAAyB1N,QAAzB,EAAmCyI,QAAnC,CAAP;AACD,EAFD;;AAIA;;;;;;;;AAQAsD,gBAAepM,SAAf,CAAyBS,GAAzB,GAA+B,UAAUsN,MAAV,EAAkB1N,QAAlB,EAA4ByI,QAA5B,EAAsC;AACnE,UAAOgF,MAAM1K,IAAN,CAAW,IAAX,EAAiB2K,MAAjB,EAAyB1N,QAAzB,EAAmCyI,QAAnC,EAA6C,IAA7C,CAAP;AACD,EAFD;;AAIAsD,gBAAepM,SAAf,CAAyBqO,IAAzB,GAAgC,UAAU1I,IAAV,EAAgB2I,MAAhB,EAAwBC,OAAxB,EAAiC;AAC/DA,aAAUA,WAAW,EAArB;AACAD,YAASA,UAAU,EAAnB;;AAEA,OAAIvJ,YAAJ;AACA,OAAIyJ,UAAUD,QAAQC,OAAR,KAAoBpN,SAApB,GAAgC,IAAhC,GAAuCmN,QAAQC,OAA7D;AACA,OAAIC,aAAaC,QAAQH,QAAQE,UAAhB,CAAjB;;AAEA,WAAQ9I,IAAR;AACE,UAAK,OAAL;AACEZ,aAAM,IAAIjG,OAAO4H,KAAX,CAAiBf,IAAjB,EAAuB;AAC3B6I,kBAASA,OADkB;AAE3BC,qBAAYA;AAFe,QAAvB,CAAN;;AAKA;AACA;AACA;AACA;AACF;AACE1J,aAAM,IAAIjG,OAAO6P,WAAX,CAAuBhJ,IAAvB,EAA6B;AACjC6I,kBAASE,QAAQF,OAAR,CADwB;AAEjCC,qBAAYA,UAFqB;AAGjCH,iBAAQA;AAHyB,QAA7B,CAAN;AAKA;AAjBJ;;AAoBA,QAAKnP,OAAL,CAAayP,aAAb,CAA2B7J,GAA3B;;AAEA,UAAOA,GAAP;AACD,EA/BD;;AAiCAqH,gBAAeC,eAAf,GAAiC,YAAY,CAAE,CAA/C;AACAD,gBAAee,MAAf,GAAwBxB,OAAxB;AACAS,gBAAegC,QAAf,GAA0B7C,SAA1B;AACAa,gBAAegB,OAAf,GAAyBO,QAAzB;AACAvB,gBAAea,YAAf,GAA8B,YAAY;AACxC,UAAO,IAAP;AACD,EAFD;;AAIA,KAAI,OAAO4B,MAAP,KAAkB,WAAlB,IAAiCA,OAAOC,OAA5C,EAAqD;AACnDD,UAAOC,OAAP,GAAiB1C,cAAjB;AACD;;mBAEcA,c;;;;;;;;;;;;;;AC1Zf,UAAS2C,SAAT,CAAoBzN,KAApB,EAA2B;AACzB,kBAAeA,KAAf,yCAAeA,KAAf;AACE,UAAK,SAAL;AACE,cAAOA,QAAQ,EAAR,GAAaF,SAApB;;AAEF,UAAK,QAAL;AACE,WAAIE,iBAAiB0N,IAArB,EAA2B;AACzB,gBAAO1N,KAAP;AACD,QAFD,MAEO,IAAIA,iBAAiB2N,MAArB,EAA6B;AAClC,gBAAO3N,MAAM4N,QAAN,GAAiB1N,KAAjB,CAAuB,CAAvB,EAA0B,CAAC,CAA3B,CAAP;AACD,QAFM,MAEA,IAAIF,KAAJ,EAAW;AAChB,aAAI;AACF,kBAAOmH,KAAK0G,SAAL,CAAe7N,KAAf,CAAP;AACD,UAFD,CAEE,OAAOqH,GAAP,EAAY;AACZ,kBAAO,EAAP;AACD;AACF;AACD;AACF;AACE;AAlBJ;AAoBA,UAAOrH,UAAU,IAAV,GAAiBF,SAAjB,GAA6BE,KAApC;AACD;;AAED,UAASqF,WAAT,CAAsBrF,KAAtB,EAA6BqE,IAA7B,EAAmC;AACjC,WAAQA,IAAR;AACE,UAAKyJ,MAAL;AACE9N,eAAQ8N,OAAO9N,KAAP,CAAR;AACA;;AAEF,UAAKoN,OAAL;AACEpN,eAAQoN,QAAQpN,UAAU,EAAV,IAAgBA,UAAU,MAA1B,IAAoCA,UAAU,GAA9C,IAAqDA,UAAU,IAAvE,CAAR;AACA;;AAEF,UAAKwI,MAAL;AACE,WAAI;AACFxI,iBAAQmH,KAAKC,KAAL,CAAWpH,KAAX,CAAR;AACD,QAFD,CAEE,OAAOqH,GAAP,EAAY;AACZ;AACA;AACD;AACD;;AAEF,UAAKe,KAAL;AACE,WAAI;AACFpI,iBAAQmH,KAAKC,KAAL,CAAWpH,KAAX,CAAR;AACD,QAFD,CAEE,OAAOqH,GAAP,EAAY;AACZ;AACArH,iBAAQ,IAAR;AACD;AACD;;AAEF,UAAK0N,IAAL;AACE1N,eAAQ,IAAI0N,IAAJ,CAAS1N,KAAT,CAAR;AACA;;AAEF,UAAK2N,MAAL;AACE3N,eAAQ,IAAI2N,MAAJ,CAAW3N,KAAX,CAAR;AACA;;AAEF,UAAK+N,QAAL;AACE/N,eAAQ,IAAI+N,QAAJ,CAAa/N,KAAb,CAAR,CADF,CAC+B;AAC7B;;AAEF;AACA;AACA;AACE;AA1CJ;AA4CA,UAAOA,KAAP;AACD;;SAEQyN,S,GAAAA,S;SAAWpI,W,GAAAA,W","file":"t.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ef9e011f9c33dc6353f1","import Expr from './expr';\nimport Binding from './binding';\nimport Accessor from './accessor';\nimport Annotation from './annotation';\nimport Filter from './filter';\nimport Token from './token';\nimport Event from './event';\nimport { deserialize } from './serializer';\n\nlet templateId = 0;\nfunction nextId () {\n  return templateId++;\n}\n\nconst SLOT_SUPPORTED = (typeof window === 'undefined')\n  ? false\n  : 'HTMLUnknownElement' in window && !(document.createElement('slot') instanceof window.HTMLUnknownElement);\n\nfunction slotName (element) {\n  return SLOT_SUPPORTED ? element.name : element.getAttribute('name');\n}\n\nfunction fixTemplate (template) {\n  if (!template.content && window.HTMLTemplateElement && window.HTMLTemplateElement.decorate) {\n    window.HTMLTemplateElement.decorate(template);\n  }\n  return template;\n}\n\nfunction T (template, host, marker) {\n  this.__templateInitialize(template, host, marker);\n  this.__templateRender();\n}\n\nT.prototype = {\n  get $ () {\n    return this.__templateHost.getElementsByTagName('*');\n  },\n\n  $$ (selector) {\n    return this.querySelector(selector);\n  },\n\n  on () {\n    Event(this.__templateHost).on(...arguments);\n  },\n\n  off () {\n    Event(this.__templateHost).off(...arguments);\n  },\n\n  all (obj) {\n    for (let i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        this.set(i, obj[i]);\n      }\n    }\n  },\n\n  get (path) {\n    let object = this;\n\n    this.__templateGetPathAsArray(path).some(segment => {\n      if (object === undefined || object === null) {\n        object = undefined;\n        return true;\n      }\n\n      object = object[segment];\n      return false;\n    });\n\n    return object;\n  },\n\n  set (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    let oldValue = this.get(path);\n\n    if (value === oldValue) {\n      return;\n    }\n\n    let object = this;\n\n    path.slice(0, -1).forEach(segment => {\n      if (!object) {\n        return;\n      }\n      if (object[segment] === undefined || object[segment] === null) {\n        object[segment] = {};\n      }\n\n      object = object[segment];\n    });\n\n    let property = path.slice(-1).pop();\n\n    object[property] = value;\n\n    this.notify(path, value);\n  },\n\n  notify (path, value) {\n    path = this.__templateGetPathAsString(path);\n\n    if (!this.__templateReady) {\n      if (this.__templateNotifyOnReady.indexOf(path) === -1) {\n        this.__templateNotifyOnReady.push(path);\n      }\n      return;\n    }\n\n    // try {\n    let binding = this.__templateGetBinding(path);\n    if (binding) {\n      if (typeof value === 'undefined') {\n        value = this.get(path);\n      }\n\n      binding.walkEffect(value);\n    }\n    // } catch (err) {\n    //   console.warn(`#notify caught error: ${err.message}\\n Stack trace: ${err.stack}`);\n    // }\n  },\n\n  __templateInitialize (template, host, marker) {\n    this.__templateId = nextId();\n    this.__templateBindings = {};\n    this.__templateHost = host || (template ? template.parentElement : null);\n    this.__templateMarker = marker;\n\n    this.__templateReady = false;\n    this.__templateNotifyOnReady = [];\n\n    if (!template) {\n      return;\n    }\n\n    // do below only if template is exists\n    this.__template = fixTemplate(template);\n    this.__templateChildNodes = [];\n\n    this.__templateFragment = document.importNode(this.__template.content, true);\n    this.__parseAnnotations();\n\n    if (marker) {\n      return;\n    }\n\n    if (this.__template.parentElement === this.__templateHost) {\n      // when template parent is template host, it means that template is specific template\n      // then use template as marker\n      this.__templateMarker = this.__template;\n    } else {\n      // when template is not child of host, put marker to host\n      this.__templateMarker = document.createComment(`marker-${this.__templateId}`);\n      this.__templateHost.appendChild(this.__templateMarker);\n    }\n  },\n\n  __templateRender (contentFragment) {\n    this.__templateReady = true;\n\n    if (!this.__template) {\n      return;\n    }\n\n    this.__templateNotifyOnReady.forEach(key => this.notify(key, this.get(key)));\n    this.__templateNotifyOnReady = [];\n\n    let fragment = this.__templateFragment;\n    this.__templateFragment = null;\n\n    if (contentFragment && contentFragment instanceof window.DocumentFragment) {\n      // try {\n      [].forEach.call(fragment.querySelectorAll('slot'), slot => {\n        let name = slotName(slot);\n        let parent = slot.parentElement || fragment;\n        let marker = document.createComment(`slot ${name}`);\n\n        parent.insertBefore(marker, slot);\n        parent.removeChild(slot);\n\n        if (name) {\n          let node = contentFragment.querySelectorAll(`[slot=\"${name}\"]`);\n          [].forEach.call(node, (node) => {\n            parent.insertBefore(node, marker);\n          });\n        } else {\n          parent.insertBefore(contentFragment, marker);\n        }\n      });\n    }\n\n    this.__templateMarker.parentElement.insertBefore(fragment, this.__templateMarker);\n  },\n\n  __templateUninitialize () {\n    this.__templateChildNodes.forEach(node => {\n      node.parentElement.removeChild(node);\n    });\n  },\n\n  __templateGetPathAsArray (path) {\n    // if (!path) {\n    //   throw new Error(`Unknown path ${path} to set to ${this.is}`);\n    // }\n\n    if (typeof path !== 'string') {\n      return path;\n    }\n\n    return path.split('.');\n  },\n\n  __templateGetPathAsString (path) {\n    if (typeof path === 'string') {\n      return path;\n    }\n\n    return path.join('.');\n  },\n\n  __parseAnnotations () {\n    this.__templateChildNodes = [ ...this.__templateFragment.childNodes ];\n\n    let len = this.__templateChildNodes.length;\n\n    for (let i = 0; i < len; i++) {\n      let node = this.__templateChildNodes[i];\n\n      switch (node.nodeType) {\n        case window.Node.ELEMENT_NODE:\n          this.__parseElementAnnotations(node);\n          break;\n        case window.Node.TEXT_NODE:\n          this.__parseTextAnnotations(node);\n          break;\n      }\n    }\n  },\n\n  __parseEventAnnotations (element, attrName) {\n    // bind event annotation\n    let attrValue = element.getAttribute(attrName);\n    let eventName = attrName.slice(1, -1);\n    // let eventName = attrName.substr(3);\n    if (eventName === 'tap') {\n      eventName = 'click';\n    }\n\n    let context = this;\n    let expr = Expr.getFn(attrValue, [], true);\n\n    this.on(eventName, element, evt => {\n      expr.invoke(context, { evt });\n    });\n  },\n\n  __parseAttributeAnnotations (element) {\n    // clone attributes to array first then foreach because we will remove\n    // attribute later if already processed\n    // this hack to make sure when attribute removed the attributes index doesnt shift.\n    let annotated = false;\n\n    let len = element.attributes.length;\n\n    for (let i = 0; i < len; i++) {\n      let attr = element.attributes[i];\n\n      let attrName = attr.name;\n\n      if (attrName.indexOf('(') === 0) {\n        this.__parseEventAnnotations(element, attrName);\n      } else {\n        // bind property annotation\n        annotated = this.__templateAnnotate(Expr.get(attr.value), Accessor.get(element, attrName)) || annotated;\n      }\n    }\n\n    return annotated;\n  },\n\n  __parseElementAnnotations (element) {\n    let annotated = false;\n\n    let scoped = element.__templateModel;\n\n    if (scoped) {\n      return annotated;\n    }\n\n    element.__templateModel = this;\n\n    if (element.attributes && element.attributes.length) {\n      annotated = this.__parseAttributeAnnotations(element) || annotated;\n    }\n\n    if (element.childNodes && element.childNodes.length) {\n      let childNodes = [].slice.call(element.childNodes);\n      let childNodesLength = childNodes.length;\n\n      for (let i = 0; i < childNodesLength; i++) {\n        annotated = this.__parseNodeAnnotations(childNodes[i]) || annotated;\n      }\n    }\n\n    [].forEach.call(element.getElementsByTagName('slot'), slot => {\n      [].forEach.call(slot.childNodes, node => {\n        annotated = this.__parseNodeAnnotations(node) || annotated;\n      });\n    });\n\n    return annotated;\n  },\n\n  __parseNodeAnnotations (node) {\n    switch (node.nodeType) {\n      case window.Node.TEXT_NODE:\n        return this.__parseTextAnnotations(node);\n      case window.Node.ELEMENT_NODE:\n        return this.__parseElementAnnotations(node);\n    }\n  },\n\n  __parseTextAnnotations (node) {\n    let expr = Expr.get(node.textContent);\n    let accessor = Accessor.get(node);\n    return this.__templateAnnotate(expr, accessor);\n  },\n\n  __templateAnnotate (expr, accessor) {\n    if (expr.type === 's') {\n      return false;\n    }\n\n    if (expr.constant) {\n      let val = expr.invoke(this);\n      accessor.set(val);\n      return false;\n    }\n\n    // annotate every paths\n    let annotation = new Annotation(this, expr, accessor);\n\n    if (expr.type === 'm') {\n      this.__templateGetBinding(expr.fn.name).annotations.push(annotation);\n    }\n\n    expr.vpaths.forEach(arg => this.__templateGetBinding(arg.name).annotations.push(annotation));\n\n    return true;\n  },\n\n  __templateGetBinding (path) {\n    let segments = path.split('.');\n    let bindings;\n    let binding;\n\n    for (let i = 0; i < segments.length; i++) {\n      let segment = segments[i];\n\n      bindings = binding ? binding.paths : this.__templateBindings;\n\n      if (!bindings[segment]) {\n        bindings[segment] = new Binding(this, segment);\n      }\n\n      binding = bindings[segment];\n    }\n\n    return binding;\n  },\n};\n\nT.Filter = Filter;\nT.Accessor = Accessor;\nT.Token = Token;\nT.Expr = Expr;\nT.Event = Event;\nT.deserialize = deserialize;\n\nwindow.T = T;\n\nexport default T;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Token from './token';\nimport Filter from './filter';\n\nconst CACHE = {\n  's': {\n    '[': new Map(),\n    '{': new Map(),\n  },\n  'v': {\n    '[': new Map(),\n    '{': new Map(),\n  },\n};\n\nfunction _get (value, mode, type) {\n  let cache = CACHE[type][mode];\n  if (cache.has(value)) {\n    return cache.get(value);\n  }\n\n  let expr = new Expr(value, mode, type);\n  if (type !== 's') {\n    cache.set(value, expr);\n  }\n\n  return expr;\n}\n\nclass Expr {\n  static get CACHE () {\n    return CACHE;\n  }\n\n  static get (value, unwrapped) {\n    value = (value || '').trim();\n\n    if (unwrapped) {\n      return _get(value, '[', 'v');\n    }\n\n    let mode = value[0];\n    if ((mode === '[' || mode === '{') && value[1] === mode) {\n      value = value.slice(2, -2).trim();\n      return _get(value, mode, 'v');\n    }\n\n    return _get(value, '[', 's');\n  }\n\n  static getFn (value, args, unwrapped) {\n    return Expr.get(value.indexOf('(') === -1 ? `${value}(${args.join(', ')})` : value, unwrapped);\n  }\n\n  static rawTokenize (str) {\n    let count = 0;\n    let tokens = [];\n\n    while (str && count++ < 10) {\n      let matches = str.match(/^\\s*(\"[^\"]*\"|[^,]+),?/);\n\n      str = str.substr(matches[0].length);\n      tokens.push(matches[1].trim());\n    }\n\n    return tokens;\n  }\n\n  static tokenize (str) {\n    return Expr.rawTokenize(str).map(token => Token.get(token));\n  }\n\n  constructor (value, mode, type) {\n    // define base properties\n    this.mode = mode;\n    this.type = type;\n    this.name = '';\n    this.args = [];\n    this.filters = [];\n    this.value = value;\n\n    if (type === 's') {\n      return;\n    }\n\n    let tokens = value.split('|');\n    let token = tokens[0].trim();\n\n    this.filters = tokens.slice(1).map(word => {\n      return Filter.get(word.trim());\n    });\n\n    if (token.indexOf('(') < 0) {\n      this.type = 'p';\n      this.name = token;\n      this.args.push(Token.get(token));\n    } else {\n      // force mode to '[' when type is !p\n      this.mode = '[';\n      this.type = 'm';\n\n      let matches = token.match(/([^(]+)\\(([^)]*)\\)/);\n\n      this.name = matches[1].trim();\n      this.fn = Token.get(this.name);\n\n      this.args = Expr.tokenize(matches[2]);\n    }\n  }\n\n  get constant () {\n    return this.type !== 'm' && this.vpaths.length !== this.args.length;\n  }\n\n  get vpaths () {\n    if (!this._vpaths) {\n      let paths = [];\n      this.args.forEach(arg => {\n        if (arg.type === 'v' && paths.indexOf(arg.name) === -1) {\n          paths.push(arg);\n        }\n      });\n      this._vpaths = paths;\n    }\n\n    return this._vpaths;\n  }\n\n  invoke (context, otherArgs) {\n    if (this.type === 'p') {\n      let val = this.args[0].value(context, otherArgs);\n      return this.filters.reduce((val, filter) => filter.invoke(val), val);\n    }\n\n    let fn = this.fn.value(context, context.__templateHost);\n    if (typeof fn !== 'function') {\n      throw new Error(`Method is not eligible, ${context.__templateHost.nodeName || '$anonymous'}#${this.name}`);\n    }\n\n    let args = this.args.map(arg => {\n      return arg.value(context, otherArgs);\n    });\n\n    return fn.apply(context, args);\n  }\n}\n\nexport default Expr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/expr.js","const CACHE = new Map();\n\nclass Token {\n  static get CACHE () {\n    return CACHE;\n  }\n\n  static get (name) {\n    if (CACHE.has(name)) {\n      return CACHE.get(name);\n    }\n\n    let token = new Token(name);\n    CACHE.set(name, token);\n    return token;\n  }\n\n  constructor (name) {\n    this.name = name;\n    this._value = null;\n    this.type = 'v';\n\n    if (!this.name.match(/^[a-zA-Z_]/)) {\n      try {\n        this._value = JSON.parse(this.name);\n        this.type = 's';\n      } catch (err) {\n      }\n    }\n  }\n\n  value (context, others) {\n    context = context || window;\n\n    if (this.type === 's') {\n      return this._value;\n    }\n\n    let val = valueOf(context, this.name);\n    if (typeof val !== 'undefined') {\n      return val;\n    }\n\n    val = valueOf(others, this.name);\n    if (typeof val !== 'undefined') {\n      return val;\n    }\n\n    return;\n  }\n}\n\nfunction valueOf (context, key) {\n  if (context) {\n    return typeof context.get === 'function' ? context.get(key) : context[key];\n  }\n}\n\nexport default Token;\n\n\n\n// WEBPACK FOOTER //\n// ./src/token.js","class Filter {\n  constructor (name, callback, otherArgs) {\n    this.name = name;\n    this.callback = callback;\n    this.otherArgs = otherArgs;\n  }\n\n  invoke (val) {\n    let args = [val];\n    [].push.apply(args, this.otherArgs);\n    return this.callback.apply(null, args);\n  }\n\n  static put (name, callback) {\n    registry[name] = callback;\n  }\n\n  static get (name) {\n    let segments = name.split(':');\n    let args = segments.splice(1);\n    let key = segments.pop();\n    return new Filter(key, registry[key], args);\n  }\n}\n\nconst registry = {\n  required: (val) => {\n    if (val === undefined || val === null || val === '') {\n      throw new Error('Value is required');\n    }\n    return val;\n  },\n  upper: (val) => String.prototype.toUpperCase.call(val || ''),\n  lower: (val) => String.prototype.toLowerCase.call(val || ''),\n  not: (val) => !val,\n  slice: (val, begin, end) => Array.prototype.slice.call(val || [], begin, end),\n};\n\nexport default Filter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/filter.js","class Binding {\n  constructor (context, model) {\n    this.context = context;\n    this.model = model;\n    this.paths = {};\n    this.annotations = [];\n  }\n\n  walkEffect (value) {\n    this.annotations.forEach(annotation => {\n      // try {\n      annotation.effect(value, this.model);\n      // } catch (err) {\n      //   console.error(`Error caught while walk effect annotation: ${annotation.expr ? annotation.expr.value : '#unknown'}\\n ${err.stack}`);\n      // }\n    });\n\n    Object.keys(this.paths).forEach(i => {\n      this.paths[i].walkEffect(value ? value[i] : undefined);\n    });\n  }\n}\n\nexport default Binding;\n\n\n\n// WEBPACK FOOTER //\n// ./src/binding.js","class BaseAccessor {\n  static get (node, name) {\n    if (node && 'nodeType' in node) {\n      switch (node.nodeType) {\n        case window.Node.ELEMENT_NODE:\n          if (name.endsWith('$')) {\n            return new AttributeAccessor(node, name);\n          } else if (name === 'text') {\n            return new TextAccessor(node);\n          } else if (name === 'html') {\n            return new HTMLAccessor(node, name);\n          } else if (name === 'value' && node.nodeName === 'INPUT') {\n            return new ValueAccessor(node);\n          }\n\n          if (name.startsWith('class.')) {\n            return new ClassAccessor(node, name.split('.').splice(1).join('.'));\n          } else if (name.startsWith('style.')) {\n            return new StyleAccessor(node, name.split('.').splice(1).join('.'));\n          }\n\n          return new BaseAccessor(node, name);\n        case window.Node.TEXT_NODE:\n          if (node.parentElement && node.parentElement.nodeName === 'TEXTAREA') {\n            return new ValueAccessor(node.parentElement);\n          }\n\n          return new TextAccessor(node);\n        default:\n          throw new Error(`Unimplemented resolving accessor for nodeType: ${node.nodeType}`);\n      }\n    } else {\n      return new BaseAccessor(node, name);\n    }\n  }\n\n  constructor (node, name) {\n    this.node = node;\n    this.name = name;\n  }\n\n  set (value) {\n    if (typeof this.node.set === 'function') {\n      this.node.set(this.name, value);\n    } else {\n      this.node[this.name] = value;\n    }\n  }\n\n  get () {\n    if (typeof this.node.get === 'function') {\n      return this.node.get(this.name);\n    } else {\n      return this.node[this.name];\n    }\n  }\n}\n\nclass TextAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'textContent');\n  }\n\n  set (value) {\n    this.node.textContent = typeof value === 'undefined' ? '' : value;\n  }\n}\n\nclass ClassAccessor extends BaseAccessor {\n  set (value) {\n    if (value) {\n      this.node.classList.add(this.name);\n    } else {\n      this.node.classList.remove(this.name);\n    }\n  }\n\n  get () {\n    throw new Error('Unimplemented');\n  }\n}\n\nclass StyleAccessor extends BaseAccessor {\n  set (value) {\n    this.node.style[this.name] = value || '';\n  }\n\n  get () {\n    throw new Error('Unimplemented');\n  }\n}\n\nclass HTMLAccessor extends BaseAccessor {\n  set (value) {\n    this.node.innerHTML = typeof value === 'undefined' ? '' : value;\n  }\n\n  get () {\n    return this.node.innerHTML;\n  }\n}\n\nclass ValueAccessor extends BaseAccessor {\n  constructor (node) {\n    super(node, 'value');\n  }\n\n  set (value) {\n    if (document.activeElement !== this.node) {\n      super.set(typeof value === 'undefined' ? '' : value);\n    }\n  }\n}\n\nclass AttributeAccessor extends BaseAccessor {\n  constructor (node, name) {\n    super(node, name.slice(0, -1));\n  }\n\n  set (value) {\n    if (value) {\n      this.node.setAttribute(this.name, value);\n    } else {\n      this.node.removeAttribute(this.name);\n    }\n  }\n\n  get () {\n    return this.node.getAttribute(this.name);\n  }\n}\n\nexport default BaseAccessor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/accessor.js","class Annotation {\n  constructor (model, expr, accessor) {\n    this.model = model;\n    this.expr = expr;\n    this.accessor = accessor;\n  }\n\n  effect (value) {\n    if (this.accessor) {\n      let value = this.expr.invoke(this.model);\n      // FIXME implement composite annotation\n      this.accessor.set(value);\n    } else {\n      this.expr.invoke(this.model);\n    }\n  }\n}\n\nexport default Annotation;\n\n\n\n// WEBPACK FOOTER //\n// ./src/annotation.js","let _matcher;\nlet _level = 0;\nlet _id = 0;\nlet _handlers = {};\nlet _delegatorInstances = {};\n\nfunction _addEvent (delegator, type, callback) {\n    // blur and focus do not bubble up but if you use event capturing\n    // then you will get them\n  let useCapture = type === 'blur' || type === 'focus';\n  delegator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel (e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n/**\n * returns function to use for determining if an element\n * matches a query selector\n *\n * @returns {Function}\n */\nfunction _getMatcher (element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n    // if it doesn't match a native browser method\n    // fall back to the delegator function\n  _matcher = EventDelegator.matchesSelector;\n  return _matcher;\n}\n\n/**\n * determines if the specified element matches a given selector\n *\n * @param {Node} element - the element to compare against the selector\n * @param {string} selector\n * @param {Node} boundElement - the element the listener was attached to\n * @returns {void|Node}\n */\nfunction _matchesSelector (element, selector, boundElement) {\n    // no selector means this event was bound directly to this element\n  if (selector === '_root') {\n    return boundElement;\n  }\n\n    // if we have moved up to the element you bound the event to\n    // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n    // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n    // if this element did not match but has a parent we should try\n    // going up the tree to see if any of the parent elements match\n    // for example if you are looking for a click on an <a> tag but there\n    // is a <span> inside of the a tag that it is the target,\n    // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler (delegator, event, selector, callback) {\n  if (!_handlers[delegator.id]) {\n    _handlers[delegator.id] = {};\n  }\n\n  if (!_handlers[delegator.id][event]) {\n    _handlers[delegator.id][event] = {};\n  }\n\n  if (!_handlers[delegator.id][event][selector]) {\n    _handlers[delegator.id][event][selector] = [];\n  }\n\n  _handlers[delegator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler (delegator, event, selector, callback) {\n    // if there are no events tied to this element at all\n    // then don't do anything\n  if (!_handlers[delegator.id]) {\n    return;\n  }\n\n    // if there is no event type specified then remove all events\n    // example: EventDelegator(element).off()\n  if (!event) {\n    for (let type in _handlers[delegator.id]) {\n      if (_handlers[delegator.id].hasOwnProperty(type)) {\n        _handlers[delegator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n    // if no callback or selector is specified remove all events of this type\n    // example: EventDelegator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[delegator.id][event] = {};\n    return;\n  }\n\n    // if a selector is specified but no callback remove all events\n    // for this selector\n    // example: EventDelegator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[delegator.id][event][selector];\n    return;\n  }\n\n    // if we have specified an event type, selector, and callback then we\n    // need to make sure there are callbacks tied to this selector to\n    // begin with.  if there aren't then we can stop here\n  if (!_handlers[delegator.id][event][selector]) {\n    return;\n  }\n\n    // if there are then loop through all the callbacks and if we find\n    // one that matches remove it from the array\n  for (let i = 0; i < _handlers[delegator.id][event][selector].length; i++) {\n    if (_handlers[delegator.id][event][selector][i] === callback) {\n      _handlers[delegator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent (id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  let target = e.target || e.srcElement;\n  let selector;\n  let match;\n  let matches = {};\n  let i = 0;\n  let j = 0;\n\n    // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _delegatorInstances[id].element);\n\n      if (match && EventDelegator.matchesEvent(type, _delegatorInstances[id].element, match, selector === '_root', e)) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n    // stopPropagation() fails to set cancelBubble to true in Webkit\n    // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function () {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          EventDelegator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\nlet id = 0;\nfunction nextId () {\n  return id++;\n}\n\nconst aliases = new Map();\nconst aliasesDefaultTranslator = name => ([ name ]);\nconst aliasesTranslators = {\n  transitionend (name) {\n    let el = document.createElement('fakeelement');\n    let transitions = {\n      'OTransition': 'oTransitionEnd',\n      'MozTransition': 'transitionend',\n      'WebkitTransition': 'webkitTransitionEnd',\n      'transition': 'transitionend',\n    };\n\n    for (let t in transitions) {\n      if (el.style[t] !== undefined) {\n        return [transitions[t]];\n      }\n    }\n  },\n};\n\nfunction _aliases (name) {\n  let theAliases;\n  if (aliases.has(name)) {\n    theAliases = aliases.get(name);\n  } else {\n    let translator = aliasesTranslators[name] || aliasesDefaultTranslator;\n    theAliases = translator(name);\n    aliases.set(name, theAliases);\n  }\n\n  return theAliases;\n}\n\n/**\n * binds the specified events to the element\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @param {boolean=} remove\n * @returns {Object}\n */\nfunction _bind (events, selector, callback, remove) {\n    // fail silently if you pass null or undefined as an alement\n    // in the EventDelegator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof (selector) === 'function') {\n    callback = selector;\n    selector = '_root';\n  }\n\n  if (selector instanceof window.HTMLElement) {\n    let id;\n    if (selector.hasAttribute('xin-event-id')) {\n      id = selector.getAttribute('xin-event-id');\n    } else {\n      id = nextId();\n      selector.setAttribute('xin-event-id', id);\n    }\n    selector = `[xin-event-id=\"${id}\"]`;\n  }\n\n  let id = this.id;\n  let i;\n\n  function _getGlobalCallback (type) {\n    return function (e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    _aliases(events[i]).forEach(alias => {\n      // console.info('> ' + events[i] + ':' + alias);\n      if (remove) {\n        _removeHandler(this, alias, selector, callback);\n        return;\n      }\n\n      if (!_handlers[id] || !_handlers[id][alias]) {\n        EventDelegator.addEvent(this, alias, _getGlobalCallback(alias));\n      }\n\n      _addHandler(this, alias, selector, callback);\n    });\n  }\n\n  return this;\n}\n\n/**\n * EventDelegator object constructor\n *\n * @param {Node} element\n */\nfunction EventDelegator (element, id) {\n    // called as function\n  if (!(this instanceof EventDelegator)) {\n        // only keep one EventDelegator instance per node to make sure that\n        // we don't create a ton of new objects if you want to delegate\n        // multiple events from the same node\n        //\n        // for example: EventDelegator(document).on(...\n    for (let key in _delegatorInstances) {\n      if (_delegatorInstances[key].element === element) {\n        return _delegatorInstances[key];\n      }\n    }\n\n    _id++;\n    _delegatorInstances[_id] = new EventDelegator(element, _id);\n\n    return _delegatorInstances[_id];\n  }\n\n  this.element = element;\n  this.id = id;\n}\n\n/**\n * adds an event\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @returns {Object}\n */\nEventDelegator.prototype.on = function (events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n * removes an event\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @returns {Object}\n */\nEventDelegator.prototype.off = function (events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nEventDelegator.prototype.fire = function (type, detail, options) {\n  options = options || {};\n  detail = detail || {};\n\n  let evt;\n  let bubbles = options.bubbles === undefined ? true : options.bubbles;\n  let cancelable = Boolean(options.cancelable);\n\n  switch (type) {\n    case 'click':\n      evt = new window.Event(type, {\n        bubbles: bubbles,\n        cancelable: cancelable,\n      });\n\n      // TODO check if without this works on every browsers\n      // evt = document.createEvent('HTMLEvents');\n      // evt.initEvent(type, true, false);\n      break;\n    default:\n      evt = new window.CustomEvent(type, {\n        bubbles: Boolean(bubbles),\n        cancelable: cancelable,\n        detail: detail,\n      });\n      break;\n  }\n\n  this.element.dispatchEvent(evt);\n\n  return evt;\n};\n\nEventDelegator.matchesSelector = function () {};\nEventDelegator.cancel = _cancel;\nEventDelegator.addEvent = _addEvent;\nEventDelegator.aliases = _aliases;\nEventDelegator.matchesEvent = function () {\n  return true;\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = EventDelegator;\n}\n\nexport default EventDelegator;\n\n\n\n// WEBPACK FOOTER //\n// ./src/event.js","function serialize (value) {\n  switch (typeof value) {\n    case 'boolean':\n      return value ? '' : undefined;\n\n    case 'object':\n      if (value instanceof Date) {\n        return value;\n      } else if (value instanceof RegExp) {\n        return value.toString().slice(1, -1);\n      } else if (value) {\n        try {\n          return JSON.stringify(value);\n        } catch (err) {\n          return '';\n        }\n      }\n      break;\n    default:\n      // noop\n  }\n  return value === null ? undefined : value;\n}\n\nfunction deserialize (value, type) {\n  switch (type) {\n    case Number:\n      value = Number(value);\n      break;\n\n    case Boolean:\n      value = Boolean(value === '' || value === 'true' || value === '1' || value === 'on');\n      break;\n\n    case Object:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // allow non-JSON literals like Strings and Numbers\n        // console.warn('Failed decode json: \"' + value + '\" to Object');\n      }\n      break;\n\n    case Array:\n      try {\n        value = JSON.parse(value);\n      } catch (err) {\n        // .console.warn('Failed decode json: \"' + value + '\" to Array');\n        value = null;\n      }\n      break;\n\n    case Date:\n      value = new Date(value);\n      break;\n\n    case RegExp:\n      value = new RegExp(value);\n      break;\n\n    case Function:\n      value = new Function(value); // eslint-disable-line\n      break;\n\n    // behave like default for now\n    // case String:\n    default:\n      break;\n  }\n  return value;\n}\n\nexport { serialize, deserialize };\n\n\n\n// WEBPACK FOOTER //\n// ./src/serializer.js"],"sourceRoot":""}